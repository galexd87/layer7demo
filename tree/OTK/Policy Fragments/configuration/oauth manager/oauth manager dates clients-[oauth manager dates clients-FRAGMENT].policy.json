{
  "goid": "e001cfd0c1c1ffaa18e187b5e72fe968",
  "guid": "b6dc2d44-bd1f-4f6a-bdc0-839f70d40369",
  "name": "oauth manager dates clients",
  "policyType": "FRAGMENT",
  "checksum": "b2e05d80e9f006454eb40980b084c85c681d9a9d",
  "folderPath": "/OTK/Policy Fragments/configuration/oauth manager",
  "soap": false,
  "policy": {
    "xml": "<wsp:Policy xmlns:L7p=\"http://www.layer7tech.com/ws/policy\" xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2002/12/policy\">\n    <wsp:All wsp:Usage=\"Required\">\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" ============================================\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" === ***  THIS POLICY IS READ ONLY ***\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" === If you have the need to customize this policy\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" === please contact CA APIM Support so we can improve customization capability\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" ============================================\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" === If you find you cannot add your customizations using the policies in the 'Customizations' folder\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" === please contact CA APIM Support so we can improve customization capability\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\" ============================================\"/>\n        </L7p:CommentAssertion>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${count}\"/>\n                    <L7p:Expression2 stringValue=\"0\"/>\n                    <L7p:Operator operator=\"GT\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Operator operator=\"GT\"/>\n                            <L7p:RightValue stringValue=\"0\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:XslTransformation>\n                    <L7p:Direction intValue=\"-1\"/>\n                    <L7p:MsgVarPrefix stringValue=\"xsltFindDates\"/>\n                    <L7p:OtherTargetMessageVariable stringValue=\"findDates\"/>\n                    <L7p:ResourceInfo staticResourceInfo=\"included\">\n                        <L7p:Document stringValueReference=\"inline\"><![CDATA[<xsl:stylesheet version=\"1.0\" xmlns:ns=\"http://ns.l7tech.com/2012/11/otk-clientstore\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n                <xsl:output method=\"text\" omit-xml-declaration=\"yes\"/>\n\n                <xsl:template match=\"/\">\n                <xsl:for-each select=\"(//ns:rexpiration|//ns:expiration|//ns:created)[text()!='0']\">\n                <xsl:value-of select=\"text()\"/><xsl:text>;</xsl:text>\n                </xsl:for-each>\n                </xsl:template>\n\n                </xsl:stylesheet>]]></L7p:Document>\n                    </L7p:ResourceInfo>\n                    <L7p:Target target=\"OTHER\"/>\n                    <L7p:TransformName stringValue=\"\"/>\n                    <L7p:XsltVersion stringValue=\"1.0\"/>\n                </L7p:XslTransformation>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtmaW5kRGF0ZXMubWFpbnBhcnR9\"/>\n                    <L7p:VariableToSet stringValue=\"inputDates\"/>\n                </L7p:SetVariable>\n                <L7p:Split>\n                    <L7p:InputVariable stringValue=\"inputDates\"/>\n                    <L7p:OutputVariable stringValue=\"dates\"/>\n                    <L7p:SplitPattern stringValue=\";\"/>\n                    <L7p:SplitPatternRegEx booleanValue=\"false\"/>\n                </L7p:Split>\n                <L7p:ForEachLoop L7p:Usage=\"Required\" iterationLimit=\"10000\" loopVariable=\"dates\" variablePrefix=\"date\">\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"JHtkYXRlLmN1cnJlbnR9\"/>\n                        <L7p:DataType variableDataType=\"dateTime\"/>\n                        <L7p:DateFormat stringValue=\"&lt;Timestamp>\"/>\n                        <L7p:DateOffsetExpression stringValue=\"\"/>\n                        <L7p:VariableToSet stringValue=\"current\"/>\n                    </L7p:SetVariable>\n                    <L7p:Regex>\n                        <L7p:AutoTarget booleanValue=\"false\"/>\n                        <L7p:OtherTargetMessageVariable stringValue=\"toBeReturned\"/>\n                        <L7p:PatternContainsVariables booleanValue=\"true\"/>\n                        <L7p:Regex stringValue=\"[>]${date.current}[&lt;]\"/>\n                        <L7p:Replace booleanValue=\"true\"/>\n                        <L7p:Replacement stringValue=\">${current.yyyy-MM-dd HH:mm:ss}&lt;\"/>\n                        <L7p:Target target=\"OTHER\"/>\n                    </L7p:Regex>\n                </L7p:ForEachLoop>\n            </wsp:All>\n            <L7p:TrueAssertion/>\n        </wsp:OneOrMore>\n        <L7p:ExportVariables>\n            <L7p:ExportedVars stringArrayValue=\"included\">\n                <L7p:item stringValue=\"toBeReturned\"/>\n            </L7p:ExportedVars>\n        </L7p:ExportVariables>\n    </wsp:All>\n</wsp:Policy>"
  }
}