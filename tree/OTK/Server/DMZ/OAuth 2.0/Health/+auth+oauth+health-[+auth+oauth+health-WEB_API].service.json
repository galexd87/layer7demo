{
  "goid": "69354892160d5ec1adefbad3f1d7e550",
  "guid": "89c365dc-45c5-4673-9d12-fc7a7ed7a036",
  "name": "/auth/oauth/health",
  "resolutionPath": "/auth/oauth/health",
  "serviceType": "WEB_API",
  "checksum": "dc3d7f612bfd62f3feb8bd4eba710bf79f4a1e0e",
  "enabled": true,
  "folderPath": "/OTK/Server/DMZ/OAuth 2.0/Health",
  "methodsAllowed": [
    "GET",
    "POST",
    "PUT",
    "DELETE"
  ],
  "tracingEnabled": false,
  "wssProcessingEnabled": false,
  "laxResolution": false,
  "policy": {
    "xml": "<wsp:Policy xmlns:L7p=\"http://www.layer7tech.com/ws/policy\" xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2002/12/policy\">\n    <wsp:All wsp:Usage=\"Required\">\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"This API implements a health check for OTK\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"This API may be consumed every 1s\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"Basic Check : This check is designed with IP filter for container deployments\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"Advanced Check : This check requires security &amp; can be used for any form deployment\"/>\n        </L7p:CommentAssertion>\n        <L7p:CustomizeErrorResponse>\n            <L7p:Content stringValue=\"${error.msg}\"/>\n            <L7p:ContentType stringValue=\"text/plain\"/>\n            <L7p:ExtraHeaders nameValuePairArray=\"included\">\n                <L7p:item nameValuePair=\"included\">\n                    <L7p:Key stringValue=\"Pragma\"/>\n                    <L7p:Value stringValue=\"no-cache\"/>\n                </L7p:item>\n                <L7p:item nameValuePair=\"included\">\n                    <L7p:Key stringValue=\"Cache-Control\"/>\n                    <L7p:Value stringValue=\"no-store\"/>\n                </L7p:item>\n                <L7p:item nameValuePair=\"included\">\n                    <L7p:Key stringValue=\"x-ca-err\"/>\n                    <L7p:Value stringValue=\"${error.code}\"/>\n                </L7p:item>\n            </L7p:ExtraHeaders>\n            <L7p:HttpStatus stringValue=\"${status}\"/>\n        </L7p:CustomizeErrorResponse>\n        <L7p:Encapsulated>\n            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"47f768f4-b478-472b-a1ee-10f4b6e76f99\"/>\n            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Require SSL (with Client Certificate)\"/>\n            <L7p:Parameters mapValue=\"included\">\n                <L7p:entry>\n                    <L7p:key stringValue=\"apiPrefix\"/>\n                    <L7p:value stringValue=\"\"/>\n                </L7p:entry>\n                <L7p:entry>\n                    <L7p:key stringValue=\"custom\"/>\n                    <L7p:value stringValue=\"\"/>\n                </L7p:entry>\n                <L7p:entry>\n                    <L7p:key stringValue=\"requireClientCert\"/>\n                    <L7p:value stringValue=\"false\"/>\n                </L7p:entry>\n            </L7p:Parameters>\n        </L7p:Encapsulated>\n        <wsp:All wsp:Usage=\"Required\">\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                <L7p:VariableToSet stringValue=\"cleanCreds\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"ZmFpbA==\"/>\n                <L7p:VariableToSet stringValue=\"clientCheck\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"ZmFpbA==\"/>\n                <L7p:VariableToSet stringValue=\"accessTokenCheck\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"ZmFpbA==\"/>\n                <L7p:VariableToSet stringValue=\"idTokenCheck\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                <L7p:VariableToSet stringValue=\"healthCheckError\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:AssertionComment assertionComment=\"included\">\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"// must be url encoded (i.e.: 'scopea scopeb' == 'scopea+scopeb'\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:AssertionComment>\n                <L7p:Base64Expression stringValue=\"aGVhbHRoY2hlY2s=\"/>\n                <L7p:VariableToSet stringValue=\"scope\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"T1RLLUhlYWx0aGNoZWNrLSR7Y2xpZW50X2lkfQ==\"/>\n                <L7p:VariableToSet stringValue=\"client_name\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:AssertionComment assertionComment=\"included\">\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"// must be url encoded (i.e.: 'scopea scopeb' == 'scopea+scopeb'\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:AssertionComment>\n                <L7p:Base64Expression stringValue=\"SGVhbHRoY2hlY2tBUEk=\"/>\n                <L7p:VariableToSet stringValue=\"resource_owner\"/>\n            </L7p:SetVariable>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"// configuration\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:All>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${request.http.parameter.check_type}\"/>\n                    <L7p:Expression2 stringValue=\"advanced\"/>\n                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:RightValue stringValue=\"advanced\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"YWR2YW5jZWQ=\"/>\n                    <L7p:VariableToSet stringValue=\"check_type\"/>\n                </L7p:SetVariable>\n            </wsp:All>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"YmFzaWM=\"/>\n                <L7p:VariableToSet stringValue=\"check_type\"/>\n            </L7p:SetVariable>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"// set check_type\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:OneOrMore>\n        <wsp:All wsp:Usage=\"Required\">\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"Basic Check : Check if OTK DB connnection is working \"/>\n            </L7p:CommentAssertion>\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"Basic Check : This can be invoked only at localhost. Disable the below line to acccess it from outside  \"/>\n            </L7p:CommentAssertion>\n            <L7p:RemoteIpAddressRange>\n                <L7p:NetworkMask stringValue=\"32\"/>\n                <L7p:StartIp stringValue=\"127.0.0.1\"/>\n            </L7p:RemoteIpAddressRange>\n            <L7p:Encapsulated>\n                <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8b9ded79-cefc-4481-94ab-3cb31ac8136b\"/>\n                <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Version GET\"/>\n                <L7p:Parameters mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"operation\"/>\n                        <L7p:value stringValue=\"getOtkVersion\"/>\n                    </L7p:entry>\n                </L7p:Parameters>\n            </L7p:Encapsulated>\n            <L7p:ComparisonAssertion>\n                <L7p:Expression1 stringValue=\"${otk_version.queryresult.count}\"/>\n                <L7p:Expression2 stringValue=\"1\"/>\n                <L7p:Predicates predicates=\"included\">\n                    <L7p:item binary=\"included\">\n                        <L7p:RightValue stringValue=\"1\"/>\n                    </L7p:item>\n                </L7p:Predicates>\n            </L7p:ComparisonAssertion>\n        </wsp:All>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <L7p:ComparisonAssertion>\n                <L7p:CaseSensitive booleanValue=\"false\"/>\n                <L7p:Expression1 stringValue=\"${check_type}\"/>\n                <L7p:Expression2 stringValue=\"basic\"/>\n                <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                <L7p:Predicates predicates=\"included\">\n                    <L7p:item binary=\"included\">\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:RightValue stringValue=\"basic\"/>\n                    </L7p:item>\n                </L7p:Predicates>\n            </L7p:ComparisonAssertion>\n            <wsp:All wsp:Usage=\"Required\">\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:HtmlFormDataAssertion>\n                        <L7p:AllowGet booleanValue=\"true\"/>\n                        <L7p:DisallowOtherFields booleanValue=\"true\"/>\n                        <L7p:FieldSpecs htmlFormFieldSpecArray=\"included\">\n                            <L7p:item htmlFormFieldSpec=\"included\">\n                                <L7p:AllowEmpty boxedBooleanValue=\"false\"/>\n                                <L7p:DataType fieldDataType=\"any\"/>\n                                <L7p:MaxOccurs intValue=\"1\"/>\n                                <L7p:MinOccurs intValue=\"1\"/>\n                                <L7p:Name stringValue=\"apikey\"/>\n                            </L7p:item>\n                            <L7p:item htmlFormFieldSpec=\"included\">\n                                <L7p:AllowEmpty boxedBooleanValue=\"false\"/>\n                                <L7p:DataType fieldDataType=\"any\"/>\n                                <L7p:MaxOccurs intValue=\"1\"/>\n                                <L7p:Name stringValue=\"check_type\"/>\n                            </L7p:item>\n                        </L7p:FieldSpecs>\n                    </L7p:HtmlFormDataAssertion>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:Regex>\n                                <L7p:AutoTarget booleanValue=\"false\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"error.msg\"/>\n                                <L7p:Regex stringValue=\"Missing or duplicate parameters\"/>\n                                <L7p:Replace booleanValue=\"true\"/>\n                                <L7p:Replacement stringValue=\"invalid parameters : API key was empty OR API key was not provided OR more than one API key was provided\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:Regex>\n                            <L7p:AuditDetailAssertion>\n                                <L7p:Detail stringValue=\"API key was empty OR API key was not provided OR more than one API key was provided\"/>\n                            </L7p:AuditDetailAssertion>\n                            <L7p:FalseAssertion/>\n                        </wsp:All>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// validate request\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${gateway.otk.health.apikey}\"/>\n                        <L7p:Expression2 stringValue=\"${gateway.otk.health.apikey}\"/>\n                        <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                        <L7p:Negate booleanValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Negated booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"${gateway.otk.health.apikey}\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:Encapsulated>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"custom\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"000\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"API key has not been set\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"error.msg\"/>\n                            <L7p:Regex stringValue=\"The request failed due to some unknown reason\"/>\n                            <L7p:Replace booleanValue=\"true\"/>\n                            <L7p:Replacement stringValue=\"The server configuration is invalid. Missing otk health api key. Contact the administrator\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:FalseAssertion/>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// check API key exists\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${request.http.parameter.apikey}\"/>\n                        <L7p:Expression2 stringValue=\"${gateway.otk.health.apikey}\"/>\n                        <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:RightValue stringValue=\"${gateway.otk.health.apikey}\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:Encapsulated>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"custom\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"103\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"error.msg\"/>\n                            <L7p:Regex stringValue=\"Missing or duplicate parameters\"/>\n                            <L7p:Replace booleanValue=\"true\"/>\n                            <L7p:Replacement stringValue=\"invalid parameters : api key\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"API key provided was invalid, given: '${request.http.parameter.apikey}'\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:FalseAssertion/>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// check API key validity\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:Include>\n                    <L7p:PolicyGuid stringValue=\"fd9342d8-5086-4758-8fd3-caa2df094448\"/>\n                </L7p:Include>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:Encapsulated>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"68ad78a1-f4a1-4568-91e1-0980d95c75cd\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Cache Look Up\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"cacheID\"/>\n                                    <L7p:value stringValue=\"HealthCheckAPI\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"cacheKey\"/>\n                                    <L7p:value stringValue=\"health_check_client\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"maxEntryAge\"/>\n                                    <L7p:value stringValue=\"3600\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:EvaluateJsonPathExpressionV2>\n                                    <L7p:Expression stringValue=\"$.clientData.client_id\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:VariablePrefix stringValue=\"client_id\"/>\n                                </L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:EvaluateJsonPathExpressionV2>\n                                    <L7p:Expression stringValue=\"$.clientData.clientSecret\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:VariablePrefix stringValue=\"client_secret\"/>\n                                </L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:EvaluateJsonPathExpressionV2>\n                                    <L7p:Expression stringValue=\"$.clientData.scope\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:VariablePrefix stringValue=\"scope\"/>\n                                </L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtjbGllbnRfSWQucmVzdWx0fQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"client_id\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtjbGllbnRfc2VjcmV0LnJlc3VsdH0=\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtzY29wZS5yZXN1bHR9\"/>\n                                    <L7p:VariableToSet stringValue=\"scope\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// lookup Client details\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:Encapsulated>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"6dbc70f9-bb40-4a69-a0ec-88fae4f35300\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Generate OAuth Token\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ac\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"art\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"at\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"cid\"/>\n                                    <L7p:value stringValue=\"true\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"cidm\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ock\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ot\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"rft\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"urt\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dGVzdCR7Z2VuVG9rZW59\"/>\n                                    <L7p:VariableToSet stringValue=\"client_id\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtnZW5TZWNyZXR9\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// 3600s\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:DataType variableDataType=\"dateTime\"/>\n                                    <L7p:DateOffsetExpression stringValue=\"3600\"/>\n                                    <L7p:VariableToSet stringValue=\"exp\"/>\n                                </L7p:SetVariable>\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:Encapsulated>\n\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"71e2d996-cea5-4862-ad46-7b50c0d36c84\"/>\n\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Client Persist\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"account_plan_mapping_ids\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"callback\"/>\n                                    <L7p:value stringValue=\"https://localhost\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_custom\"/>\n                                    <L7p:value stringValue=\"{}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_ident\"/>\n                                    <L7p:value stringValue=\"${client_id}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"${client_id}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_name\"/>\n                                    <L7p:value stringValue=\"${client_name}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_secret\"/>\n                                    <L7p:value stringValue=\"${client_secret}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_status\"/>\n                                    <L7p:value stringValue=\"ENABLED\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"{}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"description\"/>\n                                    <L7p:value stringValue=\"Test client for automated healthcheck\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"environment\"/>\n                                    <L7p:value stringValue=\"ALL\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"expiration\"/>\n                                    <L7p:value stringValue=\"${exp.seconds}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"key_custom\"/>\n                                    <L7p:value stringValue=\"{}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"org\"/>\n                                    <L7p:value stringValue=\"CA Technologies\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"persist_client\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"persist_client_and_key\"/>\n                                    <L7p:value stringValue=\"true\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"persist_client_key\"/>\n                                    <L7p:value stringValue=\"false\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"registered_by\"/>\n                                    <L7p:value stringValue=\"${resource_owner}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"scope\"/>\n                                    <L7p:value stringValue=\"${scope}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"service_ids\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"type\"/>\n                                    <L7p:value stringValue=\"confidential\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                    </L7p:Encapsulated>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"cGFzcw==\"/>\n                                    <L7p:VariableToSet stringValue=\"clientCheck\"/>\n                                    </L7p:SetVariable>\n                                    <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// persist client\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:assertionComment>\n                                </wsp:All>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ew0KCSJjbGllbnREYXRhIjp7DQoJCSJjbGllbnRJZCI6IiR7Y2xpZW50X2lkfSIsDQoJCSJjbGllbnRTZWNyZXQiOiIke2NsaWVudF9zZWNyZXR9IiwNCgkJInNjb3BlIjoiJHtzY29wZX0iDQoJfQ0KfQ==\"/>\n                                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                    <L7p:DataType variableDataType=\"message\"/>\n                                    <L7p:VariableToSet stringValue=\"clientData\"/>\n                                </L7p:SetVariable>\n                                <L7p:Encapsulated>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"e5ee8bcf-1796-4297-88dd-c838031a6f6a\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Cache Store\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"cacheID\"/>\n                                    <L7p:value stringValue=\"HealthCheckAPI\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"cacheKey\"/>\n                                    <L7p:value stringValue=\"health_check_client\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"maxEntries\"/>\n                                    <L7p:value stringValue=\"1\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"maxEntryAge\"/>\n                                    <L7p:value stringValue=\"3600\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"maxEntrySize\"/>\n                                    <L7p:value stringValue=\"1000\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"msg\"/>\n                                    <L7p:value stringValue=\"clientData\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// create &amp; cache oauth client, lifetime 3600s\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValueReference=\"inline\"><![CDATA[Persisting client failed:\n${error.msg}]]></L7p:Detail>\n                                    <L7p:LoggingOnly booleanValue=\"true\"/>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"healthCheckError\"/>\n                                </L7p:SetVariable>\n                                <L7p:FalseAssertion/>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// error\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Client Setup\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:Encapsulated>\n                                <L7p:EncapsulatedAssertionConfigGuid stringValue=\"2e6e2ef3-a36f-4548-a2c4-7b369b7ae184\"/>\n                                <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Variable Configuration\"/>\n                                <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                </L7p:Parameters>\n                            </L7p:Encapsulated>\n                            <wsp:OneOrMore wsp:Usage=\"Required\">\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${gateway.otk.port.health}\"/>\n                                    <L7p:Expression2 stringValue=\"\"/>\n                                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                                    <L7p:Negate booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"aHR0cHM6Ly8ke2dhdGV3YXkuY2x1c3Rlci5ob3N0bmFtZX06JHtnYXRld2F5Lm90ay5wb3J0LmhlYWx0aH0=\"/>\n                                    <L7p:VariableToSet stringValue=\"url\"/>\n                                    </L7p:SetVariable>\n                                </wsp:All>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"aHR0cHM6Ly8ke2dhdGV3YXkuY2x1c3Rlci5ob3N0bmFtZX0=\"/>\n                                    <L7p:VariableToSet stringValue=\"url\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check if port number set\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:OneOrMore>\n                            <wsp:OneOrMore wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${oauth2_server_url_prefix}\"/>\n                                    <L7p:Expression2 stringValue=\"\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHt1cmx9LyR7b2F1dGgyX3NlcnZlcl91cmxfcHJlZml4fQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"url\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check for a prefix\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:OneOrMore>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// find server location (with prefix)\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:All>\n                        <L7p:CommentAssertion>\n                            <L7p:Comment stringValue=\"Basic check: use grant_type=client_credentials\"/>\n                        </L7p:CommentAssertion>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"Y2xpZW50X2lkPSR7Y2xpZW50X2lkfSZjbGllbnRfc2VjcmV0PSR7Y2xpZW50X3NlY3JldH0mZ3JhbnRfdHlwZT1jbGllbnRfY3JlZGVudGlhbHMmc2NvcGU9JHtzY29wZX0=\"/>\n                                    <L7p:ContentType stringValue=\"application/x-www-form-urlencoded; charset=utf-8\"/>\n                                    <L7p:DataType variableDataType=\"message\"/>\n                                    <L7p:VariableToSet stringValue=\"msg\"/>\n                                </L7p:SetVariable>\n                                <L7p:HttpRoutingAssertion>\n                                    <L7p:CurrentSecurityHeaderHandling intValue=\"3\"/>\n                                    <L7p:HttpMethod httpMethod=\"POST\"/>\n                                    <L7p:ProtectedServiceUrl stringValue=\"${url}/auth/oauth/v2/token\"/>\n                                    <L7p:ProxyPassword stringValueNull=\"null\"/>\n                                    <L7p:ProxyUsername stringValueNull=\"null\"/>\n                                    <L7p:RequestHeaderRules httpPassthroughRuleSet=\"included\">\n                                    <L7p:ForwardAll booleanValue=\"true\"/>\n                                    <L7p:Rules httpPassthroughRules=\"included\">\n                                    <L7p:item httpPassthroughRule=\"included\">\n                                    <L7p:Name stringValue=\"Cookie\"/>\n                                    </L7p:item>\n                                    <L7p:item httpPassthroughRule=\"included\">\n                                    <L7p:Name stringValue=\"SOAPAction\"/>\n                                    </L7p:item>\n                                    </L7p:Rules>\n                                    </L7p:RequestHeaderRules>\n                                    <L7p:RequestMsgSrc stringValue=\"msg\"/>\n                                    <L7p:RequestParamRules httpPassthroughRuleSet=\"included\">\n                                    <L7p:ForwardAll booleanValue=\"true\"/>\n                                    <L7p:Rules httpPassthroughRules=\"included\"/>\n                                    </L7p:RequestParamRules>\n                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet=\"included\">\n                                    <L7p:ForwardAll booleanValue=\"true\"/>\n                                    <L7p:Rules httpPassthroughRules=\"included\">\n                                    <L7p:item httpPassthroughRule=\"included\">\n                                    <L7p:Name stringValue=\"Set-Cookie\"/>\n                                    </L7p:item>\n                                    </L7p:Rules>\n                                    </L7p:ResponseHeaderRules>\n                                    <L7p:ResponseMsgDest stringValue=\"resp\"/>\n                                    <L7p:SamlAssertionVersion intValue=\"2\"/>\n                                </L7p:HttpRoutingAssertion>\n                                <L7p:ComparisonAssertion>\n                                    <L7p:Expression1 stringValue=\"${resp.mainpart}\"/>\n                                    <L7p:Expression2 stringValue=\"access_token\"/>\n                                    <L7p:Operator operator=\"CONTAINS\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"CONTAINS\"/>\n                                    <L7p:RightValue stringValue=\"access_token\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"cGFzcw==\"/>\n                                    <L7p:VariableToSet stringValue=\"accessTokenCheck\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// call token endpoint\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValueReference=\"inline\"><![CDATA[Basic check failed:\nToken request to '${url}/auth/oauth/v2/token' using 'grant_type=client_credentials' failed!]]></L7p:Detail>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"healthCheckError\"/>\n                                </L7p:SetVariable>\n                                <L7p:FalseAssertion/>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// error\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// request token using grant_type=client_credentials\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:OneOrMore wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${accessTokenCheck}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:RightValue stringValue=\"pass\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:Encapsulated>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// access_token, refresh_token\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"ada963ed-0428-4ead-8576-9ef79193752c\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Token Delete\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"access_token\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"${client_id}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"refresh_token\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"temp_token\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                            </wsp:OneOrMore>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValueReference=\"inline\"><![CDATA[Clean up task failed:\n${error.msg}]]></L7p:Detail>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"healthCheckError\"/>\n                                </L7p:SetVariable>\n                                <L7p:FalseAssertion/>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Error\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"CleanUp\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${healthCheckError}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:HardcodedResponse>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// empty response for successful Health Check\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:Base64ResponseBody stringValue=\"ewogICJlcnJvciI6ImludmFsaWRfcmVxdWVzdCIsCiAgImVycm9yX2Rlc2NyaXB0aW9uIjoiVGhlIHNlcnZlciBjb25maWd1cmF0aW9uIGlzIGludmFsaWQuIFNvbWUgZXJyb3Igb2NjdXJlZCBkdXJpbmcgT1RLIGhlYWx0aCBjaGVjay4gQ29udGFjdCB0aGUgYWRtaW5pc3RyYXRvciIKfQ==\"/>\n                            <L7p:ResponseContentType stringValue=\"application/json; charset=UTF-8\"/>\n                            <L7p:ResponseStatus stringValue=\"500\"/>\n                        </L7p:HardcodedResponse>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Failure\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                </wsp:OneOrMore>\n            </wsp:All>\n        </wsp:OneOrMore>\n    </wsp:All>\n</wsp:Policy>"
  }
}