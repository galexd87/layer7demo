{
  "goid": "e001cfd0c1c1ffaa18e187b5e72fea90",
  "guid": "4d538778-d2b8-40ea-ab0b-b67cafc9d87f",
  "name": "oauth/manager/clients",
  "resolutionPath": "/oauth/manager/clients",
  "serviceType": "WEB_API",
  "checksum": "ca940335a658d4eae4f8a374a28309bc7efebd3f",
  "enabled": true,
  "folderPath": "/OTK/Server/Internal/Tools/OAuth Manager",
  "methodsAllowed": [
    "GET",
    "POST",
    "PUT",
    "DELETE"
  ],
  "tracingEnabled": false,
  "wssProcessingEnabled": false,
  "laxResolution": false,
  "policy": {
    "xml": "<wsp:Policy xmlns:L7p=\"http://www.layer7tech.com/ws/policy\" xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2002/12/policy\">\n    <wsp:All wsp:Usage=\"Required\">\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"============================================\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"=== *** THIS POLICY IS OVERWRITTEN DURING AN UPGRADE ***\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"=== Be aware that custom configuration made in this policy is overwritten during a solution kit upgrade.\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"=== However, the older version of the policy is kept in the history and can be referenced.\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"=== After upgrade, manually merge customizations from the old version of the policy to the new version.\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"============================================\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"Implementation of a simple oauth manager that uses API calls only to access the client- and tokenstore\"/>\n        </L7p:CommentAssertion>\n        <L7p:CustomizeErrorResponse>\n            <L7p:AssertionComment assertionComment=\"included\">\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"HTML\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:AssertionComment>\n            <L7p:Content stringValueReference=\"inline\"><![CDATA[<!DOCTYPE html>\n<html>\n<head>\n    <title>${this.app.name}</title>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=8,IE=9,IE=10,IE=11,chrome=1\" />\n    ${css}\n</head>\n\n<body>\n    <div>\n        <div class=\"navbar\">\n            <div class=\"container-fluid\">\n                ${brandLogo}\n                <a class=\"site\" href=\"${this.app.url.login}?state=init\">${this.app.name}</a>\n<!--LOGGED_IN_USER_DIV-->\n            </div>\n        </div>\n        <div class=\"container-fluid\">\n<!--LOGGED_IN_NAV_DIV-->\n                <div>\n                <h1>Error</h1>\n                <code>\n                ${error.msg}\n                </code>\n                </div>\n                <p>Please try again. If the error occurs again please click <a href=\"${this.app.url.login}\">here</a> to login again.</p>\n                <p>If the error still occurs please contact the system administrator.</p>\n                ${website_bottom}]]></L7p:Content>\n            <L7p:ContentType stringValue=\"${content-type}\"/>\n            <L7p:ExtraHeaders nameValuePairArray=\"included\">\n                <L7p:item nameValuePair=\"included\">\n                    <L7p:Key stringValue=\"Pragma\"/>\n                    <L7p:Value stringValue=\"no-cache\"/>\n                </L7p:item>\n                <L7p:item nameValuePair=\"included\">\n                    <L7p:Key stringValue=\"Cache-Control\"/>\n                    <L7p:Value stringValue=\"no-store\"/>\n                </L7p:item>\n                <L7p:item nameValuePair=\"included\">\n                    <L7p:Key stringValue=\"x-ca-err\"/>\n                    <L7p:Value stringValue=\"${error.code}\"/>\n                </L7p:item>\n            </L7p:ExtraHeaders>\n            <L7p:HttpStatus stringValue=\"${status}\"/>\n        </L7p:CustomizeErrorResponse>\n        <L7p:Include>\n            <L7p:PolicyGuid stringValue=\"9f29a8bd-912e-40a5-a48c-3b6f8aa40ac6\"/>\n            <L7p:PolicyName stringValue=\"OTK Security Header Extension\"/>\n        </L7p:Include>\n        <wsp:All wsp:Usage=\"Required\">\n            <L7p:AddHeader>\n                <L7p:AssertionComment assertionComment=\"included\">\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                            <L7p:value stringValue=\"HTTPS only\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Inform the browser to only accept SSL connections\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:AssertionComment>\n                <L7p:HeaderName stringValue=\"Content-Security-Policy\"/>\n                <L7p:HeaderValue stringValue=\"default-src 'self'; script-src  ajax.googleapis.com 'unsafe-inline'; img-src * data:; style-src 'unsafe-inline'; font-src * data:; object-src 'none';\"/>\n                <L7p:RemoveExisting booleanValue=\"true\"/>\n                <L7p:Target target=\"RESPONSE\"/>\n            </L7p:AddHeader>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"Override OTK Security Header Extension\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:All>\n        <L7p:Encapsulated>\n            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"2e6e2ef3-a36f-4548-a2c4-7b369b7ae184\"/>\n            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Variable Configuration\"/>\n        </L7p:Encapsulated>\n        <L7p:Encapsulated>\n            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"db047e91-52db-4176-a3eb-a43aa0c2c67c\"/>\n            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Storage Configuration\"/>\n            <L7p:Parameters mapValue=\"included\">\n                <L7p:entry>\n                    <L7p:key stringValue=\"custom\"/>\n                    <L7p:value stringValue=\"\"/>\n                </L7p:entry>\n            </L7p:Parameters>\n        </L7p:Encapsulated>\n        <L7p:Encapsulated>\n            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"21b101c5-5701-4ca2-9206-237f8b37bfe8\"/>\n            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK id_token configuration\"/>\n        </L7p:Encapsulated>\n        <L7p:SetVariable>\n            <L7p:AssertionComment assertionComment=\"included\">\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"initialize\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"overridden in the case of an error\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:AssertionComment>\n            <L7p:Base64Expression stringValue=\"\"/>\n            <L7p:VariableToSet stringValue=\"error.code\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:AssertionComment assertionComment=\"included\">\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"initialize\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"overridden in the case of an error\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:AssertionComment>\n            <L7p:Base64Expression stringValue=\"\"/>\n            <L7p:VariableToSet stringValue=\"error.msg\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:AssertionComment assertionComment=\"included\">\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"initialize\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"overridden when user logs in or if a cookie is available\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:AssertionComment>\n            <L7p:Base64Expression stringValue=\"\"/>\n            <L7p:VariableToSet stringValue=\"current.username\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:AssertionComment assertionComment=\"included\">\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"initialize\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"overridden when user is looking up values of a different user\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:AssertionComment>\n            <L7p:Base64Expression stringValue=\"\"/>\n            <L7p:VariableToSet stringValue=\"lookupUser\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:Base64Expression stringValue=\"JHtoYXNoZWRfc2VjcmV0X2VuYWJsZX0=\"/>\n            <L7p:VariableToSet stringValue=\"hashing_flag\"/>\n        </L7p:SetVariable>\n        <wsp:All wsp:Usage=\"Required\">\n            <L7p:Include>\n                <L7p:PolicyGuid stringValue=\"054e5792-882a-4d7c-8294-5b2f6bee588b\"/>\n                <L7p:PolicyName stringValue=\"oauth manager website brand logo\"/>\n            </L7p:Include>\n            <L7p:Include>\n                <L7p:PolicyGuid stringValue=\"02dfa7fb-807f-4e55-a4d1-7a942b7fbc9f\"/>\n                <L7p:PolicyName stringValue=\"oauth manager config\"/>\n            </L7p:Include>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"aHR0cHM6Ly8ke3JlcXVlc3QudXJsLmhvc3R9Ojg0NDMke3JlcXVlc3QudXJsLnBhdGh9\"/>\n                <L7p:VariableToSet stringValue=\"this.app.url.login\"/>\n            </L7p:SetVariable>\n            <L7p:Regex>\n                <L7p:AutoTarget booleanValue=\"false\"/>\n                <L7p:OtherTargetMessageVariable stringValue=\"this.app.url.login\"/>\n                <L7p:Regex stringValue=\"/clients$\"/>\n                <L7p:Replace booleanValue=\"true\"/>\n                <L7p:Replacement stringValue=\"\"/>\n                <L7p:Target target=\"OTHER\"/>\n            </L7p:Regex>\n            <wsp:OneOrMore L7p:Enabled=\"false\" wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${dbsystem}\"/>\n                    <L7p:Expression2 stringValue=\"cassandra\"/>\n                    <L7p:Negate booleanValue=\"true\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:Negated booleanValue=\"true\"/>\n                            <L7p:RightValue stringValue=\"cassandra\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"c3R5bGU9ImRpc3BsYXk6IG5vbmU7Ig==\"/>\n                    <L7p:VariableToSet stringValue=\"cassandraStyle\"/>\n                </L7p:SetVariable>\n            </wsp:OneOrMore>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"web content\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"Configure the manager here\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:All>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <L7p:Encapsulated>\n                <L7p:EncapsulatedAssertionConfigGuid stringValue=\"47f768f4-b478-472b-a1ee-10f4b6e76f99\"/>\n                <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Require SSL (with Client Certificate)\"/>\n                <L7p:Parameters mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"apiPrefix\"/>\n                        <L7p:value stringValue=\"\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"requireClientCert\"/>\n                        <L7p:value stringValue=\"false\"/>\n                    </L7p:entry>\n                </L7p:Parameters>\n            </L7p:Encapsulated>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=\"/>\n                    <L7p:VariableToSet stringValue=\"content-type\"/>\n                </L7p:SetVariable>\n                <L7p:FalseAssertion/>\n            </wsp:All>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"require SSL\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"Override content-type with text/html\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:OneOrMore>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:Include>\n                    <L7p:PolicyGuid stringValue=\"3d18cfd8-631f-48f1-b154-c11b85df2fb9\"/>\n                    <L7p:PolicyName stringValue=\"oauth manager validate cookie\"/>\n                </L7p:Include>\n                <L7p:Include>\n                    <L7p:PolicyGuid stringValue=\"21da0471-733a-47d1-a8e0-07384a10cc58\"/>\n                    <L7p:PolicyName stringValue=\"oauth manager set valid user\"/>\n                </L7p:Include>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:Expression1 stringValue=\"${request.http.method}\"/>\n                        <L7p:Expression2 stringValue=\"GET\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:RightValue stringValue=\"GET\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${synchToken}\"/>\n                        <L7p:Expression2 stringValue=\"${request.http.parameter.synchToken}\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:RightValue stringValue=\"${request.http.parameter.synchToken}\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                </wsp:OneOrMore>\n            </wsp:All>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"\"/>\n                <L7p:VariableToSet stringValue=\"state\"/>\n            </L7p:SetVariable>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"session\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"check for a cookie\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:OneOrMore>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <L7p:ComparisonAssertion>\n                <L7p:Expression1 stringValue=\"${current.username}\"/>\n                <L7p:Expression2 stringValue=\"\"/>\n                <L7p:Operator operator=\"EMPTY\"/>\n                <L7p:Predicates predicates=\"included\">\n                    <L7p:item binary=\"included\">\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:RightValue stringValue=\"\"/>\n                    </L7p:item>\n                </L7p:Predicates>\n            </L7p:ComparisonAssertion>\n            <L7p:Include>\n                <L7p:PolicyGuid stringValue=\"fd9342d8-5086-4758-8fd3-caa2df094448\"/>\n                <L7p:PolicyName stringValue=\"OTK Apply Ratelimit Extension\"/>\n            </L7p:Include>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=\"/>\n                    <L7p:VariableToSet stringValue=\"content-type\"/>\n                </L7p:SetVariable>\n                <L7p:FalseAssertion/>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                            <L7p:value stringValue=\"overwrite content-type\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"// apply rate limit\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:OneOrMore>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lm1haW5wYXJ0fSR7cmVxdWVzdC51cmx9\"/>\n                    <L7p:VariableToSet stringValue=\"requestUrl\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"2be8eaf2-9b42-4173-ace9-3fdb471fb407\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"API XSS Protection\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"allinput\"/>\n                            <L7p:value stringValue=\"${request.mainpart}${request.url}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:Regex>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// Extra check for quotes/brackets\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:AutoTarget booleanValue=\"false\"/>\n                    <L7p:CaseInsensitive booleanValue=\"true\"/>\n                    <L7p:OtherTargetMessageVariable stringValue=\"request.url\"/>\n                    <L7p:ProceedIfPatternMatches booleanValue=\"false\"/>\n                    <L7p:Regex stringValue=\"(%22|[&quot;]|%29|\\(|%28|\\))\"/>\n                    <L7p:RegexName stringValue=\"Validate URL input\"/>\n                    <L7p:Replacement stringValue=\"\"/>\n                    <L7p:Target target=\"OTHER\"/>\n                </L7p:Regex>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=\"/>\n                    <L7p:VariableToSet stringValue=\"content-type\"/>\n                </L7p:SetVariable>\n                <L7p:FalseAssertion/>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                            <L7p:value stringValue=\"error\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"XSS Check\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"XSS Gatekeeper\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:OneOrMore>\n        <wsp:All wsp:Usage=\"Required\">\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9rZXl9\"/>\n                <L7p:VariableToSet stringValue=\"client_key\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9pZGVudH0=\"/>\n                <L7p:VariableToSet stringValue=\"client_ident_param\"/>\n            </L7p:SetVariable>\n            <L7p:Encapsulated>\n                <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                <L7p:Parameters mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"input\"/>\n                        <L7p:value stringValue=\"${client_ident_param}\"/>\n                    </L7p:entry>\n                </L7p:Parameters>\n            </L7p:Encapsulated>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                <L7p:VariableToSet stringValue=\"client_ident_escaped\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"JHtpbmNsdWRlX2pxdWVyeV9zY3JpcHR9DQoNCnZhciBmaXJzdFBhZ2VPZmZzZXQgPSAnMCcNCg0KLyoqDQogKg0KICogQHBhcmFtIGRlc3RpbmF0aW9uIHRhcmdldCBjb250YWluZXIgZm9yIGRpc3BsYXlpbmcgdGhlIHJlc3VsdA0KICogQHBhcmFtIHBTdGF0ZSB0aGUgc3RhdGUgZm9yIG9hdXRoIG1hbmFnZXINCiAqIEBwYXJhbSBwT2Zmc2V0IHF1ZXJ5IG9mZnNldA0KICogQHBhcmFtIHBGaWx0ZXJTdHJpbmcgZmlsdGVycyB0byBiZSB1c2VkIG9uIHNlYXJjaA0KICogQHBhcmFtIHBPZmZzZXRWYWx1ZSBvZmZzZXQgdmFsdWUgZm9yIG5leHQgcXVlcnkNCiAqLw0KICAgIGZ1bmN0aW9uIGxvYWRBamF4UGFnZShkZXN0aW5hdGlvbiwgcFN0YXRlLCBwT2Zmc2V0LCBwRmlsdGVyU3RyaW5nLCBwT2Zmc2V0VmFsdWUpIHsNCg0KICAgIC8qIE11c3QgcmVzZXQgc2Vzc2lvbiBzdG9yYWdlICovDQogICAgaWYgKHBTdGF0ZSAhPT0gImNsaWVudFBhZ2luYXRpb24iKSB7DQogICAgICAgIHNlc3Npb25TdG9yYWdlLnBhZ2UgPSAwDQogICAgICAgIHNlc3Npb25TdG9yYWdlLmZpcnN0Q2xpZW50SWRlbnRGb3JQYWdlcyA9ICJbXCJcIl0iDQogICAgIH0NCiAgICAgDQogICAgdmFyIHVybCA9ICcke3RoaXMuYXBwLnVybH0/c3RhdGU9JyArIHBTdGF0ZSArIChwRmlsdGVyU3RyaW5nID8gcEZpbHRlclN0cmluZyA6ICcnKSArICcmb2Zmc2V0PScgKyBwT2Zmc2V0ICsgJyZvZmZzZXRWYWx1ZT0nICsgcE9mZnNldFZhbHVlOw0KICAgICQuZ2V0KCB1cmwgKS5kb25lKA0KICAgICAgICBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgICAgaWYgKChkYXRhICE9PSBudWxsKSAmJiAoZGF0YS50b1N0cmluZygpLmxhc3RJbmRleE9mKCc8dGQ+JykgPiAwKSkNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZXN0aW5hdGlvbikuaW5uZXJIVE1MID0gZGF0YTsNCiAgICAgICAgfSk7DQp9DQoNCi8qIHRvZ2dsZSBkaXNhYmxlZCBjbGFzcyAqLw0KZnVuY3Rpb24gdG9nZ2xlRGlzYWJsZWQoY2xhc3NOYW1lLCBtYWtlRGlzYWJsZWQpIHsNCiAgICBpZiAodHlwZW9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIGNsYXNzTmFtZSk7DQogICAgICAgIGZvciAodmFyIGkgPSBlbGVtZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTsNCiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gbWFrZURpc2FibGVkID8gZWxlbWVudC5jbGFzc05hbWUgKyAnIGRpc2FibGVkJyA6IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoLyBkaXNhYmxlZC8sICcnKTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLyogZmlsdGVyaW5nIC8gcGFnaW5hdGlvbiAqLw0KdmFyIHJlc3VsdHNQZXJQYWdlID0gMTAwOw0KZnVuY3Rpb24gbG9hZE5leHRBamF4UGFnZShkZXN0aW5hdGlvbiwgc3RhdGUsIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMsIGZpbHRlclN0cmluZykgew0KICAgIHZhciBvZmZzZXQgPSBjdXJyZW50T2Zmc2V0ICsgcmVzdWx0c1BlclBhZ2U7DQogICAgbG9hZEFqYXhQYWdlKGRlc3RpbmF0aW9uLCBzdGF0ZSwgb2Zmc2V0LCBmaWx0ZXJTdHJpbmcsIG9mZnNldFZhbHVlKTsNCn0NCg0KZnVuY3Rpb24gbG9hZFByZXZBamF4UGFnZShkZXN0aW5hdGlvbiwgc3RhdGUsIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMsIGZpbHRlclN0cmluZykgew0KICAgIHZhciBvZmZzZXQgPSBOdW1iZXIoY3VycmVudE9mZnNldCkgLSBOdW1iZXIodG90YWxSZXN1bHRzKTsNCiAgICBsb2FkQWpheFBhZ2UoZGVzdGluYXRpb24sIHN0YXRlLCBvZmZzZXQsIGZpbHRlclN0cmluZywgb2Zmc2V0KTsNCn0NCg0KZnVuY3Rpb24gbG9hZE5leHRBamF4UGFnZUNhc3NhbmRyYShkZXN0aW5hdGlvbiwgc3RhdGUsIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMsIGZpbHRlclN0cmluZykgew0KICAgIHZhciBvZmZzZXQgPSBOdW1iZXIoY3VycmVudE9mZnNldCkgKyBOdW1iZXIodG90YWxSZXN1bHRzKTsNCiAgICBsb2FkQWpheFBhZ2UoZGVzdGluYXRpb24sIHN0YXRlLCBvZmZzZXQsIGZpbHRlclN0cmluZywgb2Zmc2V0VmFsdWUpOw0KfQ0KDQpmdW5jdGlvbiBsb2FkUHJldkFqYXhQYWdlQ2Fzc2FuZHJhKGRlc3RpbmF0aW9uLCBzdGF0ZSwgY3VycmVudE9mZnNldCwgb2Zmc2V0VmFsdWUsIHRvdGFsUmVzdWx0cywgZmlsdGVyU3RyaW5nKSB7DQogICAgaWYgKG9mZnNldFZhbHVlICE9PSAiIikgew0KICAgICAgdmFyIG9mZnNldCA9IGN1cnJlbnRPZmZzZXQgLSByZXN1bHRzUGVyUGFnZTsNCiAgICB9DQogICAgbG9hZEFqYXhQYWdlKGRlc3RpbmF0aW9uLCBzdGF0ZSwgb2Zmc2V0LCBmaWx0ZXJTdHJpbmcsIG9mZnNldFZhbHVlKTsNCn0NCg0KZnVuY3Rpb24gaXNQYWdpbmF0aW9uTGlua0VuYWJsZWQobGluaykgew0KICAgIHZhciBtaW5Sb3dWYWx1ZSA9IDA7DQogICAgdmFyIHJlc3VsdFRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RibFJlc3VsdCcpOw0KICAgIHZhciByZXN1bHRUYWJsZUxlbmd0aCA9IHBhcnNlSW50KHJlc3VsdFRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpLmxlbmd0aCwgMTApIC0gMSB8fCAwOw0KDQogICAgaWYgKHJlc3VsdFRhYmxlTGVuZ3RoID49IDEpIHsNCiAgICAgICAgbWluUm93VmFsdWUgPSBwYXJzZUludChyZXN1bHRUYWJsZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKVsxXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGQnKVswXS5pbm5lckhUTUwsIDEwKSB8fCAwOw0KICAgIH0NCiAgICB2YXIgY2xhc3NOYW1lID0gbGluay5jbGFzc05hbWUucmVwbGFjZSgnIGRpc2FibGVkJywgJycpOw0KICAgIHJldHVybiAoIChyZXN1bHRUYWJsZUxlbmd0aCA9PSAxMDApICYmIChjbGFzc05hbWUgPT0gJ25leHQtcGFnZS1saW5rJykgKSB8fCAoIChjbGFzc05hbWUgPT0gJ3ByZXYtcGFnZS1saW5rJykgJiYgbWluUm93VmFsdWUgPiAxMDAgKTsNCn0NCg0KLyogdG9nZ2xpbmcgYmxvY2tzIGFuZCBkcm9wZG93bnMgKi8NCmZ1bmN0aW9uIGFjdGl2YXRlVG9nZ2xlQmxvY2tzKCkgew0KICAgIGlmICh0eXBlb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCA9PSAnZnVuY3Rpb24nKSB7DQogICAgICAgIHZhciB0b2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZScpOw0KICAgICAgICBmb3IgKHZhciBpID0gdG9nZ2xlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgdmFyIHRvZ2dsZSA9IHRvZ2dsZXNbaV07DQogICAgICAgICAgICB2YXIgbGluayA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLWxpbmsnKVswXTsNCiAgICAgICAgICAgIGxpbmsudG9nZ2xlID0gdG9nZ2xlOw0KICAgICAgICAgICAgbGluay5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlID0gdGhpcy50b2dnbGU7DQogICAgICAgICAgICAgICAgaWYgKHRvZ2dsZS5jbGFzc05hbWUuc2VhcmNoKCdvcGVuJykgPiAtMSkgew0KICAgICAgICAgICAgICAgICAgICB0b2dnbGUuY2xhc3NOYW1lID0gdG9nZ2xlLmNsYXNzTmFtZS5yZXBsYWNlKC8gb3Blbi8sICcnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRvZ2dsZS5jbGFzc05hbWUgKz0gJyBvcGVuJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQp9DQoNCi8qIHBhZ2luYXRpb24gb24gY2xpZW50IGtleXMgKi8NCmZ1bmN0aW9uIGxvYWROZXh0Q2xpZW50S2V5UGFnZShsaW5rLCBkZXN0aW5hdGlvbiwgY3VycmVudE9mZnNldCwgb2Zmc2V0VmFsdWUsIHRvdGFsUmVzdWx0cykgew0KICAgIGlmICghaXNOYU4ob2Zmc2V0VmFsdWUpICYmIGlzUGFnaW5hdGlvbkxpbmtFbmFibGVkKGxpbmspKSBsb2FkTmV4dEFqYXhQYWdlKGRlc3RpbmF0aW9uLCAnY2xpZW50S2V5c1BhZ2luYXRpb24nLCBjdXJyZW50T2Zmc2V0LCBvZmZzZXRWYWx1ZSwgdG90YWxSZXN1bHRzLCBidWlsZENsaWVudEtleUZpbHRlclN0cmluZygpKTsNCn0NCg0KZnVuY3Rpb24gbG9hZFByZXZDbGllbnRLZXlQYWdlKGxpbmssIGRlc3RpbmF0aW9uLCBjdXJyZW50T2Zmc2V0LCBvZmZzZXRWYWx1ZSwgdG90YWxSZXN1bHRzKSB7DQogICAgaWYgKCFpc05hTihvZmZzZXRWYWx1ZSkgJiYgaXNQYWdpbmF0aW9uTGlua0VuYWJsZWQobGluaykpIGxvYWRQcmV2QWpheFBhZ2UoZGVzdGluYXRpb24sICdjbGllbnRLZXlzUGFnaW5hdGlvbicsIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMsIGJ1aWxkQ2xpZW50S2V5RmlsdGVyU3RyaW5nKCkpOw0KfQ0KDQovKiBDYXNzYW5kcmEgcGFnaW5hdGlvbiBvbiBjbGllbnQga2V5cyAqLw0KZnVuY3Rpb24gbG9hZE5leHRDbGllbnRLZXlQYWdlQ2Fzc2FuZHJhKGxpbmssIGRlc3RpbmF0aW9uLCBjdXJyZW50T2Zmc2V0LCBvZmZzZXRWYWx1ZSwgdG90YWxSZXN1bHRzKSB7DQogICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTsgLy8gUHJldmVudCByYXBpZC1maXJlIGNsaWNrcyBmcm9tIGJyZWFraW5nIHRoZSBwYWdpbmcgc2F2ZXMNCg0KICAgIC8vIEdldCByaWQgb2YgYWxsIHBhZ2luYXRpb24gb25jbGljayBldmVudHMganVzdCBpbiBjYXNlDQogICAgcHJldkJ1dHRvbnMgPSAkKCcucHJldi1wYWdlLWxpbmsnKQ0KICAgIHZhciBwcmV2QnV0dG9uT25DbGljayA9IHByZXZCdXR0b25zWzBdLmdldEF0dHJpYnV0ZSgib25jbGljayIpOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldkJ1dHRvbnMubGVuZ3RoOyBpKyspIHsgcHJldkJ1dHRvbnNbaV0ucmVtb3ZlQXR0cmlidXRlKCJvbmNsaWNrIik7IH0NCiAgICBuZXh0QnV0dG9ucyA9ICQoJy5uZXh0LXBhZ2UtbGluaycpDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXh0QnV0dG9ucy5sZW5ndGg7IGkrKykgeyBuZXh0QnV0dG9uc1tpXS5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTsgfQ0KICAgIA0KICAgIGlmICh0b3RhbFJlc3VsdHMgIT09IHJlc3VsdHNQZXJQYWdlKSB7DQogICAgICAvLyBTZXQgYmFjayBwcmV2IGJ1dHRvbiBpZiB0aGlzIGlzIHRoZSBsYXN0IHBhZ2UuDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByZXZCdXR0b25zLmxlbmd0aDsgaSsrKSB7IHByZXZCdXR0b25zW2ldLnNldEF0dHJpYnV0ZSgib25jbGljayIsIHByZXZCdXR0b25PbkNsaWNrKTsgfQ0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGlmICh0eXBlb2Yoc2Vzc2lvblN0b3JhZ2UuZmlyc3RDbGllbnRJZGVudEZvclBhZ2VzKSA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgIHZhciBmaXJzdFZhbHVlcyA9IFsiIl07DQogICAgICBzZXNzaW9uU3RvcmFnZS5maXJzdENsaWVudElkZW50Rm9yUGFnZXMgPSBKU09OLnN0cmluZ2lmeShmaXJzdFZhbHVlcyk7DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciBmaXJzdFZhbHVlcyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZmlyc3RDbGllbnRJZGVudEZvclBhZ2VzKTsNCiAgICB9DQoNCiAgICBpZiAodHlwZW9mKHNlc3Npb25TdG9yYWdlLnBhZ2UpID09PSAndW5kZWZpbmVkJykgeyBzZXNzaW9uU3RvcmFnZS5wYWdlID0gMTsgfQ0KICAgIGVsc2UgeyBzZXNzaW9uU3RvcmFnZS5wYWdlID0gTnVtYmVyKHNlc3Npb25TdG9yYWdlLnBhZ2UpICsgMTsgfQ0KICAgIA0KICAgIGlmICh0eXBlb2YoZmlyc3RWYWx1ZXNbTnVtYmVyKHNlc3Npb25TdG9yYWdlLnBhZ2UpXSkgPT09ICd1bmRlZmluZWQnKSB7DQogICAgICBmaXJzdFZhbHVlcy5wdXNoKG9mZnNldFZhbHVlKTsNCiAgICAgIHNlc3Npb25TdG9yYWdlLmZpcnN0Q2xpZW50SWRlbnRGb3JQYWdlcyA9IEpTT04uc3RyaW5naWZ5KGZpcnN0VmFsdWVzKTsNCiAgICB9DQoNCiAgICBpZiAoaXNQYWdpbmF0aW9uTGlua0VuYWJsZWQobGluaykpIGxvYWROZXh0QWpheFBhZ2VDYXNzYW5kcmEoZGVzdGluYXRpb24sICdjbGllbnRLZXlzUGFnaW5hdGlvbicsIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMsIGJ1aWxkQ2xpZW50S2V5RmlsdGVyU3RyaW5nKCkpOw0KDQogICAgLy8gRWRnZWNhc2UgOiBpZiB0aGlzIGlzIHRoZSBsYXN0IHBhZ2UgYW5kIHJlc3VsdHMgaXMgZGl2aXNpYmxlIGJ5IHJlc3VsdHNQZXJQYWdlLCB3ZSBoYXZlIHRvIHNldCBiYWNrIHRvIHByZXZpb3VzIGJ1dHRvbiBjbGljaw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldkJ1dHRvbnMubGVuZ3RoOyBpKyspIHsgcHJldkJ1dHRvbnNbaV0uc2V0QXR0cmlidXRlKCJvbmNsaWNrIiwgcHJldkJ1dHRvbk9uQ2xpY2spOyB9DQp9DQoNCmZ1bmN0aW9uIGxvYWRQcmV2Q2xpZW50S2V5UGFnZUNhc3NhbmRyYShsaW5rLCBkZXN0aW5hdGlvbiwgY3VycmVudE9mZnNldCwgb2Zmc2V0VmFsdWUsIHRvdGFsUmVzdWx0cykgew0KDQogICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTsgLy8gUHJldmVudCByYXBpZC1maXJlIGNsaWNrcyBmcm9tIGJyZWFraW5nIHRoZSBwYWdpbmcgc2F2ZXMNCg0KICAgIC8vIEdldCByaWQgb2YgYWxsIHBhZ2luYXRpb24gb25jbGljayBldmVudHMganVzdCBpbiBjYXNlDQogICAgbmV4dEJ1dHRvbnMgPSAkKCcubmV4dC1wYWdlLWxpbmsnKQ0KICAgIHZhciBuZXh0QnV0dG9uT25DbGljayA9IG5leHRCdXR0b25zWzBdLmdldEF0dHJpYnV0ZSgib25jbGljayIpOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV4dEJ1dHRvbnMubGVuZ3RoOyBpKyspIHsgbmV4dEJ1dHRvbnNbaV0ucmVtb3ZlQXR0cmlidXRlKCJvbmNsaWNrIik7IH0NCiAgICBwcmV2QnV0dG9ucyA9ICQoJy5wcmV2LXBhZ2UtbGluaycpDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmV2QnV0dG9ucy5sZW5ndGg7IGkrKykgeyBwcmV2QnV0dG9uc1tpXS5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTsgfQ0KICAgIA0KICAgIGlmIChTdHJpbmcoY3VycmVudE9mZnNldCkgPT09IGZpcnN0UGFnZU9mZnNldCkgew0KICAgICAgIC8vIFNldCBiYWNrIG5leHQgYnV0dG9uIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHBhZ2UuDQogICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXh0QnV0dG9ucy5sZW5ndGg7IGkrKykgeyBuZXh0QnV0dG9uc1tpXS5zZXRBdHRyaWJ1dGUoIm9uY2xpY2siLCBuZXh0QnV0dG9uT25DbGljayk7IH0NCiAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy8gRXhjZXB0aW9uYWwgZWRnZS1jYXNlIHdoZXJlIHJlc3VsdHNQZXJQYWdlIGlzIGEgZmFjdG9yIG9mIHRoZSBhYnNvbHV0ZSB0b3RhbCBudW1iZXIgb2YgY2xpZW50cw0KICAgIC8vIER1ZSB0byBDYXNzYW5kcmFzIGluYWJpbGl0eSB0byB0ZWxsIGlmIHRoZSBuZXh0IHJlc3VsdCBzZXQgd2lsbCBiZSBlbXB0eQ0KICAgIC8vIENoZWNrIGlmIHNlZSBpZiB0aGUgbmV4dCBidXR0b25zIGhhdmUgYWxyZWFkeSBiZWVuIGRpc2FibGVkIHdoaWNoIG1lYW5zIGFuIGVtcHR5IHJlc3VsdCBzZXQgd2FzIHJldHVybmVkDQogICAgLy8gVGhhdCBtZWFucyB0aGF0IHRoZSBjdXJyZW50IHBhZ2UgbnVtYmVyIGlzIDEgaGlnaGVyIHRoYW4gaXQgc2hvdWxkIGJlLCBzbyBzdWJ0cmFjdCAxIGZyb20gaXQNCiAgICBpZiAodG90YWxSZXN1bHRzID09PSByZXN1bHRzUGVyUGFnZSAmJiBuZXh0QnV0dG9uT25DbGljayA9PT0gbnVsbCkgew0KICAgICAgc2Vzc2lvblN0b3JhZ2UucGFnZSA9IE51bWJlcihzZXNzaW9uU3RvcmFnZS5wYWdlKSAtIDE7DQogICAgfQ0KICAgIA0KICAgIHNlc3Npb25TdG9yYWdlLnBhZ2UgPSBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UucGFnZSkgLSAxOw0KICAgIHZhciBvZmZzZXRzID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5maXJzdENsaWVudElkZW50Rm9yUGFnZXMpOw0KICAgIG9mZnNldFZhbHVlID0gb2Zmc2V0c1tOdW1iZXIoc2Vzc2lvblN0b3JhZ2UucGFnZSldOyAgICANCiAgICBpZiAoaXNQYWdpbmF0aW9uTGlua0VuYWJsZWQobGluaykpIGxvYWRQcmV2QWpheFBhZ2VDYXNzYW5kcmEoZGVzdGluYXRpb24sICdjbGllbnRLZXlzUGFnaW5hdGlvbicsIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMsIGJ1aWxkQ2xpZW50S2V5RmlsdGVyU3RyaW5nKCkpOw0KfQ0KDQovKiBhY3Rpb24gY29uZmlybWF0aW9uICovDQpmdW5jdGlvbiBjb25maXJtRGVsZXRlKGRlbENsaWVudCkgew0KICAgIHJldHVybiBjb25maXJtKCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSBjbGllbnQgYXBwbGljYXRpb24gJyIgKyBkZWxDbGllbnQgKyAiJz8gVGhpcyB3aWxsIGluY2x1ZGUgYWxsIGdyYW50ZWQgY2xpZW50cyB0aGF0IGFyZSBpbiB1c2UhIik7DQp9DQoNCmZ1bmN0aW9uIGNvbmZpcm1FeHBvcnQoY2xpZW50S2V5KSB7DQogICAgcmV0dXJuIGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBleHBvcnQgY2xpZW50X2tleSAnIiArIGNsaWVudEtleSArICInPyIpOw0KfQ0KDQpmdW5jdGlvbiBidWlsZENsaWVudEZpbHRlclN0cmluZygpIHsNCiAgICB2YXIgbG9va3VwVXNlciA9IGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyUmVnaXN0ZXJlZEJ5JykudmFsdWUpOw0KICAgIHZhciBjbGllbnQgPSBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlckNsaWVudE5hbWUnKS52YWx1ZSk7DQogICAgdmFyIG9yZ2FuaXphdGlvbiA9IGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyT3JnYW5pemF0aW9uJykudmFsdWUpOw0KICAgIHJldHVybiAnJmxvb2t1cFVzZXI9JyArIGxvb2t1cFVzZXIgKyAnJmZpbHRlckNsaWVudE5hbWU9JyArIGNsaWVudCArICcmZmlsdGVyT3JnYW5pemF0aW9uPScgKyBvcmdhbml6YXRpb24gKyAnJnN5bmNoVG9rZW49JHtzeW5jaFRva2VufSc7DQp9DQoNCmZ1bmN0aW9uIHNlYXJjaENsaWVudHMoZGVzdGluYXRpb24pIHsNCiAgICBsb2FkQWpheFBhZ2UoZGVzdGluYXRpb24sICdtYW5hZ2VDbGllbnRzRmlsdGVyJywgMCwgYnVpbGRDbGllbnRGaWx0ZXJTdHJpbmcoKSwgMCk7DQp9DQoNCmZ1bmN0aW9uIHNlYXJjaENsaWVudEtleXMoZGVzdGluYXRpb24pIHsNCiAgICAvLyBGb3IgQ2Fzc2FuZHJhLCBuZWVkIHRvIHJlc2V0IHBhZ2luZyBzZXNzaW9uIGRhdGEgaGVyZQ0KICAgIHNlc3Npb25TdG9yYWdlLnBhZ2UgPSAwDQogICAgc2Vzc2lvblN0b3JhZ2UuZmlyc3RDbGllbnRJZGVudEZvclBhZ2VzID0gIltcIlwiXSINCiAgICBsb2FkQWpheFBhZ2UoZGVzdGluYXRpb24sICdjbGllbnRLZXlzUGFnaW5hdGlvbicsIDAsIGJ1aWxkQ2xpZW50S2V5RmlsdGVyU3RyaW5nKCksIDApOw0KfQ0KDQpmdW5jdGlvbiBidWlsZENsaWVudEtleUZpbHRlclN0cmluZygpIHsNCiAgICB2YXIgZmlsdGVyQ3JlYXRlZEJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXJDcmVhdGVkQnknKS52YWx1ZSk7DQogICAgdmFyIGZpbHRlckVudmlyb25tZW50ID0gZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXJFbnZpcm9ubWVudCcpLnZhbHVlKTsNCiAgICB2YXIgZmlsdGVyQ2xpZW50SWQgPSBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlckNsaWVudElkJykudmFsdWUpOw0KICAgIHZhciBmaWx0ZXJTdGF0dXMgPSBlbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlclN0YXR1cycpLnZhbHVlKTsNCiAgICByZXR1cm4gJyZjbGllbnRfaWRlbnQ9JHtjbGllbnRfaWRlbnRfZXNjYXBlZH0mbG9va3VwVXNlcj0nICsgZmlsdGVyQ3JlYXRlZEJ5ICsgJyZmaWx0ZXJFbnZpcm9ubWVudD0nICsgZmlsdGVyRW52aXJvbm1lbnQgKyAnJmZpbHRlckNsaWVudElkPScgKyBmaWx0ZXJDbGllbnRJZCArICcmZmlsdGVyU3RhdHVzPScgKyBmaWx0ZXJTdGF0dXMgKyAnJnN5bmNoVG9rZW49JHtzeW5jaFRva2VufSc7DQp9DQoNCmZ1bmN0aW9uIGNvbmZpcm1SZXZva2VLZXkocmV2b2tlS2V5LCByZXZva2VTZWNyZXQpIHsNCiAgICBpZiAocmV2b2tlS2V5ID09PSByZXZva2VTZWNyZXQpIHsNCiAgICAgICAgcmV0dXJuIGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlIGNsaWVudF9rZXkgJyIgKyByZXZva2VLZXkgKyAiJz8gVGhpcyBrZXkgaXMgYSBtYXN0ZXIga2V5IGFuZCBvbmNlIHJlbW92ZWQgYWxsIGFjY2VzcyB0b2tlbnMgZ3JhbnRlZCB3aXRoIGl0IHdpbGwgYmVjb21lIGludmFsaWQuIik7DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZXZva2UgdGhlIGNsaWVudF9rZXkgJyIgKyByZXZva2VLZXkgKyAiJz8gVGhpcyB3aWxsIGFsc28gcmV2b2tlIGFsbCBvZiBpdHMgYWNjZXNzIHRva2Vucy4iKTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGNvbmZpcm1EaXNhYmxlVG9rZW5zKGNsaWVudEtleSkgew0KICAgIHJldHVybiBjb25maXJtKCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGlzYWJsZSBhbGwgYWNjZXNzIHRva2VucyBmb3IgdGhlIGNsaWVudF9rZXkgJyIgKyBjbGllbnRLZXkgKyAiJz8iKTsNCn0NCg0KIC8qIGZvcm0gdmFsaWRhdGlvbiAqLw0KIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybVJlZ2lzdGVyKCkgew0KICAgICB2YXIgYWxlcnRNZXNzYWdlID0gJyc7DQogICAgIHZhciBjbGllbnROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5hbWUiKS52YWx1ZTsNCiAgICAgdmFyIGNsaWVudEtFWSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjbGllbnRfa2V5IikudmFsdWU7DQogICAgIHZhciBjbGllbnRTZWNyZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VjcmV0IikudmFsdWU7DQogICAgIHZhciBtYXN0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFzdGVyIikuY2hlY2tlZDsNCiAgICAgdmFyIGNsaWVudE9yZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvcmciKS52YWx1ZTsNCiAgICAgdmFyIHJlZ2lzdGVyZWRCWSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZWdpc3RlcmVkX2J5IikudmFsdWU7DQogICAgIHZhciBhdXRoTWV0aG9kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImF1dGhfbWV0aG9kIikudmFsdWU7DQogICAgIHZhciBqd2tzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImp3a3MiKS52YWx1ZTsNCgkgdmFyIHBraV92YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwa2lfdmFsdWUiKS52YWx1ZTsNCiAgDQogICAgIGlmIChjbGllbnROYW1lID09IG51bGwgfHwgY2xpZW50TmFtZS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgYWxlcnRNZXNzYWdlID0gJ1BsZWFzZSBwcm92aWRlIGEgQ2xpZW50IE5hbWVcbic7DQogICAgIH0NCiAgICAgaWYgKGNsaWVudEtFWSA9PSBudWxsIHx8IGNsaWVudEtFWS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ1BsZWFzZSBwcm92aWRlIGEgQ2xpZW50IEtleVxuJzsNCiAgICAgfQ0KICAgICBpZiAoY2xpZW50U2VjcmV0ID09IG51bGwgfHwgY2xpZW50U2VjcmV0LnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICBhbGVydE1lc3NhZ2UgPSBhbGVydE1lc3NhZ2UgKyAnUGxlYXNlIHByb3ZpZGUgYSBDbGllbnQgU2VjcmV0XG4nOw0KICAgICB9DQogICAgIGlmIChjbGllbnRPcmcgPT0gbnVsbCB8fCBjbGllbnRPcmcucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAiIikubGVuZ3RoID09IDApIHsNCiAgICAgICAgIGFsZXJ0TWVzc2FnZSA9IGFsZXJ0TWVzc2FnZSArICdQbGVhc2UgcHJvdmlkZSBhbiBPcmdhbml6YXRpb25cbic7DQogICAgIH0NCiAgICAgaWYgKHJlZ2lzdGVyZWRCWSA9PSBudWxsIHx8IHJlZ2lzdGVyZWRCWS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ1BsZWFzZSBwcm92aWRlIGEgbmFtZSBvZiB3aG9tIGlzIHJlZ2lzdGVyaW5nIHRoaXMgY2xpZW50XG4nOw0KICAgICB9DQogICAgIGlmICgobWFzdGVyID09IGZhbHNlKSAmJiAoY2xpZW50S0VZID09IGNsaWVudFNlY3JldCkpIHsNCiAgICAgICAgIGFsZXJ0TWVzc2FnZSA9IGFsZXJ0TWVzc2FnZSArICdDbGllbnRfa2V5IGFuZCBzZWNyZXQgY2Fubm90IGJlIHRoZSBzYW1lLic7DQogICAgIH0NCiAgICAgaWYgKGF1dGhNZXRob2QgPT0gInByaXZhdGVfa2V5X2p3dCIgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoImp3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9uIilbMF0uY2hlY2tlZCAmJiBpc0pzb24oandrcykgPT0gZmFsc2Upew0KICAgICAgIGFsZXJ0TWVzc2FnZSA9IGFsZXJ0TWVzc2FnZSArICdKV0tzIG11c3QgYmUgdmFsaWQgSlNPTi4nOw0KICAgICB9DQogICAgICBpZiAoYXV0aE1ldGhvZCA9PSAic2VsZl9zaWduZWRfdGxzX2NsaWVudF9hdXRoIiAmJiBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiandrc19vcl9qd2tzX3VyaV9yYWRpb19idXR0b24iKVswXS5jaGVja2VkICYmIGlzSnNvbihqd2tzKSA9PSBmYWxzZSkgew0KICAgICAgIGFsZXJ0TWVzc2FnZSA9IGFsZXJ0TWVzc2FnZSArICdKV0tzIG11c3QgYmUgdmFsaWQgSlNPTi4nOw0KICAgICB9DQoJIGlmIChhdXRoTWV0aG9kID09ICJ0bHNfY2xpZW50X2F1dGgiICYmIHBraV92YWx1ZS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5sZW5ndGggPT0gMCl7DQogICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ1BsZWFzZSBwcm92aWRlIGEgUEtJIFZhbHVlXG4nOw0KICAgICB9DQogIA0KICAgICBpZiAoYWxlcnRNZXNzYWdlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgIGFsZXJ0KGFsZXJ0TWVzc2FnZSk7DQogICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgIH0NCiAgICAgZWxzZQ0KICAgICAgICAgcmV0dXJuIHRydWU7DQogfQ0KDQogZnVuY3Rpb24gdmFsaWRhdGVGb3JtQWRkS2V5KCkgew0KICAgICB2YXIgYWxlcnRNZXNzYWdlID0gJyc7DQogICAgIHZhciBjbGllbnRLRVkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2xpZW50X2tleSIpLnZhbHVlOw0KICAgICB2YXIgY2xpZW50U2VjcmV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlY3JldCIpLnZhbHVlOw0KICAgICB2YXIgcmVnaXN0ZXJlZEJZID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlZ2lzdGVyZWRfYnkiKS52YWx1ZTsNCiAgICAgdmFyIG1hc3RlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXN0ZXIiKS5jaGVja2VkOw0KICAgICB2YXIgYXV0aE1ldGhvZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdXRoX21ldGhvZCIpLnZhbHVlOw0KICAgICB2YXIgandrcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqd2tzIikudmFsdWU7DQoJIHZhciBwa2lfdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGtpX3ZhbHVlIikudmFsdWU7DQoNCiAgICAgaWYgKGNsaWVudEtFWSA9PSBudWxsIHx8IGNsaWVudEtFWS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ1BsZWFzZSBwcm92aWRlIGEgQ2xpZW50IEtleVxuJzsNCiAgICAgfQ0KICAgICBpZiAoY2xpZW50U2VjcmV0ID09IG51bGwgfHwgY2xpZW50U2VjcmV0LnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICBhbGVydE1lc3NhZ2UgPSBhbGVydE1lc3NhZ2UgKyAnUGxlYXNlIHByb3ZpZGUgYSBDbGllbnQgU2VjcmV0XG4nOw0KICAgICB9DQoNCiAgICAgaWYgKHJlZ2lzdGVyZWRCWSA9PSBudWxsIHx8IHJlZ2lzdGVyZWRCWS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ1BsZWFzZSBwcm92aWRlIGEgbmFtZSBvZiB3aG9tIGlzIHJlZ2lzdGVyaW5nIHRoaXMgY2xpZW50XG4nOw0KICAgICB9DQogICAgIGlmICgobWFzdGVyID09IGZhbHNlKSAmJiAoY2xpZW50S0VZID09IGNsaWVudFNlY3JldCkpIHsNCiAgICAgICAgIGFsZXJ0TWVzc2FnZSA9IGFsZXJ0TWVzc2FnZSArICdDbGllbnRfa2V5IGFuZCBzZWNyZXQgY2Fubm90IGJlIHRoZSBzYW1lLic7DQogICAgIH0NCiAgICAgaWYgKGFsZXJ0TWVzc2FnZS5sZW5ndGggPiAwKSB7DQogICAgICAgICBhbGVydChhbGVydE1lc3NhZ2UpOw0KICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICB9DQogICAgIGlmIChhdXRoTWV0aG9kID09ICJwcml2YXRlX2tleV9qd3QiICYmIGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCJqd2tzX29yX2p3a3NfdXJpX3JhZGlvX2J1dHRvbiIpWzBdLmNoZWNrZWQgJiYgaXNKc29uKGp3a3MpID09IGZhbHNlKXsNCiAgICAgICBhbGVydE1lc3NhZ2UgPSBhbGVydE1lc3NhZ2UgKyAnSldLcyBtdXN0IGJlIHZhbGlkIEpTT04uJzsNCiAgICAgfQ0KCSBpZiAoYXV0aE1ldGhvZCA9PSAic2VsZl9zaWduZWRfdGxzX2NsaWVudF9hdXRoIiAmJiBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiandrc19vcl9qd2tzX3VyaV9yYWRpb19idXR0b24iKVswXS5jaGVja2VkICYmIGlzSnNvbihqd2tzKSA9PSBmYWxzZSl7DQogICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ0pXS3MgbXVzdCBiZSB2YWxpZCBKU09OLic7DQogICAgIH0NCgkgaWYgKGF1dGhNZXRob2QgPT0gInRsc19jbGllbnRfYXV0aCIgJiYgcGtpX3ZhbHVlLnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpLmxlbmd0aCA9PSAwKXsNCiAgICAgICBhbGVydE1lc3NhZ2UgPSBhbGVydE1lc3NhZ2UgKyAnUGxlYXNlIHByb3ZpZGUgYSBQS0kgVmFsdWVcbic7DQogICAgIH0NCg0KICAgICBpZiAoYWxlcnRNZXNzYWdlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgIGFsZXJ0KGFsZXJ0TWVzc2FnZSk7DQogICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgIH0NCiAgICAgZWxzZQ0KICAgICAgICAgcmV0dXJuIHRydWU7DQogfQ0KDQpmdW5jdGlvbiB2YWxpZGF0ZUZvcm1FZGl0S2V5KCkgew0KICAgIHZhciBhbGVydE1lc3NhZ2UgPSAnJzsNCiAgICB2YXIgY2xpZW50S0VZID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNsaWVudF9rZXkiKS52YWx1ZTsNCiAgICB2YXIgY2xpZW50U2VjcmV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNlY3JldCIpLnZhbHVlOw0KICAgIHZhciBtYXN0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFzdGVyIikuY2hlY2tlZDsNCiAgICBpZiAoY2xpZW50U2VjcmV0ID09IG51bGwgfHwgY2xpZW50U2VjcmV0LnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpLmxlbmd0aCA9PSAwKSB7DQogICAgICAgIGFsZXJ0TWVzc2FnZSA9IGFsZXJ0TWVzc2FnZSArICdQbGVhc2UgcHJvdmlkZSBhIGNsaWVudF9rZXkgU2VjcmV0XG4nOw0KICAgIH0gDQogICAgZWxzZSBpZiAoIWlzVmFsaWRKc29uKGNsaWVudFNlY3JldCkpIHsNCiAgICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ1BsZWFzZSBwcm92aWRlIGEgdmFsaWQgSnNvbiBmb3IgY2xpZW50X2tleSBzZWNyZXRcbic7DQogICAgfQ0KICAgIA0KICAgIGlmICgobWFzdGVyID09IGZhbHNlKSAmJiAoY2xpZW50S0VZID09IGNsaWVudFNlY3JldCkpIHsNCiAgICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ0NsaWVudF9rZXkgYW5kIHNlY3JldCBjYW5ub3QgYmUgdGhlIHNhbWUuJzsNCiAgICB9DQogICAgaWYgKGFsZXJ0TWVzc2FnZS5sZW5ndGggPiAwKSB7DQogICAgICAgIGFsZXJ0KGFsZXJ0TWVzc2FnZSk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQogICAgZWxzZQ0KICAgICAgICByZXR1cm4gY29uZmlybSgiRG8geW91IHJlYWxseSB3YW50IHRvIHVwZGF0ZSB0aGUgY2xpZW50X2tleSAnJHtjbGllbnRfa2V5fSc/Iik7DQp9DQoNCmZ1bmN0aW9uIGlzSnNvbihpdGVtKXsNCiAgIGl0ZW0gPSB0eXBlb2YgaXRlbSAhPT0gInN0cmluZyIgPyBKU09OLnN0cmluZ2lmeShpdGVtKSA6IGl0ZW07DQoNCiAgICB0cnkgew0KICAgICAgICBpdGVtID0gSlNPTi5wYXJzZShpdGVtKTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQogICAgaWYgKHR5cGVvZiBpdGVtID09PSAib2JqZWN0IiAmJiBpdGVtICE9PSBudWxsKXsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIA0KICAgIHJldHVybiBmYWxzZTsNCiAgIA0KfQ0KDQovLyBTaW5jZSBzZWNyZXQgY2FuIGJlIFVVSUQsIFVSTCBvciBKU09OLCB0aGUgZm9sbG93aW5nIGlzIG5vdCBmb29sIHByb29mDQovLyBWYWxpZGF0ZSBhcyBqc29uIGlmIGN1cmx5IGJyYWNlcyBhcmUgZm91bmQuIA0KZnVuY3Rpb24gaXNWYWxpZEpzb24oc2VjcmV0KSB7DQogICAgdmFyIGlzU3RhcnRKc29uUmVnZXggPSBuZXcgUmVnRXhwKCdeeycpOw0KICAgIHZhciBpc0VuZEpzb25SZWdleCA9IG5ldyBSZWdFeHAoJ30kJyk7DQogICAgaWYgKGlzU3RhcnRKc29uUmVnZXgudGVzdChzZWNyZXQpKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICAkLnBhcnNlSlNPTihzZWNyZXQpOw0KICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBlbHNlIGlmIChpc0VuZEpzb25SZWdleC50ZXN0KHNlY3JldCkpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICQucGFyc2VKU09OKHNlY3JldCk7DQogICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCg0KDQpmdW5jdGlvbiB0b2dnbGVNYXN0ZXIoKSB7DQogICAgdmFyIG1hc3RlcjsNCiAgICBtYXN0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFzdGVyIikuY2hlY2tlZDsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VjcmV0IikucmVhZE9ubHkgPSBtYXN0ZXI7DQogICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZWNyZXQiKS5yZWFkT25seSA9PSB0cnVlKSB7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZWNyZXQiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAibGlnaHRncmV5IjsNCiAgICB9IGVsc2Ugew0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VjcmV0Iikuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIndoaXRlIjsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIHVybERlY29kZShpZCkgew0KICAgIGlmKGlkICE9IG51bGwgJiYgaWQuc3RhcnRzV2l0aCgnY3VzdG9tX3ZhbHVlJykpIHsNCiAgICAgICAgdmFyIGZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICBmaWVsZC5pbm5lclRleHQgPSBkZWNvZGVVUklDb21wb25lbnQoZmllbGQuaW5uZXJUZXh0KTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGxvYWRQcmV2Q2xpZW50UGFnZUNhc3NhbmRyYShsaW5rLCBkZXN0aW5hdGlvbiwgY3VycmVudE9mZnNldCwgb2Zmc2V0VmFsdWUsIHRvdGFsUmVzdWx0cykgew0KICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCJvbmNsaWNrIik7IC8vIFByZXZlbnQgcmFwaWQtZmlyZSBjbGlja3MgZnJvbSBicmVha2luZyB0aGUgcGFnaW5nIHNhdmVzDQoNCiAgICAvLyBHZXQgcmlkIG9mIGFsbCBwYWdpbmF0aW9uIG9uY2xpY2sgZXZlbnRzIGp1c3QgaW4gY2FzZQ0KICAgIG5leHRCdXR0b25zID0gJCgnLm5leHQtcGFnZS1saW5rJykNCiAgICB2YXIgbmV4dEJ1dHRvbk9uQ2xpY2sgPSBuZXh0QnV0dG9uc1swXS5nZXRBdHRyaWJ1dGUoIm9uY2xpY2siKTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5leHRCdXR0b25zLmxlbmd0aDsgaSsrKSB7IG5leHRCdXR0b25zW2ldLnJlbW92ZUF0dHJpYnV0ZSgib25jbGljayIpOyB9DQogICAgcHJldkJ1dHRvbnMgPSAkKCcucHJldi1wYWdlLWxpbmsnKQ0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldkJ1dHRvbnMubGVuZ3RoOyBpKyspIHsgcHJldkJ1dHRvbnNbaV0ucmVtb3ZlQXR0cmlidXRlKCJvbmNsaWNrIik7IH0NCiAgICANCiAgICBpZiAoU3RyaW5nKGN1cnJlbnRPZmZzZXQpID09PSBmaXJzdFBhZ2VPZmZzZXQpIHsNCiAgICAgICAvLyBTZXQgYmFjayBuZXh0IGJ1dHRvbiBpZiB0aGlzIGlzIHRoZSBmaXJzdCBwYWdlLg0KICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV4dEJ1dHRvbnMubGVuZ3RoOyBpKyspIHsgbmV4dEJ1dHRvbnNbaV0uc2V0QXR0cmlidXRlKCJvbmNsaWNrIiwgbmV4dEJ1dHRvbk9uQ2xpY2spOyB9DQogICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIC8vIEV4Y2VwdGlvbmFsIGVkZ2UtY2FzZSB3aGVyZSByZXN1bHRzUGVyUGFnZSBpcyBhIGZhY3RvciBvZiB0aGUgYWJzb2x1dGUgdG90YWwgbnVtYmVyIG9mIGNsaWVudHMNCiAgICAvLyBEdWUgdG8gQ2Fzc2FuZHJhcyBpbmFiaWxpdHkgdG8gdGVsbCBpZiB0aGUgbmV4dCByZXN1bHQgc2V0IHdpbGwgYmUgZW1wdHkNCiAgICAvLyBDaGVjayBpZiBzZWUgaWYgdGhlIG5leHQgYnV0dG9ucyBoYXZlIGFscmVhZHkgYmVlbiBkaXNhYmxlZCB3aGljaCBtZWFucyBhbiBlbXB0eSByZXN1bHQgc2V0IHdhcyByZXR1cm5lZA0KICAgIC8vIFRoYXQgbWVhbnMgdGhhdCB0aGUgY3VycmVudCBwYWdlIG51bWJlciBpcyAxIGhpZ2hlciB0aGFuIGl0IHNob3VsZCBiZSwgc28gc3VidHJhY3QgMSBmcm9tIGl0DQogICAgaWYgKHRvdGFsUmVzdWx0cyA9PT0gcmVzdWx0c1BlclBhZ2UgJiYgbmV4dEJ1dHRvbk9uQ2xpY2sgPT09IG51bGwpIHsNCiAgICAgIHNlc3Npb25TdG9yYWdlLnBhZ2UgPSBOdW1iZXIoc2Vzc2lvblN0b3JhZ2UucGFnZSkgLSAxOw0KICAgIH0NCiAgICANCiAgICBzZXNzaW9uU3RvcmFnZS5wYWdlID0gTnVtYmVyKHNlc3Npb25TdG9yYWdlLnBhZ2UpIC0gMTsNCiAgICB2YXIgb2Zmc2V0cyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZmlyc3RDbGllbnRJZGVudEZvclBhZ2VzKTsNCiAgICANCiAgICBpZiAoaXNQYWdpbmF0aW9uTGlua0VuYWJsZWQobGluaykpIGxvYWRQcmV2QWpheFBhZ2VDYXNzYW5kcmEoZGVzdGluYXRpb24sICdjbGllbnRQYWdpbmF0aW9uJywgY3VycmVudE9mZnNldCwgb2Zmc2V0c1tOdW1iZXIoc2Vzc2lvblN0b3JhZ2UucGFnZSldLCB0b3RhbFJlc3VsdHMsIGJ1aWxkQ2xpZW50RmlsdGVyU3RyaW5nKCkpOw0KfQ0KDQpmdW5jdGlvbiBsb2FkTmV4dENsaWVudFBhZ2VDYXNzYW5kcmEobGluaywgZGVzdGluYXRpb24sIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMpIHsNCiAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgib25jbGljayIpOyAvLyBQcmV2ZW50IHJhcGlkLWZpcmUgY2xpY2tzIGZyb20gYnJlYWtpbmcgdGhlIHBhZ2luZyBzYXZlcw0KDQogICAgLy8gR2V0IHJpZCBvZiBhbGwgcGFnaW5hdGlvbiBvbmNsaWNrIGV2ZW50cyBqdXN0IGluIGNhc2UNCiAgICBwcmV2QnV0dG9ucyA9ICQoJy5wcmV2LXBhZ2UtbGluaycpDQogICAgdmFyIHByZXZCdXR0b25PbkNsaWNrID0gcHJldkJ1dHRvbnNbMF0uZ2V0QXR0cmlidXRlKCJvbmNsaWNrIik7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmV2QnV0dG9ucy5sZW5ndGg7IGkrKykgeyBwcmV2QnV0dG9uc1tpXS5yZW1vdmVBdHRyaWJ1dGUoIm9uY2xpY2siKTsgfQ0KICAgIG5leHRCdXR0b25zID0gJCgnLm5leHQtcGFnZS1saW5rJykNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5leHRCdXR0b25zLmxlbmd0aDsgaSsrKSB7IG5leHRCdXR0b25zW2ldLnJlbW92ZUF0dHJpYnV0ZSgib25jbGljayIpOyB9DQogICAgDQogICAgaWYgKHRvdGFsUmVzdWx0cyAhPT0gcmVzdWx0c1BlclBhZ2UpIHsNCiAgICAgIC8vIFNldCBiYWNrIHByZXYgYnV0dG9uIGlmIHRoaXMgaXMgdGhlIGxhc3QgcGFnZS4NCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJldkJ1dHRvbnMubGVuZ3RoOyBpKyspIHsgcHJldkJ1dHRvbnNbaV0uc2V0QXR0cmlidXRlKCJvbmNsaWNrIiwgcHJldkJ1dHRvbk9uQ2xpY2spOyB9DQogICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIGlmICh0eXBlb2Yoc2Vzc2lvblN0b3JhZ2UuZmlyc3RDbGllbnRJZGVudEZvclBhZ2VzKSA9PT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgIHZhciBmaXJzdFZhbHVlcyA9IFsiIl07DQogICAgICBzZXNzaW9uU3RvcmFnZS5maXJzdENsaWVudElkZW50Rm9yUGFnZXMgPSBKU09OLnN0cmluZ2lmeShmaXJzdFZhbHVlcyk7DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciBmaXJzdFZhbHVlcyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZmlyc3RDbGllbnRJZGVudEZvclBhZ2VzKTsNCiAgICB9DQoNCiAgICBpZiAodHlwZW9mKHNlc3Npb25TdG9yYWdlLnBhZ2UpID09PSAndW5kZWZpbmVkJykgeyBzZXNzaW9uU3RvcmFnZS5wYWdlID0gMTsgfQ0KICAgIGVsc2UgeyBzZXNzaW9uU3RvcmFnZS5wYWdlID0gTnVtYmVyKHNlc3Npb25TdG9yYWdlLnBhZ2UpICsgMTsgfQ0KICAgIA0KICAgIGlmICh0eXBlb2YoZmlyc3RWYWx1ZXNbTnVtYmVyKHNlc3Npb25TdG9yYWdlLnBhZ2UpXSkgPT09ICd1bmRlZmluZWQnKSB7DQogICAgICBmaXJzdFZhbHVlcy5wdXNoKG9mZnNldFZhbHVlKTsNCiAgICAgIHNlc3Npb25TdG9yYWdlLmZpcnN0Q2xpZW50SWRlbnRGb3JQYWdlcyA9IEpTT04uc3RyaW5naWZ5KGZpcnN0VmFsdWVzKTsNCiAgICB9DQoNCiAgICBpZiAoaXNQYWdpbmF0aW9uTGlua0VuYWJsZWQobGluaykpIGxvYWROZXh0QWpheFBhZ2VDYXNzYW5kcmEoZGVzdGluYXRpb24sICdjbGllbnRQYWdpbmF0aW9uJywgY3VycmVudE9mZnNldCwgb2Zmc2V0VmFsdWUsIHRvdGFsUmVzdWx0cywgYnVpbGRDbGllbnRGaWx0ZXJTdHJpbmcoKSk7DQoNCiAgICAvLyBFZGdlY2FzZSA6IGlmIHRoaXMgaXMgdGhlIGxhc3QgcGFnZSBhbmQgcmVzdWx0cyBpcyBkaXZpc2libGUgYnkgcmVzdWx0c1BlclBhZ2UsIHdlIGhhdmUgdG8gc2V0IGJhY2sgdG8gcHJldmlvdXMgYnV0dG9uIGNsaWNrDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmV2QnV0dG9ucy5sZW5ndGg7IGkrKykgeyBwcmV2QnV0dG9uc1tpXS5zZXRBdHRyaWJ1dGUoIm9uY2xpY2siLCBwcmV2QnV0dG9uT25DbGljayk7IH0NCn0NCg0KDQpmdW5jdGlvbiBsb2FkUHJldkNsaWVudFBhZ2UobGluaywgZGVzdGluYXRpb24sIGN1cnJlbnRPZmZzZXQsIG9mZnNldFZhbHVlLCB0b3RhbFJlc3VsdHMpIHsNCiAgICBpZiAoIWlzTmFOKG9mZnNldFZhbHVlKSAmJiBpc1BhZ2luYXRpb25MaW5rRW5hYmxlZChsaW5rKSkgbG9hZFByZXZBamF4UGFnZShkZXN0aW5hdGlvbiwgJ2NsaWVudFBhZ2luYXRpb24nLCBjdXJyZW50T2Zmc2V0LCBvZmZzZXRWYWx1ZSwgdG90YWxSZXN1bHRzLCBidWlsZENsaWVudEZpbHRlclN0cmluZygpKTsNCn0NCg0KZnVuY3Rpb24gbG9hZE5leHRDbGllbnRQYWdlKGxpbmssIGRlc3RpbmF0aW9uLCBjdXJyZW50T2Zmc2V0LCBvZmZzZXRWYWx1ZSwgdG90YWxSZXN1bHRzKSB7DQogICAgaWYgKCFpc05hTihvZmZzZXRWYWx1ZSkgJiYgaXNQYWdpbmF0aW9uTGlua0VuYWJsZWQobGluaykpIGxvYWROZXh0QWpheFBhZ2UoZGVzdGluYXRpb24sICdjbGllbnRQYWdpbmF0aW9uJywgY3VycmVudE9mZnNldCwgb2Zmc2V0VmFsdWUsIHRvdGFsUmVzdWx0cywgYnVpbGRDbGllbnRGaWx0ZXJTdHJpbmcoKSk7DQp9DQoNCjwvc2NyaXB0Pg==\"/>\n                <L7p:VariableToSet stringValue=\"js\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KICAgIDx0aXRsZT4ke3RoaXMuYXBwLm5hbWV9PC90aXRsZT4NCiAgICA8bWV0YSBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCIvPg0KICAgIDxtZXRhIGh0dHAtZXF1aXY9IlgtVUEtQ29tcGF0aWJsZSIgY29udGVudD0iSUU9OCxJRT05LElFPTEwLElFPTExLGNocm9tZT0xIiAvPg0KICAgICR7Y3NzfQ0KICAgICR7anN9DQo8L2hlYWQ+DQoNCjxib2R5Pg0KICAgIDxkaXY+DQogICAgICAgIDxkaXYgY2xhc3M9Im5hdmJhciI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250YWluZXItZmx1aWQiPg0KICAgICAgICAgICAgICAgICR7YnJhbmRMb2dvfQ0KICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJzaXRlIiBocmVmPSIke3RoaXMuYXBwLnVybC5sb2dpbn0/c3RhdGU9aW5pdCI+JHt0aGlzLmFwcC5uYW1lfTwvYT4NCjwhLS1MT0dHRURfSU5fVVNFUl9ESVYtLT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY29udGFpbmVyLWZsdWlkIj4NCjwhLS1MT0dHRURfSU5fTkFWX0RJVi0tPg==\"/>\n                <L7p:VariableToSet stringValue=\"website_top\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icm93LWZsdWlkIHBvcnRhbC1mb290ZXIiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYW4xMiI+DQogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJwb3J0YWwtY29weXJpZ2h0Ij7CqSAyMDIwIEJyb2FkY29tLiBBbGwgUmlnaHRzIFJlc2VydmVkLiBUaGUgdGVybSAnQnJvYWRjb20nIHJlZmVycyB0byBCcm9hZGNvbSBJbmMuIGFuZC9vciBpdHMgc3Vic2lkaWFyaWVzLjwvcD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQogICAgICAgIGFjdGl2YXRlVG9nZ2xlQmxvY2tzKCk7DQogICAgPC9zY3JpcHQ+DQo8L2JvZHk+DQo8L2h0bWw+\"/>\n                <L7p:VariableToSet stringValue=\"website_bottom\"/>\n            </L7p:SetVariable>\n            <L7p:SetVariable>\n                <L7p:Base64Expression stringValue=\"PHVsIGNsYXNzPSJ1c2VyLW1lbnUgcHVsbC1yaWdodCI+DQogICAgPGxpIGNsYXNzPSJ0b2dnbGUgZHJvcGRvd24iPg0KICAgICAgICA8c3BhbiBjbGFzcz0idG9nZ2xlLWxpbmsiPg0KICAgICAgICAgICAgJHtjdXJyZW50LnVzZXJuYW1lfSA8YiBjbGFzcz0iY2FyZXQiPjwvYj4NCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8dWwgY2xhc3M9InRvZ2dsZS1ibG9jayI+DQogICAgICAgICAgICA8bGk+PGZvcm0gYWN0aW9uPSIuLi9tYW5hZ2VyP3N0YXRlPWxvZ291dCIgbWV0aG9kPSJQT1NUIiBlbmN0eXBlPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiIGlkPSJsb2dvdXRGb3JtIj4NCiAgICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJzeW5jaFRva2VuIiB0eXBlPSJoaWRkZW4iIHZhbHVlPSIke3N5bmNoVG9rZW59IiAvPg0KICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1tZWRpdW0iIGlkPSJsb2dvdXRCdXR0b24iIHR5cGU9InN1Ym1pdCIgdmFsdWU9ImxvZ291dCI+TG9nb3V0PC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9mb3JtPg0KCQkgIDwvbGk+DQogICAgICAgIDwvdWw+DQogICAgPC9saT4NCjwvdWw+\"/>\n                <L7p:VariableToSet stringValue=\"loggedInDiv\"/>\n            </L7p:SetVariable>\n            <wsp:OneOrMore wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"\"/>\n                    <L7p:Operator operator=\"EMPTY\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:RightValue stringValue=\"\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:All wsp:Usage=\"Required\">\n                    <L7p:Regex>\n                        <L7p:AutoTarget booleanValue=\"false\"/>\n                        <L7p:OtherTargetMessageVariable stringValue=\"website_top\"/>\n                        <L7p:Regex stringValue=\"&lt;!--LOGGED_IN_USER_DIV-->\"/>\n                        <L7p:Replace booleanValue=\"true\"/>\n                        <L7p:Replacement stringValue=\"${loggedInDiv}\"/>\n                        <L7p:Target target=\"OTHER\"/>\n                    </L7p:Regex>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icm93LWZsdWlkIj4NCiAgICA8ZGl2IGlkPSJuYXYiPg0KICAgICAgICA8dWwgY2xhc3M9ImlubGluZSI+DQogICAgICAgICAgICA8bGkgaWQ9Im5hdi1ob21lIj48YSBocmVmPSIuLi9tYW5hZ2VyP3N0YXRlPWluaXQiPjxpIGNsYXNzPSJpY29uLXBvcnRhbC1ob21lIj48L2k+PGJyIC8+SG9tZTwvYT48L2xpPg0KICAgICAgICAgICAgPGxpIGlkPSJuYXYtY2xpZW50cyI+PGEgaHJlZj0iP3N0YXRlPW1hbmFnZUNsaWVudHMmbG9va3VwVXNlcj0ke2xvb2t1cFVzZXJ9Ij48aSBjbGFzcz0iaWNvbi1wb3J0YWwtdXNlcnMiPjwvaT48YnIgLz5DbGllbnRzPC9hPjwvbGk+DQogICAgICAgICAgICA8bGkgaWQ9Im5hdi10b2tlbnMiPjxhIGhyZWY9InRva2Vucz9zdGF0ZT1tYW5hZ2VPd25lcnNDbGllbnRzJmxvb2t1cFVzZXI9JHtsb29rdXBVc2VyfSZvZmZzZXQ9MCI+PGkgY2xhc3M9Imljb24tcG9ydGFsLWFwcGxpY2F0aW9ucyI+PC9pPjxiciAvPlRva2VuczwvYT48L2xpPg0KICAgICAgICA8L3VsPg0KICAgICAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQogICAgICAgICAgICB2YXIgc3RhdGVBcnJheSA9IGxvY2F0aW9uLnNlYXJjaC5tYXRjaCgvc3RhdGU9KFteJl0rKS8pOw0KICAgICAgICAgICAgdmFyIGN1cnJlbnRNZW51SXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXYtaG9tZScpOw0KICAgICAgICAgICAgaWYgKHN0YXRlQXJyYXkgJiYgc3RhdGVBcnJheS5sZW5ndGggJiYgc3RhdGVBcnJheS5sZW5ndGggPj0gMikgew0KICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHN0YXRlQXJyYXlbMV07DQogICAgICAgICAgICAgICAgc3dpdGNoIChzdGF0ZSkgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdtYW5hZ2VDbGllbnRzJzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWFuYWdlQ2xpZW50c0ZpbHRlcic6DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlZ2lzdGVyJzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVnaXN0ZXJlZCc6DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZUNsaWVudCc6DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VkaXRDbGllbnQnOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICd1cGRhdGVDbGllbnQnOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdjbGllbnRLZXlzJzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmV2b2tlS2V5JzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkS2V5JzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAna2V5QWRkZWQnOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdlZGl0S2V5JzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAna2V5RWRpdGVkJzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGlzYWJsZVRva2Vucyc6DQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TWVudUl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2LWNsaWVudHMnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlICdtYW5hZ2VPd25lcnNDbGllbnRzJzoNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWFuYWdlT3duZXJzQ2xpZW50c1BhZ2luYXRpb24nOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdtYW5hZ2VUb2tlbnNGaWx0ZXInOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXZva2UnOg0KICAgICAgICAgICAgICAgICAgICBjYXNlICd0b2dnbGVTdGF0dXMnOg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE1lbnVJdGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdi10b2tlbnMnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gICAgICAgICAgICAgDQogICAgICAgICAgICBjdXJyZW50TWVudUl0ZW0uY2xhc3NOYW1lID0gJ2FjdGl2ZSc7DQogICAgICAgIDwvc2NyaXB0Pg0KICAgIDwvZGl2Pg0KPC9kaXY+\"/>\n                        <L7p:VariableToSet stringValue=\"loggedInNavDiv\"/>\n                    </L7p:SetVariable>\n                    <L7p:Regex>\n                        <L7p:AutoTarget booleanValue=\"false\"/>\n                        <L7p:OtherTargetMessageVariable stringValue=\"website_top\"/>\n                        <L7p:Regex stringValue=\"&lt;!--LOGGED_IN_NAV_DIV-->\"/>\n                        <L7p:Replace booleanValue=\"true\"/>\n                        <L7p:Replacement stringValue=\"${loggedInNavDiv}\"/>\n                        <L7p:Target target=\"OTHER\"/>\n                    </L7p:Regex>\n                </wsp:All>\n            </wsp:OneOrMore>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"web content\"/>\n                    </L7p:entry>\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"Set web content here (js &amp; top/bottom)\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:All>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"=== Create the filters for looking up clients\"/>\n        </L7p:CommentAssertion>\n        <L7p:SetVariable>\n            <L7p:Base64Expression stringValue=\"PGgyPkZpbHRlciBzZWFyY2ggcmVzdWx0czwvaDI+DQogICAgICAgIDxmb3JtIG9uc3VibWl0PSJzZWFyY2hDbGllbnRzKCdtYW5hZ2VDbGllbnRzUmVzdWx0Jyk7IHJldHVybiBmYWxzZTsiPg0KICAgICAgICAgICAgPHRhYmxlIGlkPSJmaWx0ZXJzQ2xpZW50c1RhYmxlIiBjbGFzcz0idGFibGUtZm9ybSI+DQogICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxNzBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZmlsdGVyUmVnaXN0ZXJlZEJ5Ij5SZWdpc3RlcmVkIEJ5PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0iZmlsdGVyUmVnaXN0ZXJlZEJ5IiB0eXBlPSJ0ZXh0IiBuYW1lPSJsb29rdXBVc2VyIiB3aWR0aD0iMTAwIiB2YWx1ZT0iJHtsb29rdXBVc2VyfSI+DQogICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6IDE3MHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJmaWx0ZXJDbGllbnROYW1lIj5DbGllbnQgTmFtZSAoYXBwKTwvbGFiZWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9ImZpbHRlckNsaWVudE5hbWUiIHR5cGU9InRleHQiIG5hbWU9ImZpbHRlckNsaWVudE5hbWUiIHdpZHRoPSIxMDAiPg0KICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxNzBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZmlsdGVyT3JnYW5pemF0aW9uIj5Pcmdhbml6YXRpb248L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJmaWx0ZXJPcmdhbml6YXRpb24iIHR5cGU9InRleHQiIG5hbWU9ImZpbHRlck9yZ2FuaXphdGlvbiIgd2lkdGg9IjEwMCI+DQogICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgIDx0ZD48YnIgLz48YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBidG4tbWluaSIgdmFsdWU9IlNlYXJjaCI+U2VhcmNoPC9idXR0b24+PC90ZD4NCiAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgPC9mb3JtPg0KPGJyIC8+DQoNCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCmZ1bmN0aW9uIHNldFZhbGlkRmlsdGVycygpIHsNCiAgICB2YXIgbG9va3VwVXNlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXJSZWdpc3RlcmVkQnknKTsNCiAgICBsb29rdXBVc2VyLmRpc2FibGVkID0gISR7aXNBZG1pbn07DQp9DQpzZXRWYWxpZEZpbHRlcnMoKTsNCjwvc2NyaXB0Pg==\"/>\n            <L7p:VariableToSet stringValue=\"filtersClients\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:Base64Expression stringValue=\"PGgyPkZpbHRlciBzZWFyY2ggcmVzdWx0czwvaDI+DQogICAgICAgIDxmb3JtIG9uc3VibWl0PSJzZWFyY2hDbGllbnRLZXlzKCdtYW5hZ2VDbGllbnRLZXlzUmVzdWx0Jyk7IHJldHVybiBmYWxzZTsiPg0KICAgICAgICAgICAgPHRhYmxlIGlkPSJmaWx0ZXJzQ2xpZW50c1RhYmxlIiBjbGFzcz0idGFibGUtZm9ybSI+DQogICAgICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxNzBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZmlsdGVyQ3JlYXRlZEJ5Ij5DcmVhdGVkIEJ5PC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0iZmlsdGVyQ3JlYXRlZEJ5IiB0eXBlPSJ0ZXh0IiBuYW1lPSJsb29rdXBVc2VyIiB2YWx1ZT0iJHtsb29rdXBVc2VyfSIgd2lkdGg9IjEwMCI+DQogICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6IDE3MHB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJmaWx0ZXJFbnZpcm9ubWVudCI+RW52aXJvbm1lbnQ8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJmaWx0ZXJFbnZpcm9ubWVudCIgdHlwZT0idGV4dCIgbmFtZT0iZmlsdGVyRW52aXJvbm1lbnQiIHdpZHRoPSIxMDAiPg0KICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxNzBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZmlsdGVyQ2xpZW50SWQiPkNsaWVudCBLZXk8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJmaWx0ZXJDbGllbnRJZCIgdHlwZT0idGV4dCIgbmFtZT0iZmlsdGVyQ2xpZW50SWQiIHdpZHRoPSIxMDAiPg0KICAgICAgICAgICAgICAgICAgICA8L3RkPiANCiAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOiAxMTBweDsiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZmlsdGVyU3RhdHVzIj5TdGF0dXM8L2xhYmVsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZmlsdGVyU3RhdHVzIiBuYW1lPSJmaWx0ZXJTdGF0dXMiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkVOQUJMRUQiIHNlbGVjdGVkPSJzZWxlY3RlZCI+RU5BQkxFRDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRJU0FCTEVEIj5ESVNBQkxFRDwvb3B0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgIDx0ZD48YnIgLz48YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBidG4tbWluaSIgdmFsdWU9IlNlYXJjaCI+U2VhcmNoPC9idXR0b24+PC90ZD4NCiAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgPC9mb3JtPg0KPGJyIC8+DQoNCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCmZ1bmN0aW9uIHNldFZhbGlkRmlsdGVycygpIHsNCiAgICB2YXIgbG9va3VwVXNlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXJDcmVhdGVkQnknKTsNCiAgICBsb29rdXBVc2VyLmRpc2FibGVkID0gISR7aXNBZG1pbn07DQp9DQpzZXRWYWxpZEZpbHRlcnMoKTsNCjwvc2NyaXB0Pg==\"/>\n            <L7p:VariableToSet stringValue=\"filtersClientKeys\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:AssertionComment assertionComment=\"included\">\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"[mag]\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:AssertionComment>\n            <L7p:Base64Expression stringValue=\"TWFzdGVyIGtleXMgYXJlIHVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUgY2xpZW50IChlLmcuOiAvY29ubmVjdC9jbGllbnQvaW5pdGlhbGl6ZSk=\"/>\n            <L7p:VariableToSet stringValue=\"master_message\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9pZGVudH0=\"/>\n            <L7p:VariableToSet stringValue=\"client_ident\"/>\n        </L7p:SetVariable>\n        <L7p:Encapsulated>\n            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"355ca731-f92a-4d64-b41a-8533eedfa651\"/>\n            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Profile Configuration\"/>\n            <L7p:Parameters mapValue=\"included\">\n                <L7p:entry>\n                    <L7p:key stringValue=\"client_id\"/>\n                    <L7p:value stringValue=\"\"/>\n                </L7p:entry>\n                <L7p:entry>\n                    <L7p:key stringValue=\"client_key_custom\"/>\n                    <L7p:value stringValue=\"\"/>\n                </L7p:entry>\n            </L7p:Parameters>\n        </L7p:Encapsulated>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <L7p:ComparisonAssertion>\n                <L7p:CaseSensitive booleanValue=\"false\"/>\n                <L7p:Expression1 stringValue=\"${isAdmin}\"/>\n                <L7p:Expression2 stringValue=\"true\"/>\n                <L7p:Predicates predicates=\"included\">\n                    <L7p:item binary=\"included\">\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:RightValue stringValue=\"true\"/>\n                    </L7p:item>\n                </L7p:Predicates>\n            </L7p:ComparisonAssertion>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${client_ident}\"/>\n                    <L7p:Expression2 stringValue=\"true\"/>\n                    <L7p:Operator operator=\"EMPTY\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:RightValue stringValue=\"true\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${client_key}\"/>\n                    <L7p:Expression2 stringValue=\"true\"/>\n                    <L7p:Operator operator=\"EMPTY\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:RightValue stringValue=\"true\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"both client_ident and client_key empty, so no need to check permissions\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:OneOrMore wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"registered\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"registered\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"keyAdded\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"keyAdded\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n            </wsp:OneOrMore>\n            <wsp:All wsp:Usage=\"Required\">\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${client_ident}\"/>\n                        <L7p:Expression2 stringValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"true\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_ident\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"environment\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"filterStatus\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"format\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"name\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"operation\"/>\n                                    <L7p:value stringValue=\"get\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"org\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"queryOffset\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"registered_by\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathRegisteredBy\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/ns:values/ns:value/ns:registered_by/text()\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${current.username}\"/>\n                            <L7p:Expression2 stringValue=\"${xpathRegisteredBy.result}\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${xpathRegisteredBy.result}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"grab registered_by from client, compare to current user\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"client check\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${client_key}\"/>\n                        <L7p:Expression2 stringValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"true\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_ident\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"environment\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"filterStatus\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"format\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"name\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"operation\"/>\n                                    <L7p:value stringValue=\"getKey\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"org\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"queryOffset\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"registered_by\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathCreatedBy\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/ns:values/ns:value/ns:created_by/text()\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${current.username}\"/>\n                            <L7p:Expression2 stringValue=\"${xpathCreatedBy.result}\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${xpathCreatedBy.result}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"grab created_by from client key, compare to current user\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"client key check\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"non-admin must match client's resource_owner\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${error.code}\"/>\n                        <L7p:Expression2 stringValue=\"\"/>\n                        <L7p:Negate booleanValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Negated booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"MDAw\"/>\n                        <L7p:VariableToSet stringValue=\"error.code\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"error.code\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${error.msg}\"/>\n                        <L7p:Expression2 stringValue=\"\"/>\n                        <L7p:Negate booleanValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Negated booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"error.code\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"get the error code message\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"${error.code}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtlcnJvci5tc2d9\"/>\n                            <L7p:VariableToSet stringValue=\"error.msg\"/>\n                        </L7p:SetVariable>\n                    </wsp:OneOrMore>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"error.msg\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlcnJvci5tc2d9\"/>\n                    <L7p:VariableToSet stringValue=\"erro.msg\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=\"/>\n                    <L7p:VariableToSet stringValue=\"content-type\"/>\n                </L7p:SetVariable>\n                <L7p:AuditDetailAssertion>\n                    <L7p:Detail stringValue=\"error.code: '${error.code}', error.msg: ${error.msg}\"/>\n                </L7p:AuditDetailAssertion>\n                <L7p:FalseAssertion/>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                            <L7p:value stringValue=\"error\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"create an error response\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                        <L7p:value stringValue=\"verify admin, or non-admin matches owner of client/key they're modifying\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:OneOrMore>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"========================\"/>\n            </L7p:CommentAssertion>\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"=== As of here: management tasks ==\"/>\n            </L7p:CommentAssertion>\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"========================\"/>\n            </L7p:CommentAssertion>\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"=== Clients overview ==\"/>\n            </L7p:CommentAssertion>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"export\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"export\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_ident\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"environment\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"filterStatus\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"format\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"name\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"operation\"/>\n                                    <L7p:value stringValue=\"getAll\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"org\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"queryOffset\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"registered_by\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"3444e818-0c95-4c2d-90d9-ff7bb719cd33\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Export\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"expose_client_secret\"/>\n                                    <L7p:value stringValue=\"${expose_client_secret}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"incoming_xml\"/>\n                                    <L7p:value stringValue=\"resp\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ew0KCSJlcnJvciI6ImNvbmZpZ3VyYXRpb25fZXJyb3IiLA0KCSJlcnJvcl9kZXNjcmlwdGlvbiI6ImV4cG9ydGluZyBkYXRhIGZhaWxlZCBkdWUgdG8gbWlzY29uZmlndXJhdGlvbiINCn0=\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"resp\"/>\n                        </L7p:SetVariable>\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"Export error: client_key='${request.http.parameter.client_key}', cert='${oauth2_server_certificate}', lookup offset='${offset}'\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Error\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                </wsp:OneOrMore>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"PHNjcmlwdD4NCiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgew0KCXZhciBleHBvcnRlZEpzb24gPSAke3Jlc3AubWFpbnBhcnR9Ow0KCWV4cG9ydGVkSnNvbiA9IEpTT04uc3RyaW5naWZ5KGV4cG9ydGVkSnNvbiwgdW5kZWZpbmVkICwgNCk7DQogCSQoIiNleHBvcnRlZFRleHQiKS50ZXh0KGV4cG9ydGVkSnNvbik7DQp9KTsNCjwvc2NyaXB0Pg==\"/>\n                    <L7p:VariableToSet stringValue=\"custom_js\"/>\n                </L7p:SetVariable>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPHA+RXhwb3J0ZWQgY29uZmlndXJhdGlvbiBmb3IgY2xpZW50X2lkICcke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuY2xpZW50X2tleX0nOjwvcD4KPGRpdiBpZD0iaWRFeHBvcnRlZEpTT04iIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNlZWU7Zm9udC1zaXplOjAuOWVtO2JvcmRlcjoxcHggc29saWQgIzMzMztwYWRkaW5nOjAgMWVtOyI+CjxwcmUgaWQ9ImV4cG9ydGVkVGV4dCI+PC9wcmU+CjwvZGl2Pgoke2N1c3RvbV9qc30KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"export\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"manageClients\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"manageClients\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"get\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"${offsetValue}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${lookupUser}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                    <L7p:ContentType stringValue=\"text/xml; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"findDates\"/>\n                </L7p:SetVariable>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathOffset\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/@offset\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCount\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"count(/ns:values/ns:value)\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aENvdW50LnJlc3VsdH0=\"/>\n                    <L7p:VariableToSet stringValue=\"count\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${count}\"/>\n                        <L7p:Operator operatorNull=\"null\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item dataType=\"included\">\n                                <L7p:Type variableDataType=\"int\"/>\n                            </L7p:item>\n                            <L7p:item binary=\"included\">\n                                <L7p:Operator operator=\"LT\"/>\n                                <L7p:RightValue stringValue=\"1\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathClientIdents\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_ident\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:CaptureVar stringValue=\"lastClientIdent\"/>\n                            <L7p:IncludeEntireExpressionCapture booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"xpathClientIdents.results\"/>\n                            <L7p:Regex stringValue=\"\\s*([^,]+)\\]$\"/>\n                            <L7p:Replacement stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// sets lastClientIdent for pagination if records exist.\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:XslTransformation>\n                    <L7p:Direction intValue=\"-1\"/>\n                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                    <L7p:ResourceInfo staticResourceInfo=\"included\">\n                        <L7p:Document stringValueReference=\"inline\"><![CDATA[<xsl:stylesheet version=\"1.0\" xmlns:ns=\"http://ns.l7tech.com/2012/11/otk-clientstore\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n                <xsl:output method=\"html\"/>\n\n                <xsl:param name=\"this.app.url\"/>\n                <xsl:param name=\"offset\"/>\n                <xsl:param name=\"synchToken\"/>\n                \n                <xsl:template match=\"/ns:values\">\n                <table border=\"1\" class=\"table-striped table-hover\" id=\"tblResult\" style=\"padding:2px; empty-cells: show; overflow: hidden;\">\n                <tr style=\"background-color: rgb(216,216,216);\">\n\n                <xsl:choose>\n                <xsl:when test=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n\n                <th>index</th>\n                <xsl:for-each select=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                <th>\n                <xsl:value-of select=\"name()\"/>\n                </th>\n                </xsl:for-each>\n                <th colspan=\"3\">action</th>\n\n                </xsl:when>\n                  <xsl:otherwise>\n                    <td>\n                        <xsl:text>No records found</xsl:text>\n                     </td>\n                  </xsl:otherwise>\n                </xsl:choose>\n                </tr>\n                <xsl:for-each select=\"ns:value[node()]\">\n                <xsl:variable name=\"tempClientName\" select=\"descendant::node()[local-name()='name']\"/>\n                <xsl:variable name=\"tempClientIdent\" select=\"descendant::node()[local-name()='client_ident']\"/>\n                  <tr>\n                <xsl:variable name=\"trPosition\" select=\"position()\"/>\n                <td>\n                <xsl:value-of select=\"@index+number($offset)\"/>\n                </td>\n                <xsl:for-each select=\"descendant::node()[not(name()='')]\">\n                <xsl:choose>\n                <xsl:when test=\"name()='client_custom'\">\n                <xsl:variable name=\"nextId\" select=\"concat('custom_value',$trPosition,position())\"/>\n                <td id=\"{$nextId}\" style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:when>\n                <xsl:otherwise>\n                <td style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:otherwise>\n                </xsl:choose>\n                </xsl:for-each>\n                <td>\n                <form action=\"{$this.app.url}?state=deleteClient\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmDelete('{$tempClientName}')\">\n                <input name=\"name\" type=\"hidden\" value=\"{$tempClientName}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Delete\">Delete</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=editClient\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"name\" type=\"hidden\" value=\"{$tempClientName}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Edit\">Edit</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=clientKeys\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"List Keys\">List Keys</button>\n                </form>\n                </td>\n                </tr>\n                </xsl:for-each>\n                </table>\n                </xsl:template>\n\n                </xsl:stylesheet>]]></L7p:Document>\n                    </L7p:ResourceInfo>\n                    <L7p:Target target=\"OTHER\"/>\n                    <L7p:TransformName stringValue=\"\"/>\n                    <L7p:XsltVersion stringValue=\"1.0\"/>\n                </L7p:XslTransformation>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                    <L7p:VariableToSet stringValue=\"toBeReturned\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${count}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"GT\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${dbsystem}\"/>\n                                    <L7p:Expression2 stringValue=\"cassandra\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"cassandra\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRQYWdlQ2Fzc2FuZHJhKHRoaXMsICdtYW5hZ2VDbGllbnRzUmVzdWx0JywgJzAnLCAnJHtsYXN0Q2xpZW50SWRlbnR9JywgJHtjb3VudH0pOyI+DQogICAgICAgICAgICA8aSBjbGFzcz0iaWNvbi1wb3J0YWwtYXJyb3ctbGVmdCI+PC9pPiBQcmV2DQogICAgICAgIDwvc3Bhbj4NCiAgICAgICAgPHNwYW4gY2xhc3M9Im5leHQtcGFnZS1saW5rIGRpc2FibGVkIiBvbmNsaWNrPSJsb2FkTmV4dENsaWVudFBhZ2VDYXNzYW5kcmEodGhpcywgJ21hbmFnZUNsaWVudHNSZXN1bHQnLCAnMCcsICcke2xhc3RDbGllbnRJZGVudH0nLCAke2NvdW50fSk7Ij4NCiAgICAgICAgICAgIE5leHQgPGkgY2xhc3M9Imljb24tcG9ydGFsLWFycm93LXJpZ2h0Ij48L2k+DQogICAgICAgIDwvc3Bhbj4NCiAgICA8L2Rpdj4=\"/>\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"cassandra\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRQYWdlKHRoaXMsICdtYW5hZ2VDbGllbnRzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJHt4cGF0aE9mZnNldC5yZXN1bHR9LCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50UGFnZSh0aGlzLCAnbWFuYWdlQ2xpZW50c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICR7eHBhdGhPZmZzZXQucmVzdWx0fSwgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n                                <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                            </L7p:SetVariable>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"\"/>\n                        <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"== CHECK\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// Only return page with navigation buttons if count > 0\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxzY3JpcHQ+Ci8qIE11c3QgcmVzZXQgc2Vzc2lvbiBzdG9yYWdlIHNvIHByZXZpb3VzIHBhZ2luZyB2YWx1ZXMgYXJlIG5vdCBhdHRlbXB0ZWQgaW4gY2FzZSBvZiBjaGFuZ2VzICovCnNlc3Npb25TdG9yYWdlLnBhZ2UgPSAwCnNlc3Npb25TdG9yYWdlLmZpcnN0Q2xpZW50SWRlbnRGb3JQYWdlcyA9ICJbXCJcIl0iCjwvc2NyaXB0Pgo8ZGl2IGNsYXNzPSJjb250ZW50Ij4NCiA8aDE+TWFuYWdlIENsaWVudHM8L2gxPg0KIDxwPlRoaXMgaXMgYW4gb3ZlcnZpZXcgb2YgYWxsIHJlZ2lzdGVyZWQgY2xpZW50IGFwcGxpY2F0aW9uczwvcD4NCiAke2ZpbHRlcnNDbGllbnRzfQ0KIDxkaXYgaWQ9Im1hbmFnZUNsaWVudHNSZXN1bHQiPgogICR7cGFnaW5hdGlvbkJ1dHRvbnN9CiAgJHt0b0JlUmV0dXJuZWR9DQogICR7cGFnaW5hdGlvbkJ1dHRvbnN9CiA8L2Rpdj4NCiA8YnIvPg0KIDxmb3JtIGFjdGlvbj0iJHt0aGlzLmFwcC51cmx9IiBtZXRob2Q9UE9TVCBjbGFzcz0iZm9ybS1hZGQtbmV3Ij4NCiAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ic3RhdGUiIHZhbHVlPSJyZWdpc3RlciIvPg0KICA8aW5wdXQgbmFtZT0ic3luY2hUb2tlbiIgdHlwZT0iaGlkZGVuIiB2YWx1ZT0iJHtzeW5jaFRva2VufSIgLz4KICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+UmVnaXN0ZXIgYSBOZXcgQ2xpZW50PC9idXR0b24+DQogPC9mb3JtPg0KPC9kaXY+DQoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"List client Apps\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"manageClientsFilter\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"manageClientsFilter\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.filterClientName}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"get\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.filterOrganization}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"${offsetValue}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${lookupUser}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                    <L7p:ContentType stringValue=\"text/xml; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"findDates\"/>\n                </L7p:SetVariable>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathOffset\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/@offset\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCount\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"count(/ns:values/ns:value)\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aENvdW50LnJlc3VsdH0=\"/>\n                    <L7p:VariableToSet stringValue=\"count\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${count}\"/>\n                        <L7p:Expression2 stringValue=\"0.0\"/>\n                        <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:RightValue stringValue=\"0.0\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathClientIdents\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_ident\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:CaptureVar stringValue=\"lastClientIdent\"/>\n                            <L7p:IncludeEntireExpressionCapture booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"xpathClientIdents.results\"/>\n                            <L7p:Regex stringValue=\"\\s*([^,]+)\\]$\"/>\n                            <L7p:Replacement stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// Display no results found if 0 results\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:XslTransformation>\n                    <L7p:Direction intValue=\"-1\"/>\n                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                    <L7p:ResourceInfo staticResourceInfo=\"included\">\n                        <L7p:Document stringValueReference=\"inline\"><![CDATA[<xsl:stylesheet version=\"1.0\" xmlns:ns=\"http://ns.l7tech.com/2012/11/otk-clientstore\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n                <xsl:output method=\"html\"/>\n\n                <xsl:param name=\"this.app.url\"/>\n                <xsl:param name=\"offset\"/>\n                <xsl:param name=\"synchToken\"/>\n\n                <xsl:template match=\"/ns:values\">\n                <table border=\"1\" class=\"table-striped table-hover\" id=\"tblResult\" style=\"padding:2px; empty-cells: show;\">\n                <tr style=\"background-color: rgb(216,216,216);\">\n\n                <xsl:choose>\n                <xsl:when test=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                \n                <th>index</th>\n                <xsl:for-each select=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                <th>\n                <xsl:value-of select=\"name()\"/>\n                </th>\n                </xsl:for-each>\n                <th colspan=\"3\">action</th>\n                \n                </xsl:when>\n                  <xsl:otherwise>\n                    <td>\n                        <xsl:text>No records found</xsl:text>\n                     </td>\n                  </xsl:otherwise>\n                </xsl:choose>\n                </tr>\n\n\n                <xsl:for-each select=\"ns:value[node()]\">\n                <xsl:variable name=\"tempClientName\" select=\"descendant::node()[local-name()='name']\"/>\n                <xsl:variable name=\"tempClientIdent\" select=\"descendant::node()[local-name()='client_ident']\"/>\n                <tr>\n                <xsl:variable name=\"trPosition\" select=\"position()\"/>\n                <td>\n                <xsl:value-of select=\"@index+number($offset)\"/>\n                </td>\n                <xsl:for-each select=\"descendant::node()[not(name()='')]\">\n                <xsl:choose>\n                <xsl:when test=\"name()='client_custom'\">\n                <xsl:variable name=\"nextId\" select=\"concat('custom_value',$trPosition,position())\"/>\n                <td id=\"{$nextId}\" style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:when>\n                <xsl:otherwise>\n                <td style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:otherwise>\n                </xsl:choose>\n                </xsl:for-each>\n                <td>\n                <form action=\"{$this.app.url}?state=deleteClient\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmDelete('{$tempClientName}')\">\n                <input name=\"name\" type=\"hidden\" value=\"{$tempClientName}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Delete\">Delete</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=editClient\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"name\" type=\"hidden\" value=\"{$tempClientName}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Edit\">Edit</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=clientKeys\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"List Keys\">List Keys</button>\n                </form>\n                </td>\n                </tr>\n                </xsl:for-each>\n                </table>\n                </xsl:template>\n\n                </xsl:stylesheet>]]></L7p:Document>\n                    </L7p:ResourceInfo>\n                    <L7p:Target target=\"OTHER\"/>\n                    <L7p:TransformName stringValue=\"\"/>\n                    <L7p:XsltVersion stringValue=\"1.0\"/>\n                </L7p:XslTransformation>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                    <L7p:VariableToSet stringValue=\"toBeReturned\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${count}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"GT\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${dbsystem}\"/>\n                                    <L7p:Expression2 stringValue=\"cassandra\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"cassandra\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRQYWdlQ2Fzc2FuZHJhKHRoaXMsICdtYW5hZ2VDbGllbnRzUmVzdWx0JywgJzAnLCAnJHtsYXN0Q2xpZW50SWRlbnR9JywgJHtjb3VudH0pOyI+DQogICAgICAgICAgICA8aSBjbGFzcz0iaWNvbi1wb3J0YWwtYXJyb3ctbGVmdCI+PC9pPiBQcmV2DQogICAgICAgIDwvc3Bhbj4NCiAgICAgICAgPHNwYW4gY2xhc3M9Im5leHQtcGFnZS1saW5rIGRpc2FibGVkIiBvbmNsaWNrPSJsb2FkTmV4dENsaWVudFBhZ2VDYXNzYW5kcmEodGhpcywgJ21hbmFnZUNsaWVudHNSZXN1bHQnLCAnMCcsICcke2xhc3RDbGllbnRJZGVudH0nLCAke2NvdW50fSk7Ij4NCiAgICAgICAgICAgIE5leHQgPGkgY2xhc3M9Imljb24tcG9ydGFsLWFycm93LXJpZ2h0Ij48L2k+DQogICAgICAgIDwvc3Bhbj4NCiAgICA8L2Rpdj4=\"/>\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"cassandra\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRQYWdlKHRoaXMsICdtYW5hZ2VDbGllbnRzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJHt4cGF0aE9mZnNldC5yZXN1bHR9LCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50UGFnZSh0aGlzLCAnbWFuYWdlQ2xpZW50c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICR7eHBhdGhPZmZzZXQucmVzdWx0fSwgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n                                <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                            </L7p:SetVariable>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"\"/>\n                        <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"== CHECK\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// Only return page with navigation buttons if count > 0\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHtwYWdpbmF0aW9uQnV0dG9uc30KJHt0b0JlUmV0dXJuZWR9CiR7cGFnaW5hdGlvbkJ1dHRvbnN9\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"List client Apps\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"=== Other ==\"/>\n            </L7p:CommentAssertion>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"register\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"register\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"6dbc70f9-bb40-4a69-a0ec-88fae4f35300\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Generate OAuth Token\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ac\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"art\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"at\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cid\"/>\n                            <L7p:value stringValue=\"true\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cidm\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ock\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ot\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"rft\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"urt\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"PHNjcmlwdD4NCiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgew0KICAgJCgnI2F1dGhfbWV0aG9kJykuY2hhbmdlKGZ1bmN0aW9uKCkgew0KICAJaWYoICQodGhpcykudmFsKCkgPT0gInByaXZhdGVfa2V5X2p3dCIpIHsNCiAgICAgICQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7DQogICAgICAkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgICQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAkKCcjcGtpX3ZhbHVlX3JvdycpLmhpZGUoKTsNCgkgICQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgICQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAkKCcjd2FybmluZ19tZXNzYWdlJykuaGlkZSgpOw0KICAgIH0gZWxzZSBpZiggJCh0aGlzKS52YWwoKSA9PSAic2VsZl9zaWduZWRfdGxzX2NsaWVudF9hdXRoIikgew0KCSAgJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgJCgnI3NlY3JldCcpLnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsNCgkgICQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCgkgICQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAkKCcjcGtpX3ZhbHVlX3JvdycpLmhpZGUoKTsNCgkgICQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfSBlbHNlIGlmKCAkKHRoaXMpLnZhbCgpID09ICJ0bHNfY2xpZW50X2F1dGgiKSB7DQoJICAkKCcjcGtpX25hbWVfcm93Jykuc2hvdygpOw0KCSAgJCgnI3BraV92YWx1ZV9yb3cnKS5zaG93KCk7DQogICAgICAkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KCSAgJCgnI2p3a3NfcmFkaW9fYnV0dG9uJykucHJvcCggImNoZWNrZWQiLCBmYWxzZSApOw0KICAgICAgJCgnI2p3a3NfdXJpX3JhZGlvX2J1dHRvbicpLnByb3AoICJjaGVja2VkIiwgZmFsc2UgKTsNCgkgICQoJyNqd2tzX29yX2p3a3NfdXJpJykuaGlkZSgpOw0KCSAgJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KCSAgJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCgkgICQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfSBlbHNlIHsgICAgICAgDQogICAgICAkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgZmFsc2UgKTsNCiAgICAgICQoJyNqd2tzX3JhZGlvX2J1dHRvbicpLnByb3AoICJjaGVja2VkIiwgZmFsc2UgKTsNCiAgICAgICQoJyNqd2tzX3VyaV9yYWRpb19idXR0b24nKS5wcm9wKCAiY2hlY2tlZCIsIGZhbHNlICk7DQogICAgICAkKCcjandrc19vcl9qd2tzX3VyaScpLmhpZGUoKTsNCiAgICAgICQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgICQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQoJICAkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAkKCcjd2FybmluZ19tZXNzYWdlJykuc2hvdygpOw0KICAgIH0NCiAgfSk7IA0KICANCiAgJCh3aW5kb3cpLmJpbmQoImxvYWQiLCBmdW5jdGlvbigpIHsNCiAgICAJdmFyIGlzRmFwaUJhc2VsaW5lRW5hYmxlZCA9ICR7b2F1dGgyX3Byb2ZpbGUuZmFwaV9iYXNlbGluZX07DQogICAgIHZhciBpc0ZhcGlBZHZhbmNlZEVuYWJsZWQgPSAke29hdXRoMl9wcm9maWxlLmZhcGlfYWR2YW5jZWR9Ow0KICAgIGlmIChpc0ZhcGlCYXNlbGluZUVuYWJsZWQpIHsNCiAgICAgICAkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfYmFzaWNdIikucmVtb3ZlKCk7DQoJICAkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfcG9zdF0iKS5yZW1vdmUoKTsNCiAgICB9DQogICAgaWYgKGlzRmFwaUFkdmFuY2VkRW5hYmxlZCkgew0KICAgICAgICQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9qd3RdIikucmVtb3ZlKCk7DQogICAgICAgJCgiI2F1dGhfbWV0aG9kIikuY2hhbmdlKCk7ICAgICAgDQogICAgfQ0KICB9KTsNCiAgICQoImlucHV0W25hbWUkPSdqd2tzX29yX2p3a3NfdXJpX3JhZGlvX2J1dHRvbiddIikuY2hhbmdlKGZ1bmN0aW9uKCkgew0KCQl2YXIgdmFsdWUgPSAkKHRoaXMpLnZhbCgpOw0KICAgIGlmICh2YWx1ZSA9PSAnandrcycpIHsNCiAgICAgICQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAkKCcjandrc19yb3cnKS5zaG93KCk7DQogICAgfWVsc2UgaWYgKHZhbHVlID09ICdqd2tzX3VyaScpIHsNCiAgICAgICQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgICQoJyNqd2tzX3VyaV9yb3cnKS5zaG93KCk7DQogICAgfQ0KICB9KTsNCiAgDQogICQoJyN0eXBlJykuY2hhbmdlKGZ1bmN0aW9uKCkgew0KICAgICB2YXIgZmFwaV9wcm9maWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZhcGlfcHJvZmlsZSIpLnZhbHVlOw0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdiYXNlbGluZScpew0KICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSB0cnVlOw0KICAJCXZhciBpc0ZhcGlBZHZhbmNlZEVuYWJsZWQgPSBmYWxzZTsNCiAgICAgfQ0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdhZHZhbmNlZCcpew0KICAJCXZhciBpc0ZhcGlBZHZhbmNlZEVuYWJsZWQgPSB0cnVlOw0KICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSBmYWxzZTsNCiAgICAgfQ0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdub25lJyl7DQogIAkJdmFyIGlzRmFwaUFkdmFuY2VkRW5hYmxlZCA9IGZhbHNlOw0KICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSBmYWxzZTsNCiAgICAgfQ0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdnbG9iYWwnKXsNCiAgICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSAke29hdXRoMl9wcm9maWxlLmZhcGlfYmFzZWxpbmV9Ow0KCSAgICAgdmFyIGlzRmFwaUFkdmFuY2VkRW5hYmxlZCA9ICR7b2F1dGgyX3Byb2ZpbGUuZmFwaV9hZHZhbmNlZH07IA0KICAgIAl9DQogICAgdmFyIGNsaWVudF90eXBlID0gJCh0aGlzKS52YWwoKTsJDQogICAgDQogICAgaWYgKCFpc0ZhcGlCYXNlbGluZUVuYWJsZWQgfHwgIWlzRmFwaUFkdmFuY2VkRW5hYmxlZCkgew0KICAgICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2Jhc2ljXSIpLnJlbW92ZSgpOw0KICAgICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQogICAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfand0XSIpLnJlbW92ZSgpOw0KICAgICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChQb3N0KScsICdjbGllbnRfc2VjcmV0X3Bvc3QnKSk7DQogICAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKEJhc2ljKScsICdjbGllbnRfc2VjcmV0X2Jhc2ljJykpOw0KICAgICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChKV1QpJywgJ2NsaWVudF9zZWNyZXRfand0JykpOw0KICAgICAgICAJJCgnI3NlY3JldCcpLnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsNCiAgICAgIAkkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgIAkkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfSANCiAgICANCiAgICBpZiAoY2xpZW50X3R5cGUgPT0gJ2NvbmZpZGVudGlhbCcgJiYgaXNGYXBpQmFzZWxpbmVFbmFibGVkKSB7DQoJICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9iYXNpY10iKS5yZW1vdmUoKTsNCgkgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQoJICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9qd3RdIikucmVtb3ZlKCk7DQoJICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCgkgICAJJCgnI3NlY3JldCcpLnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsNCgkgICAJJCgnI2p3a3Nfb3Jfandrc191cmknKS5zaG93KCk7DQoJICAJJCgnI3BraV9uYW1lX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjcGtpX3ZhbHVlX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjandrc19yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjd2FybmluZ19tZXNzYWdlJykuaGlkZSgpOw0KICAgIH0gDQogICAgDQogICAgaWYgKGlzRmFwaUFkdmFuY2VkRW5hYmxlZCAmJiBjbGllbnRfdHlwZT09J2NvbmZpZGVudGlhbCcpIHsNCiAgICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2Jhc2ljXSIpLnJlbW92ZSgpOw0KCSAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9wb3N0XSIpLnJlbW92ZSgpOw0KICAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfand0XSIpLnJlbW92ZSgpOw0KICAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgIAkkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgIAkkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfQ0KICAgIA0KICAgIGlmIChjbGllbnRfdHlwZSA9PSAncHVibGljJyAmJiBpc0ZhcGlCYXNlbGluZUVuYWJsZWQpIHsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfYmFzaWNdIikucmVtb3ZlKCk7DQogICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQogICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChQb3N0KScsICdjbGllbnRfc2VjcmV0X3Bvc3QnKSk7DQogICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChCYXNpYyknLCAnY2xpZW50X3NlY3JldF9iYXNpYycpKTsNCiAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgCSQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgCSQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9DQoNCiAgICBpZiAoY2xpZW50X3R5cGUgPT0gJ3B1YmxpYycgJiYgaXNGYXBpQWR2YW5jZWRFbmFibGVkKSB7DQogICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2p3dF0iKS5yZW1vdmUoKTsNCiAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKEpXVCknLCAnY2xpZW50X3NlY3JldF9qd3QnKSk7DQogICAgICAJJCgnI3NlY3JldCcpLnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsNCiAgICAgIAkkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgIAkkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfQ0KICAgIA0KICAgIGlmIChmYXBpX3Byb2ZpbGUgPT0gJ25vbmUnICkgew0KICAgICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9iYXNpY10iKS5yZW1vdmUoKTsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfcG9zdF0iKS5yZW1vdmUoKTsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfand0XSIpLnJlbW92ZSgpOw0KICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoUG9zdCknLCAnY2xpZW50X3NlY3JldF9wb3N0JykpOw0KICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoQmFzaWMpJywgJ2NsaWVudF9zZWNyZXRfYmFzaWMnKSk7DQogICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChKV1QpJywgJ2NsaWVudF9zZWNyZXRfand0JykpOw0KICAgICAgCSQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7DQogICAgICAJJCgnI2p3a3Nfb3Jfandrc191cmknKS5zaG93KCk7DQoJICAJJCgnI3BraV9uYW1lX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjcGtpX3ZhbHVlX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjandrc19yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjd2FybmluZ19tZXNzYWdlJykuaGlkZSgpOw0KICAgIH0gICAgDQogICAgIA0KICB9KTsNCiAgJCgnI2ZhcGlfcHJvZmlsZScpLmNoYW5nZShmdW5jdGlvbigpIHsNCiAgICAgdmFyIGNsaWVudF90eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInR5cGUiKS52YWx1ZTsNCiAgICAgdmFyIGZhcGlfcHJvZmlsZSA9ICQodGhpcykudmFsKCk7DQogICAgIGlmIChmYXBpX3Byb2ZpbGUgPT0gJ2Jhc2VsaW5lJyl7DQogIAkJdmFyIGlzRmFwaUJhc2VsaW5lRW5hYmxlZCA9IHRydWU7DQogIAkJdmFyIGlzRmFwaUFkdmFuY2VkRW5hYmxlZCA9IGZhbHNlOw0KICAgICB9DQogICAgIGlmIChmYXBpX3Byb2ZpbGUgPT0gJ2FkdmFuY2VkJyl7DQogIAkJdmFyIGlzRmFwaUFkdmFuY2VkRW5hYmxlZCA9IHRydWU7DQogIAkJdmFyIGlzRmFwaUJhc2VsaW5lRW5hYmxlZCA9IGZhbHNlOw0KICAgICB9DQogICAgIGlmIChmYXBpX3Byb2ZpbGUgPT0gJ25vbmUnKXsNCiAgCQl2YXIgaXNGYXBpQWR2YW5jZWRFbmFibGVkID0gZmFsc2U7DQogIAkJdmFyIGlzRmFwaUJhc2VsaW5lRW5hYmxlZCA9IGZhbHNlOw0KICAgICB9DQogICAgCWlmIChmYXBpX3Byb2ZpbGUgPT0gJ2dsb2JhbCcpew0KICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSAke29hdXRoMl9wcm9maWxlLmZhcGlfYmFzZWxpbmV9Ow0KCSAgICAgdmFyIGlzRmFwaUFkdmFuY2VkRW5hYmxlZCA9ICR7b2F1dGgyX3Byb2ZpbGUuZmFwaV9hZHZhbmNlZH07IA0KICAgICB9DQogICAgIGlmICghaXNGYXBpQmFzZWxpbmVFbmFibGVkIHx8ICFpc0ZhcGlBZHZhbmNlZEVuYWJsZWQpIHsNCiAgICAgICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9iYXNpY10iKS5yZW1vdmUoKTsNCiAgICAgICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9wb3N0XSIpLnJlbW92ZSgpOw0KICAgICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2p3dF0iKS5yZW1vdmUoKTsNCiAgICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoUG9zdCknLCAnY2xpZW50X3NlY3JldF9wb3N0JykpOw0KICAgICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChCYXNpYyknLCAnY2xpZW50X3NlY3JldF9iYXNpYycpKTsNCiAgICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCiAgICAgICAgCSQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7DQogICAgICAgIAkkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgIAkkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfSANCiAgICBpZiAoY2xpZW50X3R5cGUgPT0gJ2NvbmZpZGVudGlhbCcgJiYgaXNGYXBpQmFzZWxpbmVFbmFibGVkKSB7DQoJICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9iYXNpY10iKS5yZW1vdmUoKTsNCgkgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQoJICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9qd3RdIikucmVtb3ZlKCk7DQoJICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCgkgICAJJCgnI3NlY3JldCcpLnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsNCgkgICAJJCgnI2p3a3Nfb3Jfandrc191cmknKS5zaG93KCk7DQoJICAJJCgnI3BraV9uYW1lX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjcGtpX3ZhbHVlX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjandrc19yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjd2FybmluZ19tZXNzYWdlJykuaGlkZSgpOw0KICAgIH0gDQogICAgDQogICAgaWYgKGlzRmFwaUFkdmFuY2VkRW5hYmxlZCAmJiBjbGllbnRfdHlwZT09J2NvbmZpZGVudGlhbCcpIHsNCiAgICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2Jhc2ljXSIpLnJlbW92ZSgpOw0KCSAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9wb3N0XSIpLnJlbW92ZSgpOw0KICAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfand0XSIpLnJlbW92ZSgpOw0KICAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgIAkkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgIAkkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfQ0KICAgIA0KICAgIGlmIChjbGllbnRfdHlwZSA9PSAncHVibGljJyAmJiBpc0ZhcGlCYXNlbGluZUVuYWJsZWQpIHsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfYmFzaWNdIikucmVtb3ZlKCk7DQogICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQogICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChQb3N0KScsICdjbGllbnRfc2VjcmV0X3Bvc3QnKSk7DQogICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChCYXNpYyknLCAnY2xpZW50X3NlY3JldF9iYXNpYycpKTsNCiAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgIH0NCg0KICAgIGlmIChjbGllbnRfdHlwZSA9PSAncHVibGljJyAmJiBpc0ZhcGlBZHZhbmNlZEVuYWJsZWQpIHsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfand0XSIpLnJlbW92ZSgpOw0KICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCiAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgCSQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgCSQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9ICAgDQoNCiAgICBpZiAoZmFwaV9wcm9maWxlID09ICdub25lJyApIHsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfYmFzaWNdIikucmVtb3ZlKCk7DQogICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQogICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2p3dF0iKS5yZW1vdmUoKTsNCiAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKFBvc3QpJywgJ2NsaWVudF9zZWNyZXRfcG9zdCcpKTsNCiAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKEJhc2ljKScsICdjbGllbnRfc2VjcmV0X2Jhc2ljJykpOw0KICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCiAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgCSQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgCSQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9IA0KICB9KTsNCn0pOw0KPC9zY3JpcHQ+\"/>\n                    <L7p:VariableToSet stringValue=\"custom_js\"/>\n                </L7p:SetVariable>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPGRpdj4KICAgIDxoMT5SZWdpc3RlciBhIE5ldyBDbGllbnQ8L2gxPgogICAgPHA+RmlsbCBvdXQgdGhlIGZvcm0gdG8gcmVnaXN0ZXIgbmV3IGNsaWVudCBhcHBsaWNhdGlvbnMuPC9wPgogICAgPGZvcm0gYWN0aW9uPSIke3RoaXMuYXBwLnVybH0/c3RhdGU9cmVnaXN0ZXJlZCIgbWV0aG9kPSJQT1NUIiBlbmN0eXBlPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiIGlkPSJyZWdpc3RlckZvcm0iIG9uc3VibWl0PSJyZXR1cm4gdmFsaWRhdGVGb3JtUmVnaXN0ZXIoKSI+CiAgICAgICAgPGlucHV0IG5hbWU9ImNsaWVudF9pZGVudCIgaWQ9ImNsaWVudF9pZGVudCIgdHlwZT0iaGlkZGVuIiB2YWx1ZT0iJHtnZW5Ub2tlbn0iLz4KICAgICAgICA8aW5wdXQgbmFtZT0ic3luY2hUb2tlbiIgdHlwZT0iaGlkZGVuIiB2YWx1ZT0iJHtzeW5jaFRva2VufSIgLz4KICAgICAgICA8dGFibGUgY2xhc3M9InRhYmxlLWZvcm0iIG5hbWU9InZhbHVlcyI+CiAgICAgICAgICAgIDx0cj48dGQ+Q2xpZW50IE5hbWU8L3RkPjx0ZD48aW5wdXQgaWQ9Im5hbWUiIG5hbWU9Im5hbWUiIHNpemU9IjEyOCIvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5Pcmdhbml6YXRpb248L3RkPjx0ZD48aW5wdXQgbmFtZT0ib3JnIiBpZD0ib3JnIiB0eXBlPSJ0ZXh0IiBzaXplPSIxMjgiLz48L3RkPjwvdHI+CiAgICAgICAgICAgIDx0cj48dGQ+RGVzY3JpcHRpb248L3RkPjx0ZD48aW5wdXQgbmFtZT0iZGVzY3JpcHRpb24iIGlkPSJkZXNjcmlwdGlvbiIgdHlwZT0idGV4dCIgdmFsdWU9IldoYXQgaXMgdGhlIGFwcCB1c2VkIGZvcj8iIHNpemU9IjEyOCIgLz48L3RkPjwvdHI+CiAgICAgICAgICAgIDx0cj48dGQ+UmVnaXN0ZXJlZCBCeTwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJyZWdpc3RlcmVkX2J5IiBpZD0icmVnaXN0ZXJlZF9ieSIgdmFsdWU9IiR7Y3VycmVudC51c2VybmFtZX0iIHR5cGU9InRleHQiIHNpemU9IjEyOCIgcmVhZG9ubHkvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5GQVBJIFByb2ZpbGU8L3RkPjx0ZD48c2VsZWN0IG5hbWU9ImZhcGlfcHJvZmlsZSIgaWQ9ImZhcGlfcHJvZmlsZSI+PG9wdGlvbiB2YWx1ZT0iZ2xvYmFsIj5nbG9iYWw8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJub25lIj5ub25lPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iYmFzZWxpbmUiPmJhc2VsaW5lPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iYWR2YW5jZWQiPmFkdmFuY2VkPC9vcHRpb24+PC9zZWxlY3Q+ICh1c2VkIHdpdGggT3BlbklEKTwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5DbGllbnQgVHlwZTwvdGQ+PHRkPjxzZWxlY3QgbmFtZT0idHlwZSIgaWQ9InR5cGUiPjxvcHRpb24gdmFsdWU9ImNvbmZpZGVudGlhbCI+Y29uZmlkZW50aWFsPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0icHVibGljIj5wdWJsaWM8L29wdGlvbj48L3NlbGVjdD4gKHVzZWQgd2l0aCBvYXV0aCAyLjApPC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPkNsaWVudCBLZXk8L3RkPjx0ZD48dGV4dGFyZWEgbmFtZT0iY2xpZW50X2tleSIgaWQ9ImNsaWVudF9rZXkiIGNvbHM9IjUwIiByb3dzPSIxMCIgbWF4bGVuZ3RoPSIyNTUiPiR7Z2VuVG9rZW59PC90ZXh0YXJlYT48YnI+KG11c3QgYmUgdW5pcXVlIHRvIHRoZSBzeXN0ZW0pPC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPiBQcml2aWxlZ2VkIENsaWVudDwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJwcml2aWxlZ2VkIiBpZD0icHJpdmlsZWdlZF9pZCIgdHlwZT0iY2hlY2tib3giIHZhbHVlPSJ0cnVlIj4gQWJsZSB0byBhY2Nlc3Mgc3BlY2lhbCByZXNvdXJjZXMgKGxpa2UgaW50cm9zcGVjdCkgPC90ZD48L3RyPgoJCQk8dHI+PHRkPkF1dGhlbnRpY2F0aW9uIE1ldGhvZDwvdGQ+PHRkPgogICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJhdXRoX21ldGhvZCIgaWQ9ImF1dGhfbWV0aG9kIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjbGllbnRfc2VjcmV0X2Jhc2ljIj5DbGllbnQgU2VjcmV0IChCYXNpYyk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjbGllbnRfc2VjcmV0X3Bvc3QiPkNsaWVudCBTZWNyZXQgKFBvc3QpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY2xpZW50X3NlY3JldF9qd3QiPkNsaWVudCBTZWNyZXQgKEpXVCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwcml2YXRlX2tleV9qd3QiPlByaXZhdGUgS2V5IChKV1QpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ic2VsZl9zaWduZWRfdGxzX2NsaWVudF9hdXRoIj5TZWxmIFNpZ25lZCBUTFMgQ2xpZW50IEF1dGg8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0bHNfY2xpZW50X2F1dGgiPlRMUyBDbGllbnQgQXV0aDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5DbGllbnQgU2VjcmV0PC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9InNlY3JldCIgaWQ9InNlY3JldCIgY29scz0iNTAiIHJvd3M9IjEwIj4ke2dlblNlY3JldH08L3RleHRhcmVhPjxicj48c3BhbiBzdHlsZT0iY29sb3I6I0ZGMDAwMDsiIGlkPSJ3YXJuaW5nX21lc3NhZ2UiID4oPGI+V2FybmluZzwvYj46IFBsZWFzZSBlbnN1cmUgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIGNsaWVudCBzZWNyZXQpPC9zcGFuPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyIHN0eWxlPSJkaXNwbGF5OiBub25lIiBpZD0iandrc19vcl9qd2tzX3VyaSI+PHRkPjwvdGQ+PHRkPgogICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9Imp3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9uIiBpZD0iandrc19yYWRpb19idXR0b24iIHR5cGU9InJhZGlvIiB2YWx1ZT0iandrcyI+IGp3a3M8YnI+CiAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0iandrc19vcl9qd2tzX3VyaV9yYWRpb19idXR0b24iIGlkPSJqd2tzX3VyaV9yYWRpb19idXR0b24iIHR5cGU9InJhZGlvIiB2YWx1ZT0iandrc191cmkiPiBqd2tzX3VyaQoJCQk8L3RkPjwvdHI+CiAgICAgICAgICAgIDx0ciBzdHlsZT0iZGlzcGxheTogbm9uZSIgaWQ9Imp3a3Nfcm93Ij48dGQ+SldLczxici8+KE1VU1QgYmUgSlNPTik8L3RkPjx0ZD48dGV4dGFyZWEgbmFtZT0iandrcyIgaWQ9Imp3a3MiIGNvbHM9IjUwIiByb3dzPSIxMCI+PC90ZXh0YXJlYT48L3RkPjwvdHI+CiAgICAgICAgICAgIDx0ciBzdHlsZT0iZGlzcGxheTogbm9uZSIgaWQ9Imp3a3NfdXJpX3JvdyI+PHRkPkpXS3MgVVJJPC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9Imp3a3NfdXJpIiBpZD0iandrc191cmkiICBjb2xzPSI1MCIgcm93cz0iMiI+PC90ZXh0YXJlYT48L3RkPjwvdHI+CgkJCTx0ciBzdHlsZT0iZGlzcGxheTogbm9uZSIgaWQ9InBraV9uYW1lX3JvdyI+PHRkPlBLSSBOYW1lPC90ZD48dGQ+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG5hbWU9InBraV9uYW1lIiBpZD0icGtpX25hbWUiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRsc19jbGllbnRfYXV0aF9zdWJqZWN0X2RuIj5TdWJqZWN0IEROPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idGxzX2NsaWVudF9hdXRoX3Nhbl9kbnMiPlNBTiBETlM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0bHNfY2xpZW50X2F1dGhfc2FuX3VyaSI+U0FOIFVSSTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRsc19jbGllbnRfYXV0aF9zYW5faXAiPlNBTiBJUDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRsc19jbGllbnRfYXV0aF9zYW5fZW1haWwiPlNBTiBFbWFpbDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+PC90cj4KCQkJPHRyIHN0eWxlPSJkaXNwbGF5OiBub25lIiBpZD0icGtpX3ZhbHVlX3JvdyI+PHRkPlBLSSBWYWx1ZSA8L3RkPjx0ZD48dGV4dGFyZWEgbmFtZT0icGtpX3ZhbHVlIiBpZD0icGtpX3ZhbHVlIiAgY29scz0iNTAiIHJvd3M9IjIiPjwvdGV4dGFyZWE+PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPlttYWddIE1hc3RlciBLZXk8L3RkPjx0ZD48aW5wdXQgbmFtZT0ibWFzdGVyIiBpZD0ibWFzdGVyIiB2YWx1ZT0idHJ1ZSIgdHlwZT0iY2hlY2tib3giIG9uY2hhbmdlPSJyZXR1cm4gdG9nZ2xlTWFzdGVyKCk7Ij4gJHttYXN0ZXJfbWVzc2FnZX08L3RkPjwvdHI+CiAgICAgICAgICAgIDx0cj48dGQ+U3RhdHVzPC90ZD48dGQ+PHNlbGVjdCBuYW1lPSJzdGF0dXMiIGNsYXNzPSJpbnB1dC1ibG9jayI+PG9wdGlvbiB2YWx1ZT0iRU5BQkxFRCI+RU5BQkxFRDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkRJU0FCTEVEIj5ESVNBQkxFRDwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5TY29wZTwvdGQ+PHRkPjx0ZXh0YXJlYSBuYW1lPSJzY29wZSIgaWQ9InNjb3BlIiBjb2xzPSI1MCIgcm93cz0iMTAiIG1heGxlbmd0aD0iNDAwMCI+b29iPC90ZXh0YXJlYT48YnI+KHVzZWQgd2l0aCBvYXV0aCAyLjApPC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPkNhbGxiYWNrIFVSTDwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJjYWxsYmFjayIgc2l6ZT0iMTI4IiB2YWx1ZT0ib29iIiAvPiA8YnIvPihpbiBvYXV0aCAyLjAgdGhpcyBpcyBjYWxsZWQgcmVkaXJlY3RfdXJpKTwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5FbnZpcm9ubWVudDwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJlbnZpcm9ubWVudCIgc2l6ZT0iMTI4IiB2YWx1ZT0iQUxMIiAvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5QZXJtaXR0ZWQgUmVzb3VyY2VzPC90ZD48dGQ+PGlucHV0IG5hbWU9InJlc291cmNlIiBzaXplPSIxMjgiIHZhbHVlPSIiIC8+PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPjwvdGQ+PHRkPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBpZD0ic3VibWl0QnV0dG9uIiB0eXBlPSJzdWJtaXQiIHZhbHVlPSJSZWdpc3RlciI+UmVnaXN0ZXI8L2J1dHRvbj4mbmJzcDsKICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgdHlwZT0icmVzZXQiPlJlc2V0PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgcHVsbC1yaWdodCIgdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJoaXN0b3J5LmJhY2soKTsiIHZhbHVlPSJDYW5jZWwiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICA8L3RkPjwvdHI+CiAgICAgICAgPC90YWJsZT4KICAgIDwvZm9ybT4KCjwvZGl2Pgoke2N1c3RvbV9qc30KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Register\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"registered\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"registered\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnNlY3JldH0=\"/>\n                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm1hc3Rlcn0=\"/>\n                    <L7p:VariableToSet stringValue=\"master\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnByaXZpbGVnZWR9\"/>\n                    <L7p:VariableToSet stringValue=\"privileged\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"e30=\"/>\n                    <L7p:VariableToSet stringValue=\"client_custom\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                    <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.fapi_profile}\"/>\n                            <L7p:Expression2 stringValue=\"global\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"global\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${gateway.otk.fapi_advanced.enabled}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"YWR2YW5jZWQ=\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${gateway.otk.fapi_baseline.enabled}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"YmFzZWxpbmU=\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"bm9uZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                            </L7p:SetVariable>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmZhcGlfcHJvZmlsZX0=\"/>\n                        <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//check if fapi_profile if it was set to global\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                            <L7p:Expression2 stringValue=\"none\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"none\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICJub25lIiw=\"/>\n                            <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"f78f0f85-00e2-49b1-95e4-e520df255c9c\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK SCOPE Verification\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"any\"/>\n                                    <L7p:value stringValue=\"true\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"fail\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"scope.granted\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.scope}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"scope.required\"/>\n                                    <L7p:value stringValue=\"openid\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"advanced\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuZmFwaV9wcm9maWxlfSIs\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"baseline\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuZmFwaV9wcm9maWxlfSIs\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"The scope 'openid' has to be added when fapi_profile is set as baseline or advanced\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"425\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"425\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//reset fapi_profile to none for non openid registrations\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:Expression1 stringValue=\"${privileged}\"/>\n                        <L7p:Expression2 stringValue=\"true\"/>\n                        <L7p:Negate booleanValue=\"true\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:Negated booleanValue=\"true\"/>\n                                <L7p:RightValue stringValue=\"true\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"eyJwcml2aWxlZ2VkIjp0cnVlfQ==\"/>\n                        <L7p:VariableToSet stringValue=\"client_custom\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//add client_custom value from privileged value\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmF1dGhfbWV0aG9kfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                        </L7p:SetVariable>\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"889fb762-51e7-4244-81e4-8eab7393f7de\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK openid token_endpoint_auth_methods_supported\"/>\n                        </L7p:Encapsulated>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:Regex stringValue=\"^&quot;|&quot;$\"/>\n                            <L7p:Replace booleanValue=\"true\"/>\n                            <L7p:Replacement stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:Regex stringValue=\"&quot;,\\s+&quot;\"/>\n                            <L7p:Replace booleanValue=\"true\"/>\n                            <L7p:Replacement stringValue=\",\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:Split>\n                            <L7p:IgnoreEmptyValues booleanValue=\"true\"/>\n                            <L7p:InputVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:OutputVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:SplitPatternRegEx booleanValue=\"false\"/>\n                        </L7p:Split>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_methods_supported}\"/>\n                            <L7p:Expression2 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:MultivaluedComparison multivaluedComparison=\"ANY\"/>\n                            <L7p:Operator operator=\"CONTAINS\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Operator operator=\"CONTAINS\"/>\n                                    <L7p:RightValue stringValue=\"${token_endpoint_auth_method}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given token_endpoint_auth_method\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${request.http.parameter.type}\"/>\n                                <L7p:Expression2 stringValue=\"public\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"public\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:SetVariable>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"default\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                                <L7p:Base64Expression stringValue=\"Y2xpZW50X3NlY3JldF9iYXNpYw==\"/>\n                                <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <wsp:OneOrMore wsp:Usage=\"Required\">\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:Expression1 stringValue=\"${request.http.parameter.fapi_profile}\"/>\n                                    <L7p:Expression2 stringValue=\"global\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"global\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${oauth2_profile.fapi_baseline}\"/>\n                                    <L7p:Expression2 stringValue=\"false\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                </wsp:All>\n                                <L7p:ComparisonAssertion>\n                                    <L7p:Expression1 stringValue=\"${request.http.parameter.fapi_profile}\"/>\n                                    <L7p:Expression2 stringValue=\"baseline\"/>\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:RightValue stringValue=\"baseline\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                            </wsp:OneOrMore>\n                            <L7p:SetVariable>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"default\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                                <L7p:Base64Expression stringValue=\"Y2xpZW50X3NlY3JldF9iYXNpYw==\"/>\n                                <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:AuditDetailAssertion>\n                                <L7p:Detail stringValue=\"Incompatable token endpoint auth method - 'token_endpoint_auth_method'\"/>\n                            </L7p:AuditDetailAssertion>\n                            <L7p:Encapsulated>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"174\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                                <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"174\"/>\n                                    </L7p:entry>\n                                </L7p:Parameters>\n                            </L7p:Encapsulated>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"error if fapi enabled\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:All>\n                    </wsp:OneOrMore>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// set token_endpoint_auth_method\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${master}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9rZXl9\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"private_key_jwt\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"self_signed_tls_client_auth\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"tls_client_auth\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"Y2xpZW50X3NlY3JldF9iYXNpYw==\"/>\n                                <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                            </L7p:SetVariable>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                            <L7p:Expression2 stringValue=\"${client_secret}\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"${client_secret}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"default\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"master\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"private_key_jwt\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9ufQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwk_radio_btn\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3N9\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3NfdXJpfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzfQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// client gave jwks\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks_uri\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks_uri\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzX3VyaX0=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"IiI=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// client gave jwks_uri\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// determine if jwks or jwks_uri will be used\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${jwksOrJwks_uri}\"/>\n                                <L7p:Expression2 stringValue=\"\"/>\n                                <L7p:Negate booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValue=\"jwks/jwk_uri should not be empty when using &quot;private_key_jwt&quot; auth method.\"/>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:Encapsulated>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"fail\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"validate\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check jwks/jwks_uri is not empty if method is &quot;private_key_jwt&quot;\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtqd2tzT3JKd2tzX3VyaX0=\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"hashing_metadata\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// private_key_jwt\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"self_signed_tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9ufQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwk_radio_btn\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3N9\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3NfdXJpfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzfQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks_uri\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks_uri\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzX3VyaX0=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"IiI=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                        </wsp:OneOrMore>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${jwksOrJwks_uri}\"/>\n                                <L7p:Expression2 stringValue=\"\"/>\n                                <L7p:Negate booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValue=\"jwks/jwk_uri should not be empty when using &quot;self_signed_tls_client_auth&quot; auth method.\"/>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:Encapsulated>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"fail\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"validate\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check jwks is not empty if method is &quot;self_signed_tls_client_auth&quot;\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtqd2tzT3JKd2tzX3VyaX0=\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// self_signed_tls_client_auth\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"IiI=\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnBraV9uYW1lfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"pki_name\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnBraV92YWx1ZX0=\"/>\n                            <L7p:VariableToSet stringValue=\"pki_value\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"IiR7cGtpX25hbWV9IjoiJHtwa2lfdmFsdWV9Iiw=\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${pki_param}\"/>\n                                <L7p:Expression2 stringValue=\"\"/>\n                                <L7p:Negate booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValue=\"PKI param should not be empty when using &quot;tls_client_auth&quot; auth method.\"/>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:Encapsulated>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"fail\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"validate\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check pki_parami is not empty if method is &quot;tls_client_auth&quot;\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"eyIke3BraV9uYW1lfSI6IiR7cGtpX3ZhbHVlfSJ9\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// tls_client_auth\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Expression2 stringValue=\"private_key_jwt\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"private_key_jwt\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Expression2 stringValue=\"self_signed_tls_client_auth\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"self_signed_tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Expression2 stringValue=\"tls_client_auth\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// Convert plain text 'secret' to hashed if it is not marked as master key and when CWP 'otk.hashed_secret.enable' set as 'true'\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"eb33b796-a064-48aa-b6f5-d0ebad2bb0b9\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Create Client Secret Hash\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_secret\"/>\n                                    <L7p:value stringValue=\"${client_secret}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master_key_flag\"/>\n                                    <L7p:value stringValue=\"${master}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtjbGllbnRfc2VjcmV0fQ==\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"IiI=\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                            <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// anything else\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// check if it is private_key_jwt or anything else\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.name}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_ident}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${secret_or_jwks}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.org}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"success\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"103\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"check for required parameters\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:Encapsulated>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"c1a7f28d-0941-4458-8a4b-5198f120fad4\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Validate Redirect URI\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"redirect_uris\"/>\n                                <L7p:value stringValue=\"${request.http.parameter.callback}\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"custom\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"114\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//validate redirect uri\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${client_secret_lifetime_m}\"/>\n                            <L7p:Expression2 stringValue=\"0\"/>\n                            <L7p:Operator operator=\"GT\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Operator operator=\"GT\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:DataType variableDataType=\"dateTime\"/>\n                            <L7p:DateOffsetExpression stringValue=\"${client_secret_lifetime_m}\"/>\n                            <L7p:DateOffsetField intValue=\"12\"/>\n                            <L7p:VariableToSet stringValue=\"secretExpirationDate\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtzZWNyZXRFeHBpcmF0aW9uRGF0ZS5zZWNvbmRzfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"secret_expiration\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"MA==\"/>\n                        <L7p:VariableToSet stringValue=\"secret_expiration\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// client secret expiration\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:Encapsulated>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"For an expiration date\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"6dbc70f9-bb40-4a69-a0ec-88fae4f35300\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Generate OAuth Token\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ac\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"art\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"at\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cid\"/>\n                            <L7p:value stringValue=\"true\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cidm\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ock\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ot\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"rft\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"urt\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ew0KICAgImNsaWVudF9pZCI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuY2xpZW50X2lkZW50fSIsDQogICAiY2xpZW50X3NlY3JldCI6ICIiLA0KICAgImNsaWVudF9zZWNyZXRfZXhwaXJlc19hdCI6ICIke2dlbkV4cGlyYXRpb259IiwNCiAgICJjbGllbnRfaWRfaXNzdWVkX2F0Ijoke2dhdGV3YXkudGltZS5zZWNvbmRzfSwNCiAgICJyZWdpc3RyYXRpb25fYWNjZXNzX3Rva2VuIjoNCiAgICAgIiR7YWNjZXNzX3Rva2VufSIsDQogICAicmVnaXN0cmF0aW9uX2NsaWVudF91cmkiOiIiLA0KICAgInRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIjoNCiAgICAgIiR7dG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2R9IiwNCiAgICJ0b2tlbl9lbmRwb2ludF9hdXRoX3NpZ25pbmdfYWxnIjogIiIsDQogICAiYXBwbGljYXRpb25fdHlwZSI6ICIke2FwcGxpY2F0aW9uX3R5cGV9IiwNCiAgICR7ZmFwaV9wcm9maWxlX2ZpZWxkfQ0KICAgInJlZGlyZWN0X3VyaXMiOiBbIiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5jYWxsYmFja30iXSwNCiAgICJjbGllbnRfbmFtZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIubmFtZX0iLA0KICAgInN1YmplY3RfdHlwZSI6ICIke3N1YmplY3RfdHlwZX0iLA0KICAgInNlY3Rvcl9pZGVudGlmaWVyX3VyaSI6IiR7c2VjdG9yX2lkZW50aWZpZXJfdXJpfSIsDQogICAiY29udGFjdHMiOiBbJHtjb250YWN0c31dLA0KICAicmVzcG9uc2VfdHlwZXMiOlske3Jlc3BvbnNlX3R5cGVzfV0sDQogICJncmFudF90eXBlcyI6WyR7Z3JhbnRfdHlwZXN9XSwNCiAgImlkX3Rva2VuX3NpZ25lZF9yZXNwb25zZV9hbGciOiIke2lkX3Rva2VuX3NpZ25pbmdfYWxnb3JpdGhtfSIsDQogICJ1c2VyaW5mb19zaWduZWRfcmVzcG9uc2VfYWxnIjoiIiwNCiAgImVudmlyb25tZW50IjoiJHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmVudmlyb25tZW50fSIsDQogICJvcmdhbml6YXRpb24iOiIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIub3JnfSIsDQogICJtYXN0ZXIiOiR7bWFzdGVyfSwNCiAgImRlc2NyaXB0aW9uIjoiJHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmRlc2NyaXB0aW9ufSIsDQogICJzY29wZSI6IiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5zY29wZX0iLA0KICAicmVzb3VyY2UiOiIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIucmVzb3VyY2V9IiwNCiAgJHtwa2lfcGFyYW19DQogICJqd2tzIjoke2p3a3N9LA0KICAiandrc191cmkiOiIke2p3a3NfdXJpfSINCiAgfQ==\"/>\n                    <L7p:VariableToSet stringValue=\"openid_registration_response\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtvcGVuaWRfcmVnaXN0cmF0aW9uX3Jlc3BvbnNlfQ==\"/>\n                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"client_metadata\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"4c6dab79-310f-48bb-9ec1-3f0e511c5093\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Client Validate Metadata\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_metadata\"/>\n                            <L7p:value stringValue=\"client_metadata\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ew0KICAib3BlbmlkX3JlZ2lzdHJhdGlvbiI6IHsNCiAgICAicmVxdWVzdCI6e30sDQogICAgIm9hdXRoX2NsaWVudCI6dHJ1ZSwNCiAgICAicmVzcG9uc2UiOiR7b3BlbmlkX3JlZ2lzdHJhdGlvbl9yZXNwb25zZX0NCiAgfQ0KfQ==\"/>\n                    <L7p:VariableToSet stringValue=\"openid_registration\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"e7a77c88-f595-4016-8549-5919445ef060\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Persist\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"account_plan_mapping_ids\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"callback\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.callback}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_custom\"/>\n                            <L7p:value stringValue=\"${client_custom}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_name\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.name}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_secret\"/>\n                            <L7p:value stringValue=\"${secret_or_jwks}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_status\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.status}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"clientname\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.name}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"clientstatus\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.status}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"description\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.description}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.environment}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"expiration\"/>\n                            <L7p:value stringValue=\"${genExpiration}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"hashing_metadata\"/>\n                            <L7p:value stringValue=\"hashing_metadata\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"key_custom\"/>\n                            <L7p:value stringValue=\"${openid_registration}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.name}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.org}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"persist_client\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"persist_client_and_key\"/>\n                            <L7p:value stringValue=\"true\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"persist_client_key\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${current.username}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"resource\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.resource}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"scope\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.scope}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.secret}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret_expiration\"/>\n                            <L7p:value stringValue=\"${secret_expiration}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"service_ids\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"status\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.status}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"type\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.type}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${result}\"/>\n                    <L7p:Expression2 stringValue=\"persisted\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:RightValue stringValue=\"persisted\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${show_client_secret}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:HardcodedResponse>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+UmVnaXN0ZXIgYSBOZXcgQ2xpZW50PC9oMT4NCjxwPlRoZSBhcHBsaWNhdGlvbjogJyR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5uYW1lfScgaGFzIHN1Y2Nlc3NmdWxseSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCBzZWNyZXQgJHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnNlY3JldH0gPGJyPjxzcGFuIHN0eWxlPSJjb2xvcjojRkYwMDAwOyIgaWQ9Indhcm5pbmdfbWVzc2FnZSIgPig8Yj5XYXJuaW5nPC9iPjogUGxlYXNlIGVuc3VyZSB0byBtYWtlIGEgY29weSBvZiB0aGUgY2xpZW50IHNlY3JldCk8L3NwYW4+PC9wPg0KPC9kaXY+DQoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                            <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                        </L7p:HardcodedResponse>\n                    </wsp:All>\n                    <L7p:HardcodedResponse>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+UmVnaXN0ZXIgYSBOZXcgQ2xpZW50PC9oMT4NCjxwPlRoZSBhcHBsaWNhdGlvbjogJyR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5uYW1lfScgaGFzIHN1Y2Nlc3NmdWxseSBiZWVuIHJlZ2lzdGVyZWQgPC9wPg0KPC9kaXY+DQoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                        <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                    </L7p:HardcodedResponse>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// check to see if client_secret needs to be displayed\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Registered\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"deleteClient\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"deleteClient\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm5hbWV9\"/>\n                    <L7p:VariableToSet stringValue=\"client_name\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"601c8753-5f9d-4c10-9eb7-c2dd4c8fde99\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Delete\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPGRpdj4KPHA+VGhlIGNsaWVudCBhcHBsaWNhdGlvbiAnJHtjbGllbnRfbmFtZX0nIHdhcyBkZWxldGVkIHN1Y2Nlc3NmdWxseSE8L3A+CjwvZGl2Pgoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Delete client\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"editClient\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"editClient\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"get\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"${offsetValue}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathType\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:type/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathIdent\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_ident/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathDescription\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:description\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathName\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:name\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathOrg\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:organization/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCustomClient\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_custom\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathName.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedName\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathDescription.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedDescription\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathOrg.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedOrg\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aFR5cGUucmVzdWx0fQ==\"/>\n                    <L7p:VariableToSet stringValue=\"clientType\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${clientType}\"/>\n                            <L7p:Expression2 stringValue=\"confidential\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"confidential\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"PG9wdGlvbiB2YWx1ZT0iY29uZmlkZW50aWFsIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPmNvbmZpZGVudGlhbDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9InB1YmxpYyI+cHVibGljPC9vcHRpb24+\"/>\n                            <L7p:VariableToSet stringValue=\"selectedOption\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"PG9wdGlvbiB2YWx1ZT0iY29uZmlkZW50aWFsIj5jb25maWRlbnRpYWw8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJwdWJsaWMiIHNlbGVjdGVkPSJzZWxlY3RlZCI+cHVibGljPC9vcHRpb24+\"/>\n                        <L7p:VariableToSet stringValue=\"selectedOption\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"type\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"set the type, confidential or public\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aEN1c3RvbUNsaWVudC5yZXN1bHR9\"/>\n                    <L7p:VariableToSet stringValue=\"client_custom\"/>\n                </L7p:SetVariable>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgpmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKQp7CiAgICB2YXIgYWxlcnRNZXNzYWdlID0gJyc7CiAgICB2YXIgY2xpZW50TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuYW1lIikudmFsdWU7CiAgICB2YXIgY2xpZW50T3JnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9yZyIpLnZhbHVlOwogICAgaWYoY2xpZW50TmFtZSA9PSBudWxsIHx8IGNsaWVudE5hbWUucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAiIikubGVuZ3RoPT0wKQogICAgewogICAgYWxlcnRNZXNzYWdlID0gJ1BsZWFzZSBwcm92aWRlIGEgQ2xpZW50IE5hbWVcbic7CiAgICB9CmlmKGNsaWVudE9yZyA9PSBudWxsIHx8IGNsaWVudE9yZy5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKS5sZW5ndGg9PTApCiAgICB7CiAgICAgICAgYWxlcnRNZXNzYWdlID0gYWxlcnRNZXNzYWdlICsgJ1BsZWFzZSBwcm92aWRlIGFuIE9yZ2FuaXphdGlvblxuJzsKICAgICAgICB9CmlmIChhbGVydE1lc3NhZ2UubGVuZ3RoID4gMCkKICAgIHsKICAgICAgICBhbGVydChhbGVydE1lc3NhZ2UpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CmVsc2UKcmV0dXJuIGNvbmZpcm0oIkRvIHlvdSByZWFsbHkgd2FudCB0byB1cGRhdGUgdGhlIGNsaWVudCBhcHBsaWNhdGlvbiAnJHtlc2NhcGVkTmFtZX0nPyIpOwp9Cjwvc2NyaXB0Pgo8ZGl2PgogICAgPGgxPkVkaXQgQ2xpZW50PC9oMT4KICAgIDxwPkZpbGwgb3V0IHRoZSBmb3JtIHRvIGVkaXQgdGhlIGNsaWVudCBhcHBsaWNhdGlvbi48L3A+CiAgICA8Zm9ybSBhY3Rpb249IiR7dGhpcy5hcHAudXJsfT9zdGF0ZT11cGRhdGVDbGllbnQiIG1ldGhvZD0iUE9TVCIgZW5jdHlwZT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiBpZD0idXBkYXRlQ2xpZW50IiBvbnN1Ym1pdD0icmV0dXJuIHZhbGlkYXRlRm9ybSgpIj4KICAgICAgICA8aW5wdXQgbmFtZT0iY2xpZW50X2lkZW50IiBpZD0iY2xpZW50X2lkZW50IiB0eXBlPSJoaWRkZW4iIHZhbHVlPSIke3hwYXRoSWRlbnQucmVzdWx0fSIvPgogICAgICAgIDxpbnB1dCBuYW1lPSJzeW5jaFRva2VuIiB0eXBlPSJoaWRkZW4iIHZhbHVlPSIke3N5bmNoVG9rZW59IiAvPgogICAgICAgIDx0YWJsZSBjbGFzcz0idGFibGUtZm9ybSIgbmFtZT0idmFsdWVzIj4KICAgICAgICAgICAgPHRyPjx0ZD5DbGllbnQgTmFtZTwvdGQ+PHRkPjxpbnB1dCBpZD0ibmFtZSIgbmFtZT0ibmFtZSIgc2l6ZT0iMTI4IiB2YWx1ZT0iJHtlc2NhcGVkTmFtZX0iLz48L3RkPjwvdHI+CiAgICAgICAgICAgIDx0cj48dGQ+T3JnYW5pemF0aW9uPC90ZD48dGQ+PGlucHV0IG5hbWU9Im9yZyIgaWQ9Im9yZyIgdHlwZT0idGV4dCIgc2l6ZT0iMTI4IiB2YWx1ZT0iJHtlc2NhcGVkT3JnfSIvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5EZXNjcmlwdGlvbjwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJkZXNjcmlwdGlvbiIgaWQ9ImRlc2NyaXB0aW9uIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iJHtlc2NhcGVkRGVzY3JpcHRpb259IiBzaXplPSIxMjgiIC8+PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPkNsaWVudCBUeXBlPC90ZD48dGQ+PHNlbGVjdCBuYW1lPSJ0eXBlIj4ke3NlbGVjdGVkT3B0aW9ufTwvc2VsZWN0PjxiciAvPih1c2VkIHdpdGggb2F1dGggMi4wKTwvdGQ+PC90cj4KCSAgICA8dHI+PHRkPkN1c3RvbSBGaWVsZDxici8+KE1VU1QgYmUgSlNPTiBvciBlbXB0eSk8L3RkPjx0ZD48dGV4dGFyZWEgbmFtZT0iY2xpZW50X2N1c3RvbSIgaWQ9ImNsaWVudF9jdXN0b20iIGNvbHM9IjUwIiByb3dzPSIxMCI+JHtjbGllbnRfY3VzdG9tfTwvdGV4dGFyZWE+PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPjwvdGQ+PHRkPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiB0eXBlPSJzdWJtaXQiIGlkPSJzdWJtaXRCdXR0b24iIHZhbHVlPSJVcGRhdGUgQ2xpZW50Ij5VcGRhdGUgQ2xpZW50PC9idXR0b24+Jm5ic3A7CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIHR5cGU9InJlc2V0IiB2YWx1ZT0iUmVzZXQiPlJlc2V0PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgcHVsbC1yaWdodCIgdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJoaXN0b3J5LmJhY2soKTsiIHZhbHVlPSJDYW5jZWwiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgICAgICA8L3RkPjwvdHI+CiAgICAgICAgPC90YWJsZT4KICAgIDwvZm9ybT4KCjwvZGl2Pgoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Edit Client\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"updateClient\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"updateClient\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.name}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_ident}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.org}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"success\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"103\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"check for required parameters\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9jdXN0b219\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"client_custom\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${client_custom.mainpart}\"/>\n                                    <L7p:Expression2 stringValue=\"\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"e30=\"/>\n                                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                    <L7p:DataType variableDataType=\"message\"/>\n                                    <L7p:VariableToSet stringValue=\"client_custom\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"empty\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"set the default value '{}'\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:TrueAssertion>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"use given value\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                            </L7p:TrueAssertion>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"check content\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:JSONSchema>\n                            <L7p:OtherTargetMessageVariable stringValue=\"client_custom\"/>\n                            <L7p:ResourceInfo staticResourceInfo=\"included\">\n                                <L7p:Document stringValueReference=\"inline\"><![CDATA[{\n                \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n                \"title\": \"UpdatedClient\",\n                \"description\": \"Verify that client_custom is a JSON message\",\n                \"type\": \"object\"\n                }]]></L7p:Document>\n                            </L7p:ResourceInfo>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:JSONSchema>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"client_custom\"/>\n                            <L7p:ProceedIfPatternMatches booleanValue=\"false\"/>\n                            <L7p:Regex stringValue=\"[&lt;>]\"/>\n                            <L7p:Replacement stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"success\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"The given field 'client_custom' is not valid JSON: '${client_custom.mainpart}'\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"133\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"133\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Error\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"check custom field\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"Verify that 'client_custom' is either empty or JSON\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"d5c96439-f159-4eea-a411-87922146135e\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Update\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_custom\"/>\n                            <L7p:value stringValue=\"${client_custom.mainpart}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_name\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.name}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom_client\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.custom_client}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"description\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.description}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.org}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"type\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.type}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+RWRpdCBDbGllbnQ8L2gxPg0KPHA+VGhlIGFwcGxpY2F0aW9uOiAnJHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm5hbWV9JyBoYXMgc3VjY2Vzc2Z1bGx5IGJlZW4gdXBkYXRlZDwvcD4NCjwvZGl2Pg0KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Update the client store\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"clientKeys\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"clientKeys\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.filterEnvironment}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.filterStatus}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"getKey\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"${offsetValue}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${lookupUser}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                    <L7p:ContentType stringValue=\"text/xml; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"findDates\"/>\n                </L7p:SetVariable>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathOffset\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/@offset\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCount\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"count(/ns:values/ns:value)\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"\"/>\n                    <L7p:DataType variableDataType=\"dateTime\"/>\n                    <L7p:DateOffsetExpression stringValue=\"\"/>\n                    <L7p:VariableToSet stringValue=\"now\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtub3cuc2Vjb25kc30=\"/>\n                    <L7p:DataType variableDataType=\"int\"/>\n                    <L7p:VariableToSet stringValue=\"currentTime\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aENvdW50LnJlc3VsdH0=\"/>\n                    <L7p:VariableToSet stringValue=\"count\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${count}\"/>\n                        <L7p:Operator operatorNull=\"null\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item dataType=\"included\">\n                                <L7p:Type variableDataType=\"int\"/>\n                            </L7p:item>\n                            <L7p:item binary=\"included\">\n                                <L7p:Operator operator=\"LT\"/>\n                                <L7p:RightValue stringValue=\"1\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathClientKeys\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_key\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:CaptureVar stringValue=\"lastClientKey\"/>\n                            <L7p:IncludeEntireExpressionCapture booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"xpathClientKeys.results\"/>\n                            <L7p:Regex stringValue=\"\\s*([^,]+)\\]$\"/>\n                            <L7p:Replacement stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// sets lastClientKey for pagination if records exist.\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:XslTransformation>\n                    <L7p:Direction intValue=\"-1\"/>\n                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                    <L7p:ResourceInfo staticResourceInfo=\"included\">\n                        <L7p:Document stringValueReference=\"inline\"><![CDATA[<xsl:stylesheet version=\"1.0\" xmlns:ns=\"http://ns.l7tech.com/2012/11/otk-clientstore\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n                <xsl:output method=\"html\"/>\n\n                <xsl:param name=\"this.app.url\"/>\n                <xsl:param name=\"request.http.parameter.client_ident\"/>\n                <xsl:param name=\"offset\"/>\n                <xsl:param name=\"synchToken\"/>\n        <xsl:param name=\"currentTime\"/>\n        \n\n                <xsl:template match=\"/ns:values\">\n                <table border=\"1\" class=\"table-striped table-hover\" id=\"tblResult\" style=\"padding:2px; empty-cells: show;\">\n                <tr style=\"background-color: rgb(216,216,216);\">\n\n                <xsl:choose>\n                <xsl:when test=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                <th>index</th>\n                <xsl:for-each select=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                <th>\n                <xsl:value-of select=\"name()\"/>\n                </th>\n                </xsl:for-each>\n                <th colspan=\"4\">action</th>\n\n                </xsl:when>\n                  <xsl:otherwise>\n                    <td>\n                        <xsl:text>No records found</xsl:text>\n                     </td>\n                  </xsl:otherwise>\n                </xsl:choose>\n                </tr>\n                <xsl:for-each select=\"ns:value[node()]\">\n                <xsl:variable name=\"tempClientKey\" select=\"descendant::node()[local-name()='client_key']\"/>\n                <xsl:variable name=\"tempClientSecret\" select=\"descendant::node()[local-name()='secret']\"/>\n                <tr>\n                <xsl:variable name=\"trPosition\" select=\"position()\"/>\n                <td>\n                <xsl:value-of select=\"@index+number($offset)\"/>\n                </td>\n                <xsl:for-each select=\"descendant::node()[not(name()='')]\">\n                <xsl:choose>\n                <xsl:when test=\"name()='client_key_custom'\">\n                <xsl:variable name=\"nextId\" select=\"concat('custom_value',$trPosition,position())\"/>\n                <td class=\"custom-clickable popup_td\" id=\"{$nextId}\">\n                <div style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;\">\n                <xsl:value-of select=\"text()\"/>\n                </div>\n                </td>\n                </xsl:when>\n                <xsl:when test=\"name()='secret'\">\n                <td class=\"custom-clickable popup_td\" name=\"secret\">\n                <div style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;\">\n                <xsl:value-of select=\"text()\"/>\n                </div>\n                </td>\n                </xsl:when>\n        <xsl:when test=\"name()='client_key'\">\n                <td class=\"custom-clickable popup_td\" name=\"client_key\">\n                <div style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;\">\n                <xsl:value-of select=\"text()\"/>\n                </div>\n                </td>\n                </xsl:when>\n                <xsl:when test=\"name()='scope'\">\n                <td class=\"custom-clickable popup_td\" name=\"scope\">\n                <div style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;\">\n                <xsl:value-of select=\"text()\"/>\n                </div>\n                </td>\n                </xsl:when>\n        <xsl:when test=\"name()='expiration'\">\n           <td class=\"custom-clickable popup_td\" name=\"expiration\">\n           <xsl:choose>\n              <xsl:when test=\"text()!=0\">\n              <xsl:choose>\n                <xsl:when test=\"$currentTime>text()\">\n                <div class=\"date\" style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;background-color:red\">\n                  <xsl:value-of select=\"text()\"/>\n                </div>\n                </xsl:when>\n                <xsl:otherwise>\n                <div class=\"date\" style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;background-color:white\">\n                     <xsl:value-of select=\"text()\"/>\n                </div>            \n                </xsl:otherwise>\n                </xsl:choose>\n              </xsl:when>\n              <xsl:otherwise>\n              <div class=\"date\" style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;background-color:white\">\n                  <xsl:value-of select=\"text()\"/>\n               </div>\n              </xsl:otherwise>\n            </xsl:choose>\n            </td>\n        </xsl:when> \n        <xsl:when test=\"name()='secret_expiration'\">\n          <td class=\"custom-clickable popup_td\" name=\"secret_expiration\">\n          <xsl:choose>\n            <xsl:when test=\"text()!=0\">\n            <xsl:choose>\n              <xsl:when test=\"$currentTime>text()\">\n              <div class=\"date\" style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;background-color:red\">\n                 <xsl:value-of select=\"text()\"/>\n                            </div>\n              </xsl:when>\n              <xsl:otherwise>\n              <div class=\"date\" style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;background-color:white\">\n                 <xsl:value-of select=\"text()\"/>\n              </div>              \n              </xsl:otherwise>\n              </xsl:choose>\n            </xsl:when>\n            <xsl:otherwise>\n            <div class=\"date\" style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;background-color:white\">\n                <xsl:value-of select=\"text()\"/>\n             </div>\n           </xsl:otherwise>\n          </xsl:choose>\n          </td>\n        </xsl:when>\n                <xsl:when test=\"name()='resource'\">\n                <td class=\"custom-clickable popup_td\" name=\"resource\">\n                <div style=\"max-width: 170px; max-height: 100px; word-wrap:break-word; overflow: hidden;\">\n                <xsl:value-of select=\"text()\"/>\n                </div>\n                </td>\n                </xsl:when>\n                <xsl:otherwise>\n                <td style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:otherwise>\n                </xsl:choose>\n                </xsl:for-each>\n                <td>\n        <table id=\"tblActions\" style=\"padding:2px; empty-cells: show; border-spacing: 10px;\">\n                <tr>\n        <td>\n                <form action=\"{$this.app.url}?state=revokeKey\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmRevokeKey('{$tempClientKey}', '{$tempClientSecret}')\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Revoke\">Revoke</button>\n                </form>\n        </td>\n        </tr>\n        \n        <tr>\n        <td>\n                <form action=\"{$this.app.url}?state=editKey\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$request.http.parameter.client_ident}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Edit\">Edit</button>\n                </form>\n        </td>\n        </tr>\n        \n        <tr>\n        <td>\n                <form action=\"{$this.app.url}?state=disableTokens\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmDisableTokens('{$tempClientKey}')\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Disable Tokens\">Disable Tokens</button>\n                </form>\n        </td>\n        </tr>\n        \n        <tr>\n        <td>\n                <form action=\"{$this.app.url}?state=export\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmExport('{$tempClientKey}')\" target=\"_blank\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Export\">Export</button>\n                </form>\n        </td>\n                </tr>\n        \n        <tr>\n        <td>\n                <form action=\"{$this.app.url}?state=updateSecret\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Update Secret\">Update Secret</button>\n                </form>\n        </td>\n                </tr>\n        </table>\n                </td>\n                </tr>\n                </xsl:for-each>\n                </table>\n                </xsl:template>\n\n                </xsl:stylesheet>]]></L7p:Document>\n                    </L7p:ResourceInfo>\n                    <L7p:Target target=\"OTHER\"/>\n                    <L7p:TransformName stringValue=\"\"/>\n                    <L7p:XsltVersion stringValue=\"1.0\"/>\n                </L7p:XslTransformation>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                    <L7p:VariableToSet stringValue=\"toBeReturned\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${count}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"GT\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${dbsystem}\"/>\n                                    <L7p:Expression2 stringValue=\"cassandra\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"cassandra\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRLZXlQYWdlQ2Fzc2FuZHJhKHRoaXMsICdtYW5hZ2VDbGllbnRLZXlzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJyR7bGFzdENsaWVudEtleX0nLCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50S2V5UGFnZUNhc3NhbmRyYSh0aGlzLCAnbWFuYWdlQ2xpZW50S2V5c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICcke2xhc3RDbGllbnRLZXl9JywgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"cassandra\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRLZXlQYWdlKHRoaXMsICdtYW5hZ2VDbGllbnRLZXlzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJHt4cGF0aE9mZnNldC5yZXN1bHR9LCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50S2V5UGFnZSh0aGlzLCAnbWFuYWdlQ2xpZW50S2V5c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICR7eHBhdGhPZmZzZXQucmVzdWx0fSwgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n                                <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                            </L7p:SetVariable>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"\"/>\n                        <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"== CHECK\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// Only return page with navigation buttons if count > 0\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"PGRpdiBpZD0icG9wdXBNb2RhbCIgY2xhc3M9Im1vZGFsRGlhbG9nIj4NCiAgICAgIDxkaXY+DQogICAgICAgICA8ZGl2Pg0KICAgICAgICAgCTx0YWJsZSBjbGFzcz0idGFibGUtZm9ybSI+DQogICAgICAgICAJCTx0Ym9keT4JDQoJCSAgICAgICAgIAk8dHI+DQoJCSAgICAgICAgIAkJPHRkPjxsYWJlbCBpZD0iZmllbGRfbGFiZWwiPlZhbHVlOjwvbGFiZWw+PC90ZD4NCgkJICAgICAgICAgCQk8dGQ+DQoJCSAgICAgICAgIAkJCTx0ZXh0YXJlYSBpZD0nZmllbGRfdGV4dGFyZWEnIG5hbWU9ImZpZWxkX3RleHRhcmVhIiBjb2xzPSI1MCIgcm93cz0iMTAiIHJlYWRvbmx5Pg0KCQkgICAgICAgICAJCQk8L3RleHRhcmVhPg0KCQkgICAgICAgICAJCTwvdGQ+DQoJCSAgICAgICAgIAk8L3RyPg0KCQkgICAgICAgIDwvdGJvZHk+DQoJCSAgICA8L3RhYmxlPg0KICAgICAgICAgPC9kaXY+PGJyIC8+DQogICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IGJ0bi1taW5pIGNsb3NlLWJ0biI+Q2xvc2U8L2J1dHRvbj4gICANCiAgICAgPC9kaXY+DQo8L2Rpdj4NCg0KPHN0eWxlPg0KLm1vZGFsRGlhbG9nIHsNCglkaXNwbGF5OiBub25lOw0KCXBvc2l0aW9uOiBmaXhlZDsNCgl0b3A6IDA7DQoJcmlnaHQ6IDA7DQoJYm90dG9tOiAwOw0KCWxlZnQ6IDA7DQoJYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjUpOw0KCXotaW5kZXg6IDk5OTk5Ow0KCW9wYWNpdHk6IDE7DQp9DQoNCi5tb2RhbERpYWxvZyA+IGRpdiB7DQoJd2lkdGg6IDUwMHB4Ow0KCXBvc2l0aW9uOiByZWxhdGl2ZTsNCgltYXJnaW46IDIwJSBhdXRvOw0KCXBhZGRpbmc6IDE1cHggMTBweCAzMHB4IDEwcHg7DQoJYm9yZGVyLXJhZGl1czogNXB4Ow0KCWJhY2tncm91bmQ6ICNGNUY1Rjg7DQp9DQoNCi5jbG9zZS1idG4gew0KCWZsb2F0OiByaWdodDsNCn0NCg0KLmN1c3RvbS1jbGlja2FibGUgew0KCWN1cnNvcjogcG9pbnRlcjsNCn0NCg0KLmN1c3RvbS1jbGlja2FibGU6aG92ZXIgew0KCWJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4xKTsNCn0NCg0KI2ZpZWxkX3RleHRhcmVhIHsNCgljdXJzb3I6IGRlZmF1bHQ7DQp9DQoNCi5MZWdlbmQtY29sb3JCb3ggew0KICAgIHdpZHRoOiAxcmVtOw0KICAgIGhlaWdodDogMXJlbTsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgYmFja2dyb3VuZC1jb2xvcjogcmVkOw0KfQ0KPC9zdHlsZT4NCg0KPHNjcmlwdD4NCiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgew0KICAgICAgJCgnLmRhdGUnKS5lYWNoKGZ1bmN0aW9uKGksIG9iaikgew0KICAgICAgIHZhciBvcHRpb25zID0geyBob3VyMTI6IGZhbHNlIH07ICAgICAgICANCiAgICAgICBpZihvYmouaW5uZXJUZXh0ICE9PSAnMCcpIHsNCiAgICAgICAgIHZhciBkID0gbmV3IERhdGUoMCkNCiAgICAgICAgIGQuc2V0VVRDU2Vjb25kcyhvYmouaW5uZXJUZXh0KQ0KICAgICAgICAgY29uc3QgZGF5ID0gZC50b0xvY2FsZVN0cmluZygnZGVmYXVsdCcsIHsgZGF5OiAnMi1kaWdpdCcgfSk7DQogICAgICAgICBjb25zdCBtb250aCA9IGQudG9Mb2NhbGVTdHJpbmcoJ2RlZmF1bHQnLCB7IG1vbnRoOiAnMi1kaWdpdCcgfSk7DQogICAgICAgICBjb25zdCB5ZWFyID0gZC50b0xvY2FsZVN0cmluZygnZGVmYXVsdCcsIHsgeWVhcjogJ251bWVyaWMnIH0pOw0KCSAgICBvYmouaW5uZXJUZXh0ID0geWVhciArICctJyArIG1vbnRoICsgJy0nICsgZGF5ICsgJyAnICsgZC50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVLJywgb3B0aW9ucyk7DQogICAgICAgfQ0KICAgICB9KTsNCgkkKCIuY2xvc2UtYnRuIikub24oJ2NsaWNrJyxmdW5jdGlvbigpew0KCSAgICQoIiNmaWVsZF90ZXh0YXJlYSIpLnZhbCgiIik7DQoJICAgJCgiLm1vZGFsRGlhbG9nIikuY3NzKHsNCgkJCSJkaXNwbGF5IjogIm5vbmUiDQoJCX0pOw0KCX0pOw0KDQoJJCgiLnBvcHVwX3RkIikub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7DQoJCXZhciBsYWJlbCA9ICQodGhpcykuYXR0cignbmFtZScpOw0KCQlpZiAobGFiZWwgPT09ICJzZWNyZXQiKSB7DQoJCQlsYWJlbCA9ICJTZWNyZXQ6IjsNCgkJfSBlbHNlIGlmICggbGFiZWwgPT09InNjb3BlIikgew0KCQkJbGFiZWwgPSAiU2NvcGU6IjsNCgkJfSBlbHNlIGlmICggbGFiZWwgPT09ImNsaWVudF9rZXkiKSB7DQoJCQlsYWJlbCA9ICJDbGllbnQgS2V5OiI7DQoJCX0NCgkJZWxzZSB7DQoJCQlsYWJlbCA9ICJDdXN0b206IjsNCgkJfQ0KCQkkKCIjZmllbGRfbGFiZWwiKS5odG1sKGxhYmVsKTsNCg0KCQl2YXIgdmFsdWVUZXh0ID0gJCh0aGlzKS5maW5kKCdkaXYnKS5odG1sKCk7DQoJCXRyeSB7DQoJCQl2YWx1ZVRleHQgPSBKU09OLnN0cmluZ2lmeSgkLnBhcnNlSlNPTih2YWx1ZVRleHQpLCBudWxsLCA0KTsNCgkJCSQoJyNmaWVsZF90ZXh0YXJlYScpLmF0dHIoJ3Jvd3MnLCAnMTAnKTsNCgkJfSANCgkJY2F0Y2ggKGVycikgew0KCQkJJCgnI2ZpZWxkX3RleHRhcmVhJykuYXR0cigncm93cycsICcyJyk7DQoJCX0NCgkJDQoJCSQoIiNmaWVsZF90ZXh0YXJlYSIpLnZhbCh2YWx1ZVRleHQpOw0KCQkkKCIubW9kYWxEaWFsb2ciKS5jc3Moew0KCQkJImRpc3BsYXkiOiAiYmxvY2siDQoJCX0pOw0KCX0pOw0KDQoJLy8gV2hlbiB0aGUgdXNlciBjbGlja3MgYW55d2hlcmUgb3V0c2lkZSBvZiB0aGUgbW9kYWwsIGNsb3NlIGl0DQoJd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgew0KCSAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cE1vZGFsJykpIHsNCgkgICAgICAgICQoIi5tb2RhbERpYWxvZyIpLmNzcyh7DQoJCQkJImRpc3BsYXkiOiAibm9uZSINCgkJCX0pOw0KCSAgICB9DQoJfQ0KfSk7DQo8L3NjcmlwdD4NCg==\"/>\n                    <L7p:VariableToSet stringValue=\"popupModal\"/>\n                </L7p:SetVariable>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxzY3JpcHQ+DQovKiBNdXN0IHJlc2V0IHNlc3Npb24gc3RvcmFnZSBzbyBwcmV2aW91cyBwYWdpbmcgdmFsdWVzIGFyZSBub3QgYXR0ZW1wdGVkIGluIGNhc2Ugb2YgY2hhbmdlcyAqLw0Kc2Vzc2lvblN0b3JhZ2UucGFnZSA9IDANCnNlc3Npb25TdG9yYWdlLmZpcnN0Q2xpZW50SWRlbnRGb3JQYWdlcyA9ICJbXCJcIl0iDQo8L3NjcmlwdD4NCjxkaXYgY2xhc3M9ImNvbnRlbnQiPg0KPGgxPkxpc3QgQ2xpZW50IEtleXM8L2gxPg0KPHA+VGhpcyBpcyBhbiBvdmVydmlldyBvZiBhbGwgcmVnaXN0ZXJlZCBjbGllbnRfa2V5wrRzIGZvciB0aGUgZ2l2ZW4gY2xpZW50IGFwcGxpY2F0aW9uPC9wPg0KJHtmaWx0ZXJzQ2xpZW50S2V5c30NCjxkaXYgaWQ9Im1hbmFnZUNsaWVudEtleXNSZXN1bHQiPg0KICAgICR7cGFnaW5hdGlvbkJ1dHRvbnN9DQogICAgJHt0b0JlUmV0dXJuZWR9DQogICAgJHtwYWdpbmF0aW9uQnV0dG9uc30NCjwvZGl2Pg0KPGZvcm0gYWN0aW9uPSIke3RoaXMuYXBwLnVybH0/c3RhdGU9YWRkS2V5IiBtZXRob2Q9UE9TVCBjbGFzcz0iZm9ybS1hZGQtbmV3Ij4NCgk8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjbGllbnRfaWRlbnQiIHZhbHVlPSIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuY2xpZW50X2lkZW50fSIvPg0KCTxpbnB1dCBuYW1lPSJzeW5jaFRva2VuIiB0eXBlPSJoaWRkZW4iIHZhbHVlPSIke3N5bmNoVG9rZW59IiAvPg0KCTxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5Ij5BZGQgQ2xpZW50IEtleTwvYnV0dG9uPg0KPC9mb3JtPg0KPC9kaXY+DQoke3BvcHVwTW9kYWx9DQo8ZGl2IGNsYXNzPSJMZWdlbmQiPgogICA8c3BhbiBjbGFzcz0iTGVnZW5kLWNvbG9yQm94Ij48L3NwYW4+CiAgIDxzcGFuIGNsYXNzPSJMZWdlbmQtbGFiZWwiPkV4cGlyZWQ8L3NwYW4+CjwvZGl2Pgoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"List client keys\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"clientKeysPagination\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"clientKeysPagination\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${offset}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_ident\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.filterClientId}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"environment\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.filterEnvironment}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"filterStatus\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.filterStatus}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"format\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"name\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"operation\"/>\n                                    <L7p:value stringValue=\"getKey\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"org\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"queryOffset\"/>\n                                    <L7p:value stringValue=\"${offsetValue}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"registered_by\"/>\n                                    <L7p:value stringValue=\"${lookupUser}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                            <L7p:ContentType stringValue=\"text/xml; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"findDates\"/>\n                        </L7p:SetVariable>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathOffset\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/ns:values/@offset\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathCount\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"count(/ns:values/ns:value)\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHt4cGF0aENvdW50LnJlc3VsdH0=\"/>\n                            <L7p:VariableToSet stringValue=\"count\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${count}\"/>\n                                    <L7p:Expression2 stringValue=\"0.0\"/>\n                                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"0.0\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${offset}\"/>\n                                    <L7p:Expression2 stringValue=\"0\"/>\n                                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// count = 0, offset not 0, end of paging so don't render anything\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <wsp:OneOrMore wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${count}\"/>\n                                    <L7p:Expression2 stringValue=\"0.0\"/>\n                                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"0.0\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ResponseXpathAssertion>\n                                    <L7p:VariablePrefix stringValue=\"xpathClientKeys\"/>\n                                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_key\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                    </L7p:XpathExpression>\n                                    </L7p:ResponseXpathAssertion>\n                                    <L7p:Regex>\n                                    <L7p:AutoTarget booleanValue=\"false\"/>\n                                    <L7p:CaptureVar stringValue=\"lastClientKey\"/>\n\n                                    <L7p:IncludeEntireExpressionCapture booleanValue=\"false\"/>\n\n                                    <L7p:OtherTargetMessageVariable stringValue=\"xpathClientKeys.results\"/>\n                                    <L7p:Regex stringValue=\"\\s*([^,]+)\\]$\"/>\n                                    <L7p:Replacement stringValue=\"\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    </L7p:Regex>\n                                    </wsp:All>\n                                    <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// if count 0, don't look for client_key for pagination\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:assertionComment>\n                                </wsp:OneOrMore>\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ResponseXpathAssertion>\n                                    <L7p:VariablePrefix stringValue=\"xpathCount\"/>\n                                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"count(/ns:values/ns:value)+number($offset)\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-tokenstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                    </L7p:XpathExpression>\n                                    </L7p:ResponseXpathAssertion>\n                                    <L7p:XslTransformation>\n                                    <L7p:Direction intValue=\"-1\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                                    <L7p:ResourceInfo staticResourceInfo=\"included\">\n                                    <L7p:Document stringValueReference=\"inline\"><![CDATA[<xsl:stylesheet version=\"1.0\" xmlns:ns=\"http://ns.l7tech.com/2012/11/otk-clientstore\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n                <xsl:output method=\"html\"/>\n\n                <xsl:param name=\"this.app.url\"/>\n                <xsl:param name=\"request.http.parameter.client_ident\"/>\n                <xsl:param name=\"offset\"/>\n                <xsl:param name=\"synchToken\"/>\n\n                <xsl:template match=\"/ns:values\">\n                <table border=\"1\" class=\"table-striped table-hover\" id=\"tblResult\" style=\"padding:2px; empty-cells: show;\">\n                <tr style=\"background-color: rgb(216,216,216);\">\n                <xsl:choose>\n                <xsl:when test=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                <th>index</th>\n                <xsl:for-each select=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                <th>\n                <xsl:value-of select=\"name()\"/>\n                </th>\n                </xsl:for-each>\n                <th colspan=\"4\">action</th>\n                </xsl:when>\n                  <xsl:otherwise>\n                    <td>\n                        <xsl:text>No records found</xsl:text>\n                     </td>\n                  </xsl:otherwise>\n                </xsl:choose>\n                </tr>\n                <xsl:for-each select=\"ns:value[node()]\">\n                <xsl:variable name=\"tempClientKey\" select=\"descendant::node()[local-name()='client_key']\"/>\n                <tr>\n                <xsl:variable name=\"trPosition\" select=\"position()\"/>\n                <td>\n                <xsl:value-of select=\"@index+number($offset)\"/>\n                </td>\n                <xsl:for-each select=\"descendant::node()[not(name()='')]\">\n                <xsl:choose>\n                <xsl:when test=\"name()='client_key_custom'\">\n                <xsl:variable name=\"nextId\" select=\"concat('custom_value',$trPosition,position())\"/>\n                <td id=\"{$nextId}\" style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:when>\n                <xsl:otherwise>\n                <td style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:otherwise>\n                </xsl:choose>\n                </xsl:for-each>\n                <td>\n                <form action=\"{$this.app.url}?state=revokeKey\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmRevokeKey('{$tempClientKey}')\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Revoke\">Revoke</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=editKey\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$request.http.parameter.client_ident}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Edit\">Edit</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=disableTokens\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmDisableTokens('{$tempClientKey}')\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Disable Tokens\">Disable Tokens</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=export\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmExport('{$tempClientKey}')\" target=\"_blank\">\n                <input name=\"client_key\" type=\"hidden\" value=\"{$tempClientKey}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Export\">Export</button>\n                </form>\n                </td>\n                </tr>\n                </xsl:for-each>\n                </table>\n                </xsl:template>\n\n                </xsl:stylesheet>]]></L7p:Document>\n                                    </L7p:ResourceInfo>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TransformName stringValue=\"\"/>\n                                    <L7p:XsltVersion stringValue=\"1.0\"/>\n                                    </L7p:XslTransformation>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"toBeReturned\"/>\n                                    </L7p:SetVariable>\n                                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                                    <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${count}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"GT\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                                    <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${dbsystem}\"/>\n                                    <L7p:Expression2 stringValue=\"cassandra\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n\n                                    <L7p:RightValue stringValue=\"cassandra\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <L7p:SetVariable>\n\n                                    <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRLZXlQYWdlQ2Fzc2FuZHJhKHRoaXMsICdtYW5hZ2VDbGllbnRLZXlzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJyR7bGFzdENsaWVudEtleX0nLCAke2NvdW50fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50S2V5UGFnZUNhc3NhbmRyYSh0aGlzLCAnbWFuYWdlQ2xpZW50S2V5c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICcke2xhc3RDbGllbnRLZXl9JywgJHtjb3VudH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                    </L7p:SetVariable>\n                                    <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n\n                                    <L7p:value stringValue=\"cassandra\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:assertionComment>\n                                    </wsp:All>\n                                    <L7p:SetVariable>\n\n                                    <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRLZXlQYWdlKHRoaXMsICdtYW5hZ2VDbGllbnRLZXlzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJHt4cGF0aE9mZnNldC5yZXN1bHR9LCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50S2V5UGFnZSh0aGlzLCAnbWFuYWdlQ2xpZW50S2V5c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICR7eHBhdGhPZmZzZXQucmVzdWx0fSwgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                    </L7p:SetVariable>\n                                    </wsp:OneOrMore>\n                                    </wsp:All>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                    </L7p:SetVariable>\n                                    </wsp:OneOrMore>\n                                    <L7p:HardcodedResponse>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:Base64ResponseBody stringValue=\"JHtwYWdpbmF0aW9uQnV0dG9uc30KJHt0b0JlUmV0dXJuZWR9DQoke3BhZ2luYXRpb25CdXR0b25zfQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQppZiAoJHt4cGF0aENvdW50LnJlc3VsdH0gPiAke29mZnNldH0gKyByZXN1bHRzUGVyUGFnZSkgew0KICAgIHRvZ2dsZURpc2FibGVkKCduZXh0LXBhZ2UtbGluaycsIGZhbHNlKTsNCn0NCmlmICgke29mZnNldH0gPiAwKSB7DQogICAgdG9nZ2xlRGlzYWJsZWQoJ3ByZXYtcGFnZS1saW5rJywgZmFsc2UpOw0KfQ0KPC9zY3JpcHQ+\"/>\n                                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                                    </L7p:HardcodedResponse>\n                                    <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Update\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Update the existing table only. Do NOT create the full page\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:assertionComment>\n                                </wsp:All>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// standard paging render\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// handle new searches, paging, and edge-cases\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:HardcodedResponse>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPGRpdiBjbGFzcz0iY29udGVudCI+CjxoMT5MaXN0IENsaWVudCBLZXlzPC9oMT4KPHA+VGhpcyBpcyBhbiBvdmVydmlldyBvZiBhbGwgcmVnaXN0ZXJlZCBjbGllbnRfa2V5wrRzIGZvciB0aGUgZ2l2ZW4gY2xpZW50IGFwcGxpY2F0aW9uPC9wPgoke2ZpbHRlcnNDbGllbnRLZXlzfQo8ZGl2IGlkPSJtYW5hZ2VDbGllbnRLZXlzUmVzdWx0Ij4KICAgIDxkaXYgY2xhc3M9InBhZ2luYXRpb24iPgogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRLZXlQYWdlKHRoaXMsICdtYW5hZ2VDbGllbnRLZXlzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJHt4cGF0aE9mZnNldC5yZXN1bHR9LCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4KICAgICAgICAgICAgPGkgY2xhc3M9Imljb24tcG9ydGFsLWFycm93LWxlZnQiPjwvaT4gUHJldgogICAgICAgIDwvc3Bhbj4KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50S2V5UGFnZSh0aGlzLCAnbWFuYWdlQ2xpZW50S2V5c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICR7eHBhdGhPZmZzZXQucmVzdWx0fSwgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+CiAgICAgICAgICAgIE5leHQgPGkgY2xhc3M9Imljb24tcG9ydGFsLWFycm93LXJpZ2h0Ij48L2k+CiAgICAgICAgPC9zcGFuPgogICAgPC9kaXY+CiAgICAke3RvQmVSZXR1cm5lZH0KICAgIDxkaXYgY2xhc3M9InBhZ2luYXRpb24iPgogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRLZXlQYWdlKHRoaXMsICdtYW5hZ2VDbGllbnRLZXlzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJHt4cGF0aE9mZnNldC5yZXN1bHR9LCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4KICAgICAgICAgICAgPGkgY2xhc3M9Imljb24tcG9ydGFsLWFycm93LWxlZnQiPjwvaT4gUHJldgogICAgICAgIDwvc3Bhbj4KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50S2V5UGFnZSh0aGlzLCAnbWFuYWdlQ2xpZW50S2V5c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICR7eHBhdGhPZmZzZXQucmVzdWx0fSwgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+CiAgICAgICAgICAgIE5leHQgPGkgY2xhc3M9Imljb24tcG9ydGFsLWFycm93LXJpZ2h0Ij48L2k+CiAgICAgICAgPC9zcGFuPgogICAgPC9kaXY+CjwvZGl2Pgo8Zm9ybSBhY3Rpb249IiR7dGhpcy5hcHAudXJsfT9zdGF0ZT1hZGRLZXkiIG1ldGhvZD1QT1NUIGNsYXNzPSJmb3JtLWFkZC1uZXciPiAgICAgICAKCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImNsaWVudF9pZGVudCIgdmFsdWU9IiR7eHBhdGhJZGVudC5yZXN1bHR9Ii8+Cgk8aW5wdXQgbmFtZT0ic3luY2hUb2tlbiIgdHlwZT0iaGlkZGVuIiB2YWx1ZT0iJHtzeW5jaFRva2VufSIgLz4KCTxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5Ij5BZGQgQ2xpZW50IEtleTwvYnV0dG9uPgo8L2Zvcm0+CjwvZGl2Pgoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                        <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                    </L7p:HardcodedResponse>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                            <L7p:value stringValue=\"clientKeys\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Branch after hitting 'Load prev - next page'\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"clientPagination\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"clientPagination\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${offset}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_ident\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"environment\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"filterStatus\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"format\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"name\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"operation\"/>\n                                    <L7p:value stringValue=\"get\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"org\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"queryOffset\"/>\n                                    <L7p:value stringValue=\"${offsetValue}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"registered_by\"/>\n                                    <L7p:value stringValue=\"${lookupUser}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                            <L7p:ContentType stringValue=\"text/xml; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"findDates\"/>\n                        </L7p:SetVariable>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathOffset\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/ns:values/@offset\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpathCount\"/>\n                            <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"count(/ns:values/ns:value)\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// don't redraw if next client page is empty\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${xpathCount.result}\"/>\n                                <L7p:Expression2 stringValue=\"0.0\"/>\n                                <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"0.0\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ResponseXpathAssertion>\n                                    <L7p:VariablePrefix stringValue=\"xpathClientIdents\"/>\n                                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_ident\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                    </L7p:XpathExpression>\n                                </L7p:ResponseXpathAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHt4cGF0aENvdW50LnJlc3VsdH0=\"/>\n                                    <L7p:VariableToSet stringValue=\"count\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHt4cGF0aENsaWVudElkZW50cy5yZXN1bHR9\"/>\n                                    <L7p:VariableToSet stringValue=\"firstClientIdent\"/>\n                                </L7p:SetVariable>\n                                <L7p:Regex>\n                                    <L7p:AutoTarget booleanValue=\"false\"/>\n                                    <L7p:CaptureVar stringValue=\"lastClientIdent\"/>\n                                    <L7p:IncludeEntireExpressionCapture booleanValue=\"false\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"xpathClientIdents.results\"/>\n                                    <L7p:Regex stringValue=\"\\s*([^,]+)\\]$\"/>\n                                    <L7p:Replacement stringValue=\"\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                </L7p:Regex>\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ResponseXpathAssertion>\n                                    <L7p:VariablePrefix stringValue=\"xpathCount\"/>\n                                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"count(/ns:values/ns:value)+number($offset)\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-tokenstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                    </L7p:XpathExpression>\n                                    </L7p:ResponseXpathAssertion>\n                                    <L7p:XslTransformation>\n                                    <L7p:Direction intValue=\"-1\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"resp\"/>\n                                    <L7p:ResourceInfo staticResourceInfo=\"included\">\n                                    <L7p:Document stringValueReference=\"inline\"><![CDATA[<xsl:stylesheet version=\"1.0\" xmlns:ns=\"http://ns.l7tech.com/2012/11/otk-clientstore\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n                <xsl:output method=\"html\"/>\n\n                <xsl:param name=\"this.app.url\"/>\n                <xsl:param name=\"offset\"/>\n                <xsl:param name=\"synchToken\"/>\n\n                <xsl:template match=\"/ns:values\">\n                <table border=\"1\" class=\"table-striped table-hover\" id=\"tblResult\" style=\"padding:2px; empty-cells: show; overflow: hidden;\">\n                <tr style=\"background-color: rgb(216,216,216);\">\n\n                <xsl:choose>\n                <xsl:when test=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n\n                <th>index</th>\n                <xsl:for-each select=\"ns:value[1][node()]/descendant::node()[not(name()='')]\">\n                <th>\n                <xsl:value-of select=\"name()\"/>\n                </th>\n                </xsl:for-each>\n                <th colspan=\"3\">action</th>\n\n                </xsl:when>\n                  <xsl:otherwise>\n                    <td>\n                        <xsl:text>No records found</xsl:text>\n                     </td>\n                  </xsl:otherwise>\n                </xsl:choose>\n                </tr>\n                <xsl:for-each select=\"ns:value[node()]\">\n                <xsl:variable name=\"tempClientName\" select=\"descendant::node()[local-name()='name']\"/>\n                <xsl:variable name=\"tempClientIdent\" select=\"descendant::node()[local-name()='client_ident']\"/>\n                <tr>\n                <xsl:variable name=\"trPosition\" select=\"position()\"/>\n                <td>\n                <xsl:value-of select=\"@index+number($offset)\"/>\n                </td>\n                <xsl:for-each select=\"descendant::node()[not(name()='')]\">\n                <xsl:choose>\n                <xsl:when test=\"name()='client_custom'\">\n                <xsl:variable name=\"nextId\" select=\"concat('custom_value',$trPosition,position())\"/>\n                <td id=\"{$nextId}\" style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:when>\n                <xsl:otherwise>\n                <td style=\"max-width: 170px; word-wrap:break-word\">\n                <xsl:value-of select=\"text()\"/>\n                </td>\n                </xsl:otherwise>\n                </xsl:choose>\n                </xsl:for-each>\n                <td>\n                <form action=\"{$this.app.url}?state=deleteClient\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\" onsubmit=\"return confirmDelete('{$tempClientName}')\">\n                <input name=\"name\" type=\"hidden\" value=\"{$tempClientName}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Delete\">Delete</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=editClient\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"name\" type=\"hidden\" value=\"{$tempClientName}\"/>\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"Edit\">Edit</button>\n                </form>\n                </td>\n                <td>\n                <form action=\"{$this.app.url}?state=clientKeys\" enctype=\"application/x-www-form-urlencoded\" method=\"POST\">\n                <input name=\"client_ident\" type=\"hidden\" value=\"{$tempClientIdent}\"/>\n                <input name=\"synchToken\" type=\"hidden\" value=\"{$synchToken}\"/>\n                <button class=\"btn btn-primary btn-mini\" type=\"submit\" value=\"List Keys\">List Keys</button>\n                </form>\n                </td>\n                </tr>\n                </xsl:for-each>\n                </table>\n                </xsl:template>\n\n                </xsl:stylesheet>]]></L7p:Document>\n                                    </L7p:ResourceInfo>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TransformName stringValue=\"\"/>\n                                    <L7p:XsltVersion stringValue=\"1.0\"/>\n                                    </L7p:XslTransformation>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtyZXNwLm1haW5wYXJ0fQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"toBeReturned\"/>\n                                    </L7p:SetVariable>\n                                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                                    <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${count}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"GT\"/>\n                                    <L7p:RightValue stringValue=\"0\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                                    <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${dbsystem}\"/>\n                                    <L7p:Expression2 stringValue=\"cassandra\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n\n                                    <L7p:RightValue stringValue=\"cassandra\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <L7p:SetVariable>\n\n                                    <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRQYWdlQ2Fzc2FuZHJhKHRoaXMsICdtYW5hZ2VDbGllbnRzUmVzdWx0JywgJyR7b2Zmc2V0fScsICcke2xhc3RDbGllbnRJZGVudH0nLCAke2NvdW50fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50UGFnZUNhc3NhbmRyYSh0aGlzLCAnbWFuYWdlQ2xpZW50c1Jlc3VsdCcsICcke29mZnNldH0nLCAnJHtsYXN0Q2xpZW50SWRlbnR9JywgJHtjb3VudH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                    </L7p:SetVariable>\n                                    <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n\n                                    <L7p:value stringValue=\"cassandra\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:assertionComment>\n                                    </wsp:All>\n                                    <L7p:SetVariable>\n\n                                    <L7p:Base64Expression stringValue=\"PGRpdiBjbGFzcz0icGFnaW5hdGlvbiIgJHtjYXNzYW5kcmFTdHlsZX0+DQogICAgICAgIDxzcGFuIGNsYXNzPSJwcmV2LXBhZ2UtbGluayBkaXNhYmxlZCIgb25jbGljaz0ibG9hZFByZXZDbGllbnRQYWdlKHRoaXMsICdtYW5hZ2VDbGllbnRzUmVzdWx0JywgKCgnJHtvZmZzZXR9JyA9PSAnJykgPyAwIDogcGFyc2VJbnQoJyR7b2Zmc2V0fScpKSwgJHt4cGF0aE9mZnNldC5yZXN1bHR9LCAke3hwYXRoQ291bnQucmVzdWx0fSk7Ij4NCiAgICAgICAgICAgIDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1sZWZ0Ij48L2k+IFByZXYNCiAgICAgICAgPC9zcGFuPg0KICAgICAgICA8c3BhbiBjbGFzcz0ibmV4dC1wYWdlLWxpbmsgZGlzYWJsZWQiIG9uY2xpY2s9ImxvYWROZXh0Q2xpZW50UGFnZSh0aGlzLCAnbWFuYWdlQ2xpZW50c1Jlc3VsdCcsICgoJyR7b2Zmc2V0fScgPT0gJycpID8gMCA6IHBhcnNlSW50KCcke29mZnNldH0nKSksICR7eHBhdGhPZmZzZXQucmVzdWx0fSwgJHt4cGF0aENvdW50LnJlc3VsdH0pOyI+DQogICAgICAgICAgICBOZXh0IDxpIGNsYXNzPSJpY29uLXBvcnRhbC1hcnJvdy1yaWdodCI+PC9pPg0KICAgICAgICA8L3NwYW4+DQogICAgPC9kaXY+\"/>\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                    </L7p:SetVariable>\n                                    </wsp:OneOrMore>\n                                    </wsp:All>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"paginationButtons\"/>\n                                    </L7p:SetVariable>\n                                    </wsp:OneOrMore>\n                                    <L7p:HardcodedResponse>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:Base64ResponseBody stringValue=\"JHtwYWdpbmF0aW9uQnV0dG9uc30KJHt0b0JlUmV0dXJuZWR9DQoke3BhZ2luYXRpb25CdXR0b25zfQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQppZiAoJHt4cGF0aENvdW50LnJlc3VsdH0gPiAke29mZnNldH0gKyByZXN1bHRzUGVyUGFnZSkgew0KICAgIHRvZ2dsZURpc2FibGVkKCduZXh0LXBhZ2UtbGluaycsIGZhbHNlKTsNCn0NCmlmICgke29mZnNldH0gPiAwKSB7DQogICAgdG9nZ2xlRGlzYWJsZWQoJ3ByZXYtcGFnZS1saW5rJywgZmFsc2UpOw0KfQ0KPC9zY3JpcHQ+\"/>\n                                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                                    </L7p:HardcodedResponse>\n                                    <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Update\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Update the existing table only. Do NOT create the full page\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:assertionComment>\n                                </wsp:All>\n                            </wsp:All>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:HardcodedResponse>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPGRpdiBjbGFzcz0iY29udGVudCI+CiA8aDE+TWFuYWdlIENsaWVudHM8L2gxPgogPHA+VGhpcyBpcyBhbiBvdmVydmlldyBvZiBhbGwgcmVnaXN0ZXJlZCBjbGllbnQgYXBwbGljYXRpb25zPC9wPgogJHtmaWx0ZXJzQ2xpZW50c30KPGRpdiBpZD0ibWFuYWdlQ2xpZW50c1Jlc3VsdCI+CiAgICAke3BhZ2luYXRpb25CdXR0b25zfQogICAgJHt0b0JlUmV0dXJuZWR9CiAgICAke3BhZ2luYXRpb25CdXR0b25zfQo8L2Rpdj4KPGJyLz4KIDxmb3JtIGFjdGlvbj0iJHt0aGlzLmFwcC51cmx9IiBtZXRob2Q9UE9TVCBjbGFzcz0iZm9ybS1hZGQtbmV3Ij4KICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJzdGF0ZSIgdmFsdWU9InJlZ2lzdGVyIi8+CiAgPGlucHV0IG5hbWU9InN5bmNoVG9rZW4iIHR5cGU9ImhpZGRlbiIgdmFsdWU9IiR7c3luY2hUb2tlbn0iIC8+CiAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPlJlZ2lzdGVyIGEgTmV3IENsaWVudDwvYnV0dG9uPgogPC9mb3JtPgo8L2Rpdj4KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                        <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                    </L7p:HardcodedResponse>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                            <L7p:value stringValue=\"clients\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Branch after hitting 'Load prev - next page'\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"revokeKey\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"revokeKey\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9rZXl9\"/>\n                    <L7p:VariableToSet stringValue=\"client_key\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtnYXRld2F5Lm90ay50b2tlbl9yZXZvY2F0aW9uX2xpc3QuZW5hYmxlZH0=\"/>\n                    <L7p:VariableToSet stringValue=\"token_revocation_list_enabled\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:Regex>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"client_key REGX\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Client key's character must only match a single character present in the list below [a-zA-Z0-9-]\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:AutoTarget booleanValue=\"false\"/>\n                        <L7p:OtherTargetMessageVariable stringValue=\"client_key\"/>\n                        <L7p:Regex stringValue=\"^[a-zA-Z0-9-]*$\"/>\n                        <L7p:RegexName stringValue=\"Validate client_key\"/>\n                        <L7p:Replacement stringValue=\"\"/>\n                        <L7p:Target target=\"OTHER\"/>\n                    </L7p:Regex>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"103\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"XSS Check for client_key\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"If the client_key does not pass the XSS check, OTK fails with error message.\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"9185d43a-c025-4783-b013-12982929a19c\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Token Revocation\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"resource_owner\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"rtoken\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"token\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"fbadc45a-39cc-4c0b-b18a-9e2eb583ac1b\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Revoke Key\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${client_key}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+UmV2b2tlIENsaWVudCBLZXk8L2gxPg0KPHA+VGhlIGNsaWVudF9rZXkgJyR7Y2xpZW50X2tleX0nIHdhcyBzdWNjZXNzZnVsbHkgcmV2b2tlZCE8L3A+DQo8L2Rpdj4NCiR7d2Vic2l0ZV9ib3R0b219\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Revoke client_key\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"addKey\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"addKey\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"get\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathClientType\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:type/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"6dbc70f9-bb40-4a69-a0ec-88fae4f35300\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Generate OAuth Token\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ac\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"art\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"at\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cid\"/>\n                            <L7p:value stringValue=\"true\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cidm\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ock\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ot\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"rft\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"urt\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"PHNjcmlwdD4NCiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkgew0KIA0KIAkkKCcjYXV0aF9tZXRob2QnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7DQogIAlpZiggJCh0aGlzKS52YWwoKSA9PSAicHJpdmF0ZV9rZXlfand0Iikgew0KICAgICAgJCgnI3NlY3JldCcpLnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsNCiAgICAgICQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgJCgnI3BraV9uYW1lX3JvdycpLmhpZGUoKTsNCgkgICQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCiAgICAgICQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfSBlbHNlIGlmKCAkKHRoaXMpLnZhbCgpID09ICJzZWxmX3NpZ25lZF90bHNfY2xpZW50X2F1dGgiKSB7DQogICAgICAkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgJCgnI2p3a3Nfb3Jfandrc191cmknKS5zaG93KCk7DQoJICAkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAkKCcjandrc19yb3cnKS5oaWRlKCk7DQogICAgICAkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9IGVsc2UgaWYoICQodGhpcykudmFsKCkgPT0gInRsc19jbGllbnRfYXV0aCIpIHsNCgkgICQoJyNwa2lfbmFtZV9yb3cnKS5zaG93KCk7DQoJICAkKCcjcGtpX3ZhbHVlX3JvdycpLnNob3coKTsNCiAgICAgICQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7DQoJICAkKCcjandrc19yYWRpb19idXR0b24nKS5wcm9wKCAiY2hlY2tlZCIsIGZhbHNlICk7DQogICAgICAkKCcjandrc191cmlfcmFkaW9fYnV0dG9uJykucHJvcCggImNoZWNrZWQiLCBmYWxzZSApOw0KCSAgJCgnI2p3a3Nfb3Jfandrc191cmknKS5oaWRlKCk7DQoJICAkKCcjandrc19yb3cnKS5oaWRlKCk7DQoJICAkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KCSAgJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9IGVsc2UgeyAgICAgICANCiAgICAgICQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCBmYWxzZSApOw0KICAgICAgJCgnI2p3a3NfcmFkaW9fYnV0dG9uJykucHJvcCggImNoZWNrZWQiLCBmYWxzZSApOw0KICAgICAgJCgnI2p3a3NfdXJpX3JhZGlvX2J1dHRvbicpLnByb3AoICJjaGVja2VkIiwgZmFsc2UgKTsNCiAgICAgICQoJyNqd2tzX29yX2p3a3NfdXJpJykuaGlkZSgpOw0KICAgICAgJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCgkgICQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAkKCcjcGtpX3ZhbHVlX3JvdycpLmhpZGUoKTsNCgkgICQoJyN3YXJuaW5nX21lc3NhZ2UnKS5zaG93KCk7DQogICAgfQ0KICB9KTsNCg0KICAgICQod2luZG93KS5iaW5kKCJsb2FkIiwgZnVuY3Rpb24oKSB7DQogICAgCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSAke29hdXRoMl9wcm9maWxlLmZhcGlfYmFzZWxpbmV9Ow0KICAgICB2YXIgaXNGYXBpQWR2YW5jZWRFbmFibGVkID0gJHtvYXV0aDJfcHJvZmlsZS5mYXBpX2FkdmFuY2VkfTsNCiAgICBpZiAoaXNGYXBpQmFzZWxpbmVFbmFibGVkKSB7DQogICAgICAgJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2Jhc2ljXSIpLnJlbW92ZSgpOw0KCSAgJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQogICAgfQ0KICAgIGlmIChpc0ZhcGlBZHZhbmNlZEVuYWJsZWQpIHsNCiAgICAgICAkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfand0XSIpLnJlbW92ZSgpOw0KICAgICAgICQoIiNhdXRoX21ldGhvZCIpLmNoYW5nZSgpOyAgICAgIA0KICAgIH0NCiAgfSk7DQogIA0KICAgJCgiaW5wdXRbbmFtZSQ9J2p3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9uJ10iKS5jaGFuZ2UoZnVuY3Rpb24oKSB7DQoJCXZhciB2YWx1ZSA9ICQodGhpcykudmFsKCk7DQogICAgaWYgKHZhbHVlID09ICdqd2tzJykgew0KICAgICAgJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCiAgICAgICQoJyNqd2tzX3JvdycpLnNob3coKTsNCiAgICB9ZWxzZSBpZiAodmFsdWUgPT0gJ2p3a3NfdXJpJykgew0KICAgICAgJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgJCgnI2p3a3NfdXJpX3JvdycpLnNob3coKTsNCiAgICB9DQogIH0pOw0KICAkKCcjZmFwaV9wcm9maWxlJykuY2hhbmdlKGZ1bmN0aW9uKCkgew0KICAgICB2YXIgY2xpZW50X3R5cGUgPSAnJHt4cGF0aENsaWVudFR5cGUucmVzdWx0fSc7DQogICAgIHZhciBmYXBpX3Byb2ZpbGUgPSAkKHRoaXMpLnZhbCgpOw0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdiYXNlbGluZScpew0KICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSB0cnVlOw0KICAJCXZhciBpc0ZhcGlBZHZhbmNlZEVuYWJsZWQgPSBmYWxzZTsNCiAgICAgfQ0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdhZHZhbmNlZCcpew0KICAJCXZhciBpc0ZhcGlBZHZhbmNlZEVuYWJsZWQgPSB0cnVlOw0KICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSBmYWxzZTsNCiAgICAgfQ0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdub25lJyl7DQogIAkJdmFyIGlzRmFwaUFkdmFuY2VkRW5hYmxlZCA9IGZhbHNlOw0KICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSBmYWxzZTsNCiAgICAgfQ0KICAgICBpZiAoZmFwaV9wcm9maWxlID09ICdnbG9iYWwnKXsNCiAgICAJCXZhciBpc0ZhcGlCYXNlbGluZUVuYWJsZWQgPSAke29hdXRoMl9wcm9maWxlLmZhcGlfYmFzZWxpbmV9Ow0KCSAgICAgdmFyIGlzRmFwaUFkdmFuY2VkRW5hYmxlZCA9ICR7b2F1dGgyX3Byb2ZpbGUuZmFwaV9hZHZhbmNlZH07IA0KICAgIAl9DQogICAgIGlmICghaXNGYXBpQmFzZWxpbmVFbmFibGVkIHx8ICFpc0ZhcGlBZHZhbmNlZEVuYWJsZWQpIHsNCiAgICAgICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9iYXNpY10iKS5yZW1vdmUoKTsNCiAgICAgICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9wb3N0XSIpLnJlbW92ZSgpOw0KICAgICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2p3dF0iKS5yZW1vdmUoKTsNCiAgICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoUG9zdCknLCAnY2xpZW50X3NlY3JldF9wb3N0JykpOw0KICAgICAgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChCYXNpYyknLCAnY2xpZW50X3NlY3JldF9iYXNpYycpKTsNCiAgICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCiAgICAgICAgCSQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7DQogICAgICAgIAkkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgIAkkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgIH0gDQogICAgCQ0KICAgIGlmIChjbGllbnRfdHlwZSA9PSAnY29uZmlkZW50aWFsJyAmJiBpc0ZhcGlCYXNlbGluZUVuYWJsZWQpIHsNCgkgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2Jhc2ljXSIpLnJlbW92ZSgpOw0KCSAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfcG9zdF0iKS5yZW1vdmUoKTsNCgkgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2p3dF0iKS5yZW1vdmUoKTsNCgkgICAJJCgnI2F1dGhfbWV0aG9kJykucHJlcGVuZChuZXcgT3B0aW9uKCdDbGllbnQgU2VjcmV0IChKV1QpJywgJ2NsaWVudF9zZWNyZXRfand0JykpOw0KCSAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KCSAgIAkkKCcjandrc19vcl9qd2tzX3VyaScpLnNob3coKTsNCgkgIAkkKCcjcGtpX25hbWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNwa2lfdmFsdWVfcm93JykuaGlkZSgpOw0KCSAgCSQoJyNqd2tzX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjandrc191cmlfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyN3YXJuaW5nX21lc3NhZ2UnKS5oaWRlKCk7DQogICAgfSANCiAgICANCiAgICBpZiAoaXNGYXBpQWR2YW5jZWRFbmFibGVkICYmIGNsaWVudF90eXBlPT0nY29uZmlkZW50aWFsJykgew0KICAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfYmFzaWNdIikucmVtb3ZlKCk7DQoJICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQogICAgICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9qd3RdIikucmVtb3ZlKCk7DQogICAgICAgCSQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7DQogICAgICAgCSQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgCSQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9DQogICAgDQogICAgaWYgKGNsaWVudF90eXBlID09ICdwdWJsaWMnICYmIGlzRmFwaUJhc2VsaW5lRW5hYmxlZCkgew0KICAgICAgCSQoIiNhdXRoX21ldGhvZCBvcHRpb25bdmFsdWU9Y2xpZW50X3NlY3JldF9iYXNpY10iKS5yZW1vdmUoKTsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfcG9zdF0iKS5yZW1vdmUoKTsNCiAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKFBvc3QpJywgJ2NsaWVudF9zZWNyZXRfcG9zdCcpKTsNCiAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKEJhc2ljKScsICdjbGllbnRfc2VjcmV0X2Jhc2ljJykpOw0KICAgICAgCSQoJyNzZWNyZXQnKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7DQogICAgICAJJCgnI2p3a3Nfb3Jfandrc191cmknKS5zaG93KCk7DQoJICAJJCgnI3BraV9uYW1lX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjcGtpX3ZhbHVlX3JvdycpLmhpZGUoKTsNCgkgIAkkKCcjandrc19yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI2p3a3NfdXJpX3JvdycpLmhpZGUoKTsNCiAgICAgIAkkKCcjd2FybmluZ19tZXNzYWdlJykuaGlkZSgpOw0KICAgIH0NCg0KICAgIGlmIChjbGllbnRfdHlwZSA9PSAncHVibGljJyAmJiBpc0ZhcGlBZHZhbmNlZEVuYWJsZWQpIHsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfand0XSIpLnJlbW92ZSgpOw0KICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCiAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgCSQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgCSQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9ICAgDQoNCiAgICBpZiAoZmFwaV9wcm9maWxlID09ICdub25lJyApIHsNCiAgICAgIAkkKCIjYXV0aF9tZXRob2Qgb3B0aW9uW3ZhbHVlPWNsaWVudF9zZWNyZXRfYmFzaWNdIikucmVtb3ZlKCk7DQogICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X3Bvc3RdIikucmVtb3ZlKCk7DQogICAgICAJJCgiI2F1dGhfbWV0aG9kIG9wdGlvblt2YWx1ZT1jbGllbnRfc2VjcmV0X2p3dF0iKS5yZW1vdmUoKTsNCiAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKFBvc3QpJywgJ2NsaWVudF9zZWNyZXRfcG9zdCcpKTsNCiAgICAgIAkkKCcjYXV0aF9tZXRob2QnKS5wcmVwZW5kKG5ldyBPcHRpb24oJ0NsaWVudCBTZWNyZXQgKEJhc2ljKScsICdjbGllbnRfc2VjcmV0X2Jhc2ljJykpOw0KICAgICAgCSQoJyNhdXRoX21ldGhvZCcpLnByZXBlbmQobmV3IE9wdGlvbignQ2xpZW50IFNlY3JldCAoSldUKScsICdjbGllbnRfc2VjcmV0X2p3dCcpKTsNCiAgICAgIAkkKCcjc2VjcmV0JykucHJvcCggImRpc2FibGVkIiwgdHJ1ZSApOw0KICAgICAgCSQoJyNqd2tzX29yX2p3a3NfdXJpJykuc2hvdygpOw0KCSAgCSQoJyNwa2lfbmFtZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI3BraV92YWx1ZV9yb3cnKS5oaWRlKCk7DQoJICAJJCgnI2p3a3Nfcm93JykuaGlkZSgpOw0KICAgICAgCSQoJyNqd2tzX3VyaV9yb3cnKS5oaWRlKCk7DQogICAgICAJJCgnI3dhcm5pbmdfbWVzc2FnZScpLmhpZGUoKTsNCiAgICB9ICANCiAgfSk7DQogDQp9KTsNCjwvc2NyaXB0Pg==\"/>\n                    <L7p:VariableToSet stringValue=\"custom_js\"/>\n                </L7p:SetVariable>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPGRpdj4KICAgIDxoMT5BZGQgQ2xpZW50IEtleTwvaDE+CiAgICA8cD5GaWxsIG91dCB0aGUgZm9ybSB0byBhZGQgYSBuZXcgY2xpZW50X2tleS48L3A+CiAgICA8Zm9ybSBhY3Rpb249IiR7dGhpcy5hcHAudXJsfT9zdGF0ZT1rZXlBZGRlZCIgbWV0aG9kPSJQT1NUIiBlbmN0eXBlPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiIGlkPSJhZGRLZXlGb3JtIiBvbnN1Ym1pdD0icmV0dXJuIHZhbGlkYXRlRm9ybUFkZEtleSgpIj4KICAgICAgICA8aW5wdXQgbmFtZT0iY2xpZW50X2lkZW50IiBpZD0iY2xpZW50X2lkZW50IiB0eXBlPSJoaWRkZW4iIHZhbHVlPSIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuY2xpZW50X2lkZW50fSIvPgogICAgICAgIDxpbnB1dCBuYW1lPSJjbGllbnRfdHlwZSIgaWQ9ImNsaWVudF90eXBlIiB0eXBlPSJoaWRkZW4iIHZhbHVlPSIke3hwYXRoQ2xpZW50VHlwZS5yZXN1bHR9Ii8+CiAgICAgICAgPGlucHV0IG5hbWU9InN5bmNoVG9rZW4iIHR5cGU9ImhpZGRlbiIgdmFsdWU9IiR7c3luY2hUb2tlbn0iIC8+CiAgICAgICAgPGlucHV0IG5hbWU9ImV4cGlyYXRpb24iIGlkPSJleHBpcmF0aW9uIiB0eXBlPSJoaWRkZW4iIHZhbHVlPSIke2dlbkV4cGlyYXRpb259Ii8+CiAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZS1mb3JtIiBuYW1lPSJ2YWx1ZXMiPgogICAgICAgICAgIDx0cj48dGQ+RkFQSSBQcm9maWxlPC90ZD48dGQ+PHNlbGVjdCBuYW1lPSJmYXBpX3Byb2ZpbGUiIGlkPSJmYXBpX3Byb2ZpbGUiPjxvcHRpb24gdmFsdWU9Imdsb2JhbCI+Z2xvYmFsPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0ibm9uZSI+bm9uZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9ImJhc2VsaW5lIj5iYXNlbGluZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9ImFkdmFuY2VkIj5hZHZhbmNlZDwvb3B0aW9uPjwvc2VsZWN0PiAodXNlZCB3aXRoIE9wZW5JRCk8L3RkPjwvdHI+CiAgICAgICAgICAgPHRyPjx0ZD5DbGllbnQgS2V5PC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9ImNsaWVudF9rZXkiIGlkPSJjbGllbnRfa2V5IiBjb2xzPSI1MCIgcm93cz0iMTAiIG1heGxlbmd0aD0iMjU1Ij4ke2dlblRva2VufTwvdGV4dGFyZWE+PGJyPihtdXN0IGJlIHVuaXF1ZSB0byB0aGUgc3lzdGVtKTwvdGQ+PC90cj4KICAgICAgICAgICA8dHI+PHRkPkF1dGhlbnRpY2F0aW9uIE1ldGhvZDwvdGQ+PHRkPgogICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJhdXRoX21ldGhvZCIgaWQ9ImF1dGhfbWV0aG9kIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjbGllbnRfc2VjcmV0X2Jhc2ljIj5DbGllbnQgU2VjcmV0IChCYXNpYyk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJjbGllbnRfc2VjcmV0X3Bvc3QiPkNsaWVudCBTZWNyZXQgKFBvc3QpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY2xpZW50X3NlY3JldF9qd3QiPkNsaWVudCBTZWNyZXQgKEpXVCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJwcml2YXRlX2tleV9qd3QiPlByaXZhdGUgS2V5IChKV1QpPC9vcHRpb24+CgkJICAgIDxvcHRpb24gdmFsdWU9InNlbGZfc2lnbmVkX3Rsc19jbGllbnRfYXV0aCI+U2VsZiBTaWduZWQgVExTIENsaWVudCBBdXRoPC9vcHRpb24+CgkJICAgIDxvcHRpb24gdmFsdWU9InRsc19jbGllbnRfYXV0aCI+VExTIENsaWVudCBBdXRoPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPkNsaWVudCBTZWNyZXQ8L3RkPjx0ZD48dGV4dGFyZWEgbmFtZT0ic2VjcmV0IiBpZD0ic2VjcmV0IiBjb2xzPSI1MCIgcm93cz0iMTAiPiR7Z2VuU2VjcmV0fTwvdGV4dGFyZWE+PGJyPih3aGVuIGNsaWVudCBpcyByZWdpc3RlcmVkIHRocm91Z2ggT0lEQyB3aXRoIHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIGFzIFByaXZhdGVfa2V5X2p3dCwgc2VjcmV0IGNhbiBiZSBqd2tzIG9yIGp3a3NfdXJpKSA8YnI+PHNwYW4gc3R5bGU9ImNvbG9yOiNGRjAwMDA7IiBpZD0id2FybmluZ19tZXNzYWdlIiA+KDxiPldhcm5pbmc8L2I+OiBQbGVhc2UgZW5zdXJlIHRvIG1ha2UgYSBjb3B5IG9mIHRoZSBjbGllbnQgc2VjcmV0KTwvc3Bhbj48L3RkPjwvdHI+CiAgICAgICAgICAgIDx0ciBzdHlsZT0iZGlzcGxheTogbm9uZSIgaWQ9Imp3a3Nfb3Jfandrc191cmkiPjx0ZD48L3RkPjx0ZD4KICAgICAgICAgICAgICAgIDxpbnB1dCBuYW1lPSJqd2tzX29yX2p3a3NfdXJpX3JhZGlvX2J1dHRvbiIgaWQ9Imp3a3NfcmFkaW9fYnV0dG9uIiB0eXBlPSJyYWRpbyIgdmFsdWU9Imp3a3MiPiBqd2tzPGJyPgogICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9Imp3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9uIiBpZD0iandrc191cmlfcmFkaW9fYnV0dG9uIiB0eXBlPSJyYWRpbyIgdmFsdWU9Imp3a3NfdXJpIj4gandrc191cmkKCQkJPC90ZD48L3RyPgogICAgICAgICAgICA8dHIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiIGlkPSJqd2tzX3JvdyI+PHRkPkpXS3M8YnIvPihNVVNUIGJlIEpTT04pPC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9Imp3a3MiIGlkPSJqd2tzIiBjb2xzPSI1MCIgcm93cz0iMTAiPjwvdGV4dGFyZWE+PC90ZD48L3RyPgogICAgICAgICAgICA8dHIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiIGlkPSJqd2tzX3VyaV9yb3ciPjx0ZD5KV0tzIFVSSTwvdGQ+PHRkPjx0ZXh0YXJlYSBuYW1lPSJqd2tzX3VyaSIgaWQ9Imp3a3NfdXJpIiAgY29scz0iNTAiIHJvd3M9IjIiPjwvdGV4dGFyZWE+PC90ZD48L3RyPgogICAgICAgICAgICA8dHIgc3R5bGU9ImRpc3BsYXk6IG5vbmUiIGlkPSJwa2lfbmFtZV9yb3ciPjx0ZD5QS0kgTmFtZTwvdGQ+PHRkPgogICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJwa2lfbmFtZSIgaWQ9InBraV9uYW1lIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0bHNfY2xpZW50X2F1dGhfc3ViamVjdF9kbiI+U3ViamVjdCBETjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InRsc19jbGllbnRfYXV0aF9zYW5fZG5zIj5TQU4gRE5TPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0idGxzX2NsaWVudF9hdXRoX3Nhbl91cmkiPlNBTiBVUkk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0bHNfY2xpZW50X2F1dGhfc2FuX2lwIj5TQU4gSVA8L29wdGlvbj4KCQkJCQk8b3B0aW9uIHZhbHVlPSJ0bHNfY2xpZW50X2F1dGhfc2FuX2VtYWlsIj5TQU4gRW1haWw8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L3RkPjwvdHI+CgkJCTx0ciBzdHlsZT0iZGlzcGxheTogbm9uZSIgaWQ9InBraV92YWx1ZV9yb3ciPjx0ZD5QS0kgVmFsdWUgPC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9InBraV92YWx1ZSIgaWQ9InBraV92YWx1ZSIgIGNvbHM9IjUwIiByb3dzPSIyIj48L3RleHRhcmVhPjwvdGQ+PC90cj4KCQkJPHRyPjx0ZD5bbWFnXSBNYXN0ZXIgS2V5PC90ZD48dGQ+PGlucHV0IG5hbWU9Im1hc3RlciIgaWQ9Im1hc3RlciIgdmFsdWU9InRydWUiIHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0icmV0dXJuIHRvZ2dsZU1hc3RlcigpOyI+ICR7bWFzdGVyX21lc3NhZ2V9PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPlN0YXR1czwvdGQ+PHRkPjxzZWxlY3QgbmFtZT0ic3RhdHVzIj48b3B0aW9uIHZhbHVlPSJFTkFCTEVEIj5FTkFCTEVEPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRElTQUJMRUQiPkRJU0FCTEVEPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPlNjb3BlPC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9InNjb3BlIiBpZD0ic2NvcGUiIGNvbHM9IjUwIiByb3dzPSIxMCIgbWF4bGVuZ3RoPSI0MDAwIj5vb2I8L3RleHRhcmVhPjxicj4odXNlZCB3aXRoIG9hdXRoIDIuMCk8L3RkPjwvdHI+CiAgICAgICAgICAgIDx0cj48dGQ+Q2FsbGJhY2sgVVJMPC90ZD48dGQ+PGlucHV0IG5hbWU9ImNhbGxiYWNrIiBzaXplPSIxMjgiIHZhbHVlPSJvb2IiLz48YnI+KGluIG9hdXRoIDIuMCB0aGlzIGlzIGNhbGxlZCByZWRpcmVjdF91cmkpPC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPkVudmlyb25tZW50PC90ZD48dGQ+PGlucHV0IG5hbWU9ImVudmlyb25tZW50IiBzaXplPSIxMjgiIHZhbHVlPSJBTEwiLz48L3RkPjwvdHI+CiAgICAgICAgICAgIDx0cj48dGQ+UGVybWl0dGVkIFJlc291cmNlczwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJyZXNvdXJjZSIgc2l6ZT0iMTI4IiB2YWx1ZT0iIiAvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5SZWdpc3RlcmVkIGJ5PC90ZD48dGQ+PGlucHV0IG5hbWU9InJlZ2lzdGVyZWRfYnkiIGlkPSJyZWdpc3RlcmVkX2J5IiB2YWx1ZT0iJHtjdXJyZW50LnVzZXJuYW1lfSIgdHlwZT0idGV4dCIgc2l6ZT0iMTI4IiByZWFkb25seS8+PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPjwvdGQ+PHRkPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBpZD0ic3VibWl0QnV0dG9uIiB0eXBlPSJzdWJtaXQiIHZhbHVlPSJBZGQiPkFkZDwvYnV0dG9uPiZuYnNwOwogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiB0eXBlPSJyZXNldCI+UmVzZXQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxhIGhyZWY9IiR7dGhpcy5hcHAudXJsfT9zdGF0ZT1jbGllbnRLZXlzJmNsaWVudF9pZGVudD0ke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuY2xpZW50X2lkZW50fSIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBwdWxsLXJpZ2h0Ij5DYW5jZWw8L2E+CiAgICAgICAgICAgIDwvdGQ+PC90cj4KICAgICAgICA8L3RhYmxlPgogICAgPC9mb3JtPgoKPC9kaXY+CiR7Y3VzdG9tX2pzfQoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Add Client Key\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"keyAdded\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"keyAdded\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnNlY3JldH0=\"/>\n                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm1hc3Rlcn0=\"/>\n                    <L7p:VariableToSet stringValue=\"master\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                    <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmZhcGlfcHJvZmlsZX0=\"/>\n                    <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"6dbc70f9-bb40-4a69-a0ec-88fae4f35300\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Generate OAuth Token\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ac\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"art\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"at\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cid\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cidm\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"csec\"/>\n                            <L7p:value stringValue=\"true\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"curid\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"dac\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ock\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ot\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"pru\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"req_expiry\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"rft\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"urt\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.fapi_profile}\"/>\n                            <L7p:Expression2 stringValue=\"global\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"global\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${gateway.otk.fapi_advanced.enabled}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"YWR2YW5jZWQ=\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${gateway.otk.fapi_baseline.enabled}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"YmFzZWxpbmU=\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"bm9uZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                            </L7p:SetVariable>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmZhcGlfcHJvZmlsZX0=\"/>\n                        <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//check if fapi_profile if it was set to global\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                            <L7p:Expression2 stringValue=\"none\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"none\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICJub25lIiw=\"/>\n                            <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"f78f0f85-00e2-49b1-95e4-e520df255c9c\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK SCOPE Verification\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"any\"/>\n                                    <L7p:value stringValue=\"true\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"fail\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"scope.granted\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.scope}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"scope.required\"/>\n                                    <L7p:value stringValue=\"openid\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"advanced\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuZmFwaV9wcm9maWxlfSIs\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"baseline\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuZmFwaV9wcm9maWxlfSIs\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"The scope 'openid' has to be added when fapi_profile is set as baseline or advanced\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"425\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"425\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//reset fapi_profile to none for non openid registrations\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmF1dGhfbWV0aG9kfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                        </L7p:SetVariable>\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"889fb762-51e7-4244-81e4-8eab7393f7de\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK openid token_endpoint_auth_methods_supported\"/>\n                        </L7p:Encapsulated>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:Regex stringValue=\"^&quot;|&quot;$\"/>\n                            <L7p:Replace booleanValue=\"true\"/>\n                            <L7p:Replacement stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:Regex stringValue=\"&quot;,\\s+&quot;\"/>\n                            <L7p:Replace booleanValue=\"true\"/>\n                            <L7p:Replacement stringValue=\",\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:Split>\n                            <L7p:IgnoreEmptyValues booleanValue=\"true\"/>\n                            <L7p:InputVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:OutputVariable stringValue=\"token_endpoint_auth_methods_supported\"/>\n                            <L7p:SplitPatternRegEx booleanValue=\"false\"/>\n                        </L7p:Split>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_methods_supported}\"/>\n                            <L7p:Expression2 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:MultivaluedComparison multivaluedComparison=\"ANY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"${token_endpoint_auth_method}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given token_endpoint_auth_method\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${request.http.parameter.client_type}\"/>\n                                <L7p:Expression2 stringValue=\"public\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"public\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:SetVariable>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"default\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                                <L7p:Base64Expression stringValue=\"Y2xpZW50X3NlY3JldF9iYXNpYw==\"/>\n                                <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <wsp:OneOrMore wsp:Usage=\"Required\">\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:Expression1 stringValue=\"${request.http.parameter.fapi_profile}\"/>\n                                    <L7p:Expression2 stringValue=\"global\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"global\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${oauth2_profile.fapi_baseline}\"/>\n                                    <L7p:Expression2 stringValue=\"false\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                </wsp:All>\n                                <L7p:ComparisonAssertion>\n                                    <L7p:Expression1 stringValue=\"${request.http.parameter.fapi_profile}\"/>\n                                    <L7p:Expression2 stringValue=\"baseline\"/>\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:RightValue stringValue=\"baseline\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                            </wsp:OneOrMore>\n                            <L7p:SetVariable>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"default\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                                <L7p:Base64Expression stringValue=\"Y2xpZW50X3NlY3JldF9iYXNpYw==\"/>\n                                <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:AuditDetailAssertion>\n                                <L7p:Detail stringValue=\"Incompatable token endpoint auth method - 'token_endpoint_auth_method'\"/>\n                            </L7p:AuditDetailAssertion>\n                            <L7p:Encapsulated>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"174\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                                <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"174\"/>\n                                    </L7p:entry>\n                                </L7p:Parameters>\n                            </L7p:Encapsulated>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"error if fapi enabled\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:All>\n                    </wsp:OneOrMore>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// set token_endpoint_auth_method\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${master}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9rZXl9\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"private_key_jwt\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"self_signed_tls_client_auth\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"tls_client_auth\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"Y2xpZW50X3NlY3JldF9iYXNpYw==\"/>\n                                <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                            </L7p:SetVariable>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                            <L7p:Expression2 stringValue=\"${client_secret}\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"${client_secret}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"default\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"master\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"private_key_jwt\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9ufQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwk_radio_btn\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3N9\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3NfdXJpfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzfQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// client gave jwks\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks_uri\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks_uri\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzX3VyaX0=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"IiI=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// client gave jwks_uri\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// determine if jwks or jwks_uri will be used\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${jwksOrJwks_uri}\"/>\n                                <L7p:Expression2 stringValue=\"\"/>\n                                <L7p:Negate booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValue=\"jwks/jwk_uri should not be empty when using &quot;private_key_jwt&quot; auth method.\"/>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:Encapsulated>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"fail\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"validate\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check jwks/jwks_uri is not empty if method is &quot;private_key_jwt&quot;\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtqd2tzT3JKd2tzX3VyaX0=\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"hashing_metadata\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// private_key_jwt\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"self_signed_tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3Nfb3Jfandrc191cmlfcmFkaW9fYnV0dG9ufQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwk_radio_btn\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3N9\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmp3a3NfdXJpfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzfQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// given\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${jwk_radio_btn}\"/>\n                                    <L7p:Expression2 stringValue=\"jwks_uri\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"jwks_uri\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"JHtqd2tzX3VyaX0=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwksOrJwks_uri\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"IiI=\"/>\n                                    <L7p:VariableToSet stringValue=\"jwks\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"\"/>\n                                    <L7p:VariableToSet stringValue=\"client_secret\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                        </wsp:OneOrMore>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${jwksOrJwks_uri}\"/>\n                                <L7p:Expression2 stringValue=\"\"/>\n                                <L7p:Negate booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValue=\"jwks should not be empty when using &quot;self_signed_tls_client_auth&quot; auth method.\"/>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:Encapsulated>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"fail\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"validate\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check jwks is not empty if method is &quot;self_signed_tls_client_auth&quot;\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtqd2tzT3JKd2tzX3VyaX0=\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// self_signed_tls_client_auth\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"IiI=\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"jwks_uri\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnBraV9uYW1lfQ==\"/>\n                            <L7p:VariableToSet stringValue=\"pki_name\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnBraV92YWx1ZX0=\"/>\n                            <L7p:VariableToSet stringValue=\"pki_value\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"IiR7cGtpX25hbWV9IjoiJHtwa2lfdmFsdWV9Iiw=\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${pki_param}\"/>\n                                <L7p:Expression2 stringValue=\"\"/>\n                                <L7p:Negate booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:AuditDetailAssertion>\n                                    <L7p:Detail stringValue=\"PKI param should not be empty when using &quot;tls_client_auth&quot; auth method.\"/>\n                                </L7p:AuditDetailAssertion>\n                                <L7p:Encapsulated>\n                                    <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                    </L7p:AssertionComment>\n                                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                                    <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                    </L7p:Parameters>\n                                </L7p:Encapsulated>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"fail\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"validate\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check pki_parami is not empty if method is &quot;tls_client_auth&quot;\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"eyIke3BraV9uYW1lfSI6IiR7cGtpX3ZhbHVlfSJ9\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// tls_client_auth\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Expression2 stringValue=\"private_key_jwt\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"private_key_jwt\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"self_signed_tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${token_endpoint_auth_method}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"tls_client_auth\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// Convert plain text 'secret' to hashed if it is not marked as master key and when CWP 'otk.hashed_secret.enable' set as 'true'\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"eb33b796-a064-48aa-b6f5-d0ebad2bb0b9\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Create Client Secret Hash\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_secret\"/>\n                                    <L7p:value stringValue=\"${client_secret}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master_key_flag\"/>\n                                    <L7p:value stringValue=\"${master}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtjbGllbnRfc2VjcmV0fQ==\"/>\n                            <L7p:VariableToSet stringValue=\"secret_or_jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"\"/>\n                            <L7p:VariableToSet stringValue=\"pki_param\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"IiI=\"/>\n                            <L7p:VariableToSet stringValue=\"jwks\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                            <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// anything else\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// check if it is private_key_jwt or anything else\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_ident}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${secret_or_jwks}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"success\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"103\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"check for required parameters\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:Encapsulated>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"c1a7f28d-0941-4458-8a4b-5198f120fad4\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Validate Redirect URI\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"redirect_uris\"/>\n                                <L7p:value stringValue=\"${request.http.parameter.callback}\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"custom\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"114\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//validate redirect uri\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ew0KICAgImNsaWVudF9pZCI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuY2xpZW50X2lkZW50fSIsDQogICAiY2xpZW50X3NlY3JldCI6ICIiLA0KICAgImNsaWVudF9zZWNyZXRfZXhwaXJlc19hdCI6ICIke2dlbkV4cGlyYXRpb259IiwNCiAgICJjbGllbnRfaWRfaXNzdWVkX2F0Ijoke2dhdGV3YXkudGltZS5zZWNvbmRzfSwNCiAgICJyZWdpc3RyYXRpb25fYWNjZXNzX3Rva2VuIjoNCiAgICAgIiR7YWNjZXNzX3Rva2VufSIsDQogICAicmVnaXN0cmF0aW9uX2NsaWVudF91cmkiOiIiLA0KICAgInRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIjoNCiAgICAgIiR7dG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2R9IiwNCiAgICJ0b2tlbl9lbmRwb2ludF9hdXRoX3NpZ25pbmdfYWxnIjogIiIsDQogICAiYXBwbGljYXRpb25fdHlwZSI6ICIke2FwcGxpY2F0aW9uX3R5cGV9IiwNCiAgICR7ZmFwaV9wcm9maWxlX2ZpZWxkfQ0KICAgInJlZGlyZWN0X3VyaXMiOiBbIiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5jYWxsYmFja30iXSwNCiAgICJjbGllbnRfbmFtZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIubmFtZX0iLA0KICAgInN1YmplY3RfdHlwZSI6ICIke3N1YmplY3RfdHlwZX0iLA0KICAgInNlY3Rvcl9pZGVudGlmaWVyX3VyaSI6IiR7c2VjdG9yX2lkZW50aWZpZXJfdXJpfSIsDQogICAiY29udGFjdHMiOiBbJHtjb250YWN0c31dLA0KICAicmVzcG9uc2VfdHlwZXMiOlske3Jlc3BvbnNlX3R5cGVzfV0sDQogICJncmFudF90eXBlcyI6WyR7Z3JhbnRfdHlwZXN9XSwNCiAgImlkX3Rva2VuX3NpZ25lZF9yZXNwb25zZV9hbGciOiIke2lkX3Rva2VuX3NpZ25pbmdfYWxnb3JpdGhtfSIsDQogICJ1c2VyaW5mb19zaWduZWRfcmVzcG9uc2VfYWxnIjoiIiwNCiAgImVudmlyb25tZW50IjoiJHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmVudmlyb25tZW50fSIsDQogICJvcmdhbml6YXRpb24iOiIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIub3JnfSIsDQogICJtYXN0ZXIiOiR7bWFzdGVyfSwNCiAgImRlc2NyaXB0aW9uIjoiJHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmRlc2NyaXB0aW9ufSIsDQogICJzY29wZSI6IiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5zY29wZX0iLA0KICAicmVzb3VyY2UiOiIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIucmVzb3VyY2V9IiwNCiAgJHtwa2lfcGFyYW19DQogICJqd2tzIjoke2p3a3N9LA0KICAiandrc191cmkiOiIke2p3a3NfdXJpfSINCiAgfQ==\"/>\n                    <L7p:VariableToSet stringValue=\"openid_registration_response\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtvcGVuaWRfcmVnaXN0cmF0aW9uX3Jlc3BvbnNlfQ==\"/>\n                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"client_metadata\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"4c6dab79-310f-48bb-9ec1-3f0e511c5093\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Client Validate Metadata\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_metadata\"/>\n                            <L7p:value stringValue=\"client_metadata\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ew0KICAib3BlbmlkX3JlZ2lzdHJhdGlvbiI6IHsNCiAgICAicmVxdWVzdCI6e30sDQogICAgIm9hdXRoX2NsaWVudCI6dHJ1ZSwNCiAgICAicmVzcG9uc2UiOiR7b3BlbmlkX3JlZ2lzdHJhdGlvbl9yZXNwb25zZX0NCiAgfQ0KfQ==\"/>\n                    <L7p:VariableToSet stringValue=\"openid_registration\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"e7a77c88-f595-4016-8549-5919445ef060\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Persist\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"account_plan_mapping_ids\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"callback\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.callback}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_ident}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_secret\"/>\n                            <L7p:value stringValue=\"${secret_or_jwks}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_status\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.status}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"clientname\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"clientstatus\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.status}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"description\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.environment}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"expiration\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.expiration}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"hashing_metadata\"/>\n                            <L7p:value stringValue=\"hashing_metadata\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"key_custom\"/>\n                            <L7p:value stringValue=\"${openid_registration}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"persist_client\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"persist_client_and_key\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"persist_client_key\"/>\n                            <L7p:value stringValue=\"true\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${current.username}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"resource\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.resource}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"scope\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.scope}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.secret}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret_expiration\"/>\n                            <L7p:value stringValue=\"${genExpiration}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"service_ids\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"type\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${result}\"/>\n                    <L7p:Expression2 stringValue=\"persisted\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:RightValue stringValue=\"persisted\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${show_client_secret}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:HardcodedResponse>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+QWRkIENsaWVudCBLZXk8L2gxPg0KPHA+VGhlIGNsaWVudF8ga2V5ICcke2NsaWVudF9rZXl9JyBoYXMgc3VjY2Vzc2Z1bGx5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoIHNlY3JldCAke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuc2VjcmV0fSA8YnI+PHNwYW4gc3R5bGU9ImNvbG9yOiNGRjAwMDA7IiBpZD0id2FybmluZ19tZXNzYWdlIiA+KDxiPldhcm5pbmc8L2I+OiBQbGVhc2UgZW5zdXJlIHRvIG1ha2UgYSBjb3B5IG9mIHRoZSBjbGllbnQgc2VjcmV0KTwvc3Bhbj48L3A+DQo8L2Rpdj4NCiR7d2Vic2l0ZV9ib3R0b219\"/>\n                            <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                        </L7p:HardcodedResponse>\n                    </wsp:All>\n                    <L7p:HardcodedResponse>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+QWRkIENsaWVudCBLZXk8L2gxPg0KPHA+VGhlIGNsaWVudF8ga2V5ICcke2NsaWVudF9rZXl9JyBoYXMgc3VjY2Vzc2Z1bGx5IGJlZW4gcmVnaXN0ZXJlZDwvcD4NCjwvZGl2Pg0KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                        <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                    </L7p:HardcodedResponse>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// check to see if client_secret needs to be displayed\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Key added\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"editKey\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"editKey\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"getKey\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"${offsetValue}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${lookupUser}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathSecret\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:secret\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathStatus\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:status/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathScope\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:scope/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCallback\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:callback/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathEnvironment\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:environment/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathResource\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:resource\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCustomKey\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_key_custom\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathServiceIds\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:serviceids\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathAccountPlanMappingIds\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:accountplanmappingids\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aFN0YXR1cy5yZXN1bHR9\"/>\n                    <L7p:VariableToSet stringValue=\"status\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathCallback.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedCallback\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathEnvironment.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedEnvironment\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathResource.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedResource\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathServiceIds.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedServiceIds\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8ec0504a-67af-4087-99a9-e23a92986695\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Escape HTML\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"input\"/>\n                            <L7p:value stringValue=\"${xpathAccountPlanMappingIds.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlc2NhcGVkX291dHB1dH0=\"/>\n                    <L7p:VariableToSet stringValue=\"escapedAccountPlanMappingIds\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                            <L7p:Expression2 stringValue=\"${xpathSecret.result}\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${xpathSecret.result}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"PHRyPjx0ZD5bbWFnXSBNYXN0ZXIgS2V5PC90ZD48dGQ+PGlucHV0IG5hbWU9Im1hc3RlciIgaWQ9Im1hc3RlciIgdmFsdWU9InRydWUiIHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0icmV0dXJuIHRvZ2dsZU1hc3RlcigpOyIgY2hlY2tlZD4gICR7bWFzdGVyX21lc3NhZ2V9PC90ZD48L3RyPg==\"/>\n                            <L7p:VariableToSet stringValue=\"master\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"U1RZTEU9ImJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5IiByZWFkT25seT0idHJ1ZSI=\"/>\n                            <L7p:VariableToSet stringValue=\"secret_attributes\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"PHRyPjx0ZD5bbWFnXSBNYXN0ZXIgS2V5PC90ZD48dGQ+PGlucHV0IG5hbWU9Im1hc3RlciIgaWQ9Im1hc3RlciIgdmFsdWU9InRydWUiIHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0icmV0dXJuIHRvZ2dsZU1hc3RlcigpOyIgPiAgJHttYXN0ZXJfbWVzc2FnZX08L3RkPjwvdHI+\"/>\n                            <L7p:VariableToSet stringValue=\"master\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"U1RZTEU9ImJhY2tncm91bmQtY29sb3I6d2hpdGUi\"/>\n                            <L7p:VariableToSet stringValue=\"secret_attributes\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${status}\"/>\n                            <L7p:Expression2 stringValue=\"ENABLED\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"ENABLED\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"PG9wdGlvbiB2YWx1ZT0iRU5BQkxFRCIgc2VsZWN0ZWQ9InNlbGVjdGVkIj5FTkFCTEVEPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRElTQUJMRUQiPkRJU0FCTEVEPC9vcHRpb24+\"/>\n                            <L7p:VariableToSet stringValue=\"selectedOption\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"PG9wdGlvbiB2YWx1ZT0iRElTQUJMRUQiIHNlbGVjdGVkPSJzZWxlY3RlZCI+RElTQUJMRUQ8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTkFCTEVEIj5FTkFCTEVEPC9vcHRpb24+\"/>\n                        <L7p:VariableToSet stringValue=\"selectedOption\"/>\n                    </L7p:SetVariable>\n                </wsp:OneOrMore>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aEN1c3RvbUtleS5yZXN1bHR9\"/>\n                    <L7p:VariableToSet stringValue=\"key_custom\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"PHNjcmlwdD4NCi8vIGR5bmFtaWMgY29udGVudA0KJChkb2N1bWVudCkucmVhZHkoIGZ1bmN0aW9uKCkgeyANCiAgICAvLyBiZWF1dGlmeSBqc29uIGluIHNlY3JldCBmaWVsZA0KICAgIHZhciBzZWNyZXRWYWx1ZSA9ICQoJ3RleHRhcmVhI3NlY3JldCcpLnZhbCgpOw0KICAgIHRyeSB7DQogICAgICBzZWNyZXRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KCQucGFyc2VKU09OKHNlY3JldFZhbHVlKSwgbnVsbCwgNCk7DQogICAgICAkKCd0ZXh0YXJlYSNzZWNyZXQnKS52YWwoc2VjcmV0VmFsdWUpOw0KICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgJCgndGV4dGFyZWEjc2VjcmV0JykuYXR0cigncm93cycsICcyJyk7DQogICAgfQ0KfSk7DQo8L3NjcmlwdD4=\"/>\n                    <L7p:VariableToSet stringValue=\"custom_js\"/>\n                </L7p:SetVariable>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0KPGRpdj4KICAgIDxoMT5FZGl0IENsaWVudCBLZXk8L2gxPgogICAgPHA+RmlsbCBvdXQgdGhlIGZvcm0gdG8gZWRpdCB0aGUgY2xpZW50X2tleS48L3A+CiAgICA8Zm9ybSBhY3Rpb249IiR7dGhpcy5hcHAudXJsfT9zdGF0ZT1rZXlFZGl0ZWQiIG1ldGhvZD0iUE9TVCIgZW5jdHlwZT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiBpZD0iZWRpdEtleUZvcm0iIG9uc3VibWl0PSJyZXR1cm4gdmFsaWRhdGVGb3JtRWRpdEtleSgpIj4KICAgICAgICA8aW5wdXQgbmFtZT0ic3luY2hUb2tlbiIgdHlwZT0iaGlkZGVuIiB2YWx1ZT0iJHtzeW5jaFRva2VufSIgLz4KICAgICAgICA8dGFibGUgY2xhc3M9InRhYmxlLWZvcm0iIG5hbWU9InZhbHVlcyI+CiAgICAgICAgICAgIDx0cj48dGQ+Q2xpZW50IEtleTwvdGQ+PHRkPjx0ZXh0YXJlYSBuYW1lPSJjbGllbnRfa2V5IiBpZD0iY2xpZW50X2tleSIgY29scz0iNTAiIHJvd3M9IjEwIiByZWFkb25seSBTVFlMRT0iYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXkiPiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5jbGllbnRfa2V5fTwvdGV4dGFyZWE+PGJyPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5DbGllbnQgU2VjcmV0PC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9InNlY3JldCIgaWQ9InNlY3JldCIgY29scz0iNTAiIHJvd3M9IjEwIj4ke3hwYXRoU2VjcmV0LnJlc3VsdH08L3RleHRhcmVhPjxicj4od2hlbiBjbGllbnQgaXMgcmVnaXN0ZXJlZCB0aHJvdWdoIE9JREMgd2l0aCB0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZCBhcyBwcml2YXRlX2tleV9qd3QgJiBzZWxmX3NpZ25lZF90bHNfY2xpZW50X2F1dGgsIHNlY3JldCBjYW4gYmUgandrcyBvciBqd2tzX3VyaSkgPGJyPjxzcGFuIHN0eWxlPSJjb2xvcjojRkYwMDAwOyIgaWQ9Indhcm5pbmdfbWVzc2FnZSIgPig8Yj5XYXJuaW5nPC9iPjogUGxlYXNlIGVuc3VyZSB0byBtYWtlIGEgY29weSBvZiB0aGUgY2xpZW50IHNlY3JldCB3aGVuIEF1dGhlbnRpY2F0aW9uIE1ldGhvZHMgYXJlIGNsaWVudF9zZWNyZXRfYmFzaWMsIGNsaWVudF9zZWNyZXRfcG9zdCAmIGNsaWVudF9zZWNyZXRfand0KTwvc3Bhbj48L3RkPjwvdHI+CiAgICAgICAgICAgICR7bWFzdGVyfQogICAgICAgICAgICA8dHI+PHRkPlN0YXR1czwvdGQ+PHRkPjxzZWxlY3QgbmFtZT0ic3RhdHVzIj4ke3NlbGVjdGVkT3B0aW9ufTwvc2VsZWN0Pjwvc2VsZWN0PjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5TY29wZTwvdGQ+PHRkPjx0ZXh0YXJlYSBuYW1lPSJzY29wZSIgaWQ9InNjb3BlIiBjb2xzPSI1MCIgcm93cz0iMTAiPiR7eHBhdGhTY29wZS5yZXN1bHR9PC90ZXh0YXJlYT48YnI+KHVzZWQgd2l0aCBvYXV0aCAyLjApPC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPkNhbGxiYWNrIFVSTDwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJjYWxsYmFjayIgaWQ9ImNhbGxiYWNrIiBzaXplPSIxMjgiIHZhbHVlPSIke2VzY2FwZWRDYWxsYmFja30iLz48YnIgLz4gKGluIG9hdXRoIDIuMCB0aGlzIGlzIGNhbGxlZCByZWRpcmVjdF91cmkpPC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPkVudmlyb25tZW50PC90ZD48dGQ+PGlucHV0IG5hbWU9ImVudmlyb25tZW50IiBpZD0iZW52aXJvbm1lbnQiIHNpemU9IjEyOCIgdmFsdWU9IiR7ZXNjYXBlZEVudmlyb25tZW50fSIvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5QZXJtaXR0ZWQgUmVzb3VyY2VzPC90ZD48dGQ+PGlucHV0IG5hbWU9InJlc291cmNlIiBzaXplPSIxMjgiIHZhbHVlPSIke2VzY2FwZWRSZXNvdXJjZX0iIC8+PC90ZD48L3RyPgogICAgICAgICAgICA8dHI+PHRkPlNlcnZpY2UgSUQnczwvdGQ+PHRkPjxpbnB1dCBuYW1lPSJzZXJ2aWNlX2lkcyIgaWQ9InNlcnZpY2VfaWRzIiBzaXplPSIxMjgiIHZhbHVlPSIke2VzY2FwZWRTZXJ2aWNlSWRzfSIvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5BY2NvdW50IFBsYW4gTWFwcGluZyBJRCdzPC90ZD48dGQ+PGlucHV0IG5hbWU9ImFjY291bnRfcGxhbl9tYXBwaW5nX2lkcyIgaWQ9ImFjY291bnRfcGxhbl9tYXBwaW5nX2lkcyIgc2l6ZT0iMTI4IiB2YWx1ZT0iJHtlc2NhcGVkQWNjb3VudFBsYW5NYXBwaW5nSWRzfSIvPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD5DdXN0b20gRmllbGQ8YnIvPihNVVNUIGJlIEpTT04gb3IgZW1wdHkpPC90ZD48dGQ+PHRleHRhcmVhIG5hbWU9ImtleV9jdXN0b20iIGlkPSJrZXlfY3VzdG9tIiBjb2xzPSI1MCIgcm93cz0iMTAiPiR7a2V5X2N1c3RvbX08L3RleHRhcmVhPjwvdGQ+PC90cj4KICAgICAgICAgICAgPHRyPjx0ZD48L3RkPjx0ZD4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgaWQ9InN1Ym1pdEJ1dHRvbiIgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2F2ZSI+U2F2ZTwvYnV0dG9uPiZuYnNwOwogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiB0eXBlPSJyZXNldCI+UmVzZXQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxhIGhyZWY9IiR7dGhpcy5hcHAudXJsfT9zdGF0ZT1jbGllbnRLZXlzJmNsaWVudF9pZGVudD0ke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuY2xpZW50X2lkZW50fSIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBwdWxsLXJpZ2h0Ij5DYW5jZWw8L2E+CiAgICAgICAgICAgIDwvdGQ+PC90cj4KICAgICAgICA8L3RhYmxlPgogICAgPC9mb3JtPgo8L2Rpdj4KJHt3ZWJzaXRlX2JvdHRvbX0KJHtjdXN0b21fanN9\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Edit client_key\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"keyEdited\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"keyEdited\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                    <L7p:VariableToSet stringValue=\"master\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                    <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                    <L7p:VariableToSet stringValue=\"fapi_profile_global\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.master}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                            <L7p:VariableToSet stringValue=\"master\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNsaWVudF9rZXl9\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                            <L7p:Expression2 stringValue=\"${request.http.parameter.secret}\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"${request.http.parameter.secret}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnNlY3JldH0=\"/>\n                            <L7p:VariableToSet stringValue=\"client_secret\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"master-key\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"Handle a master key, set the client_secret appropriately\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmtleV9jdXN0b219\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"key_custom\"/>\n                        </L7p:SetVariable>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${key_custom.mainpart}\"/>\n                                    <L7p:Expression2 stringValue=\"\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"e30=\"/>\n                                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                    <L7p:DataType variableDataType=\"message\"/>\n                                    <L7p:VariableToSet stringValue=\"key_custom\"/>\n                                </L7p:SetVariable>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"empty\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"set the default value '{}'\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:All>\n                            <L7p:TrueAssertion>\n                                <L7p:AssertionComment assertionComment=\"included\">\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"use given value\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:AssertionComment>\n                            </L7p:TrueAssertion>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"check content\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                        <L7p:JSONSchema>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                            <L7p:ResourceInfo staticResourceInfo=\"included\">\n                                <L7p:Document stringValueReference=\"inline\"><![CDATA[{\n                \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n                \"title\": \"UpdatedClientID\",\n                \"description\": \"Verify that key_custom is a JSON message\",\n                \"type\": \"object\"\n                }]]></L7p:Document>\n                            </L7p:ResourceInfo>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:JSONSchema>\n                        <L7p:Regex>\n                            <L7p:AutoTarget booleanValue=\"false\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                            <L7p:ProceedIfPatternMatches booleanValue=\"false\"/>\n                            <L7p:Regex stringValue=\"[&lt;>]\"/>\n                            <L7p:Replacement stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:Regex>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"success\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"The given field 'key_custom' is not valid JSON: '${key_custom.mainpart}'\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"133\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"133\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"Error\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"check custom field\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"Verify that 'key_custom' is either empty or JSON\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:Expression stringValue=\"$.openid_registration.response.fapi_profile\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                            <L7p:VariablePrefix stringValue=\"fapi_profile_in\"/>\n                        </L7p:EvaluateJsonPathExpressionV2>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtmYXBpX3Byb2ZpbGVfaW4ucmVzdWx0fQ==\"/>\n                            <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                        </L7p:SetVariable>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:Operator operator=\"NE\"/>\n                                    <L7p:RightValue stringValue=\"global\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                    </wsp:All>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${gateway.otk.fapi_baseline.enabled}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"YmFzZWxpbmU=\"/>\n                                <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                            </L7p:SetVariable>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"fapi_profile_global\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${gateway.otk.fapi_advanced.enabled}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"YWR2YW5jZWQ=\"/>\n                                <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                            </L7p:SetVariable>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"fapi_profile_global\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"bm9uZQ==\"/>\n                            <L7p:VariableToSet stringValue=\"fapi_profile\"/>\n                        </L7p:SetVariable>\n                    </wsp:OneOrMore>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// identify fapi_profile\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                            <L7p:Expression2 stringValue=\"none\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"none\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                            <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                        </L7p:SetVariable>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICJub25lIiw=\"/>\n                            <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"f78f0f85-00e2-49b1-95e4-e520df255c9c\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK SCOPE Verification\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"any\"/>\n                                    <L7p:value stringValue=\"true\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"fail\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"scope.granted\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.scope}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"scope.required\"/>\n                                    <L7p:value stringValue=\"openid\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"advanced\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuZmFwaV9wcm9maWxlfSIs\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"baseline\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_baseline\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                                    <L7p:VariableToSet stringValue=\"oauth2_profile.fapi_advanced\"/>\n                                </L7p:SetVariable>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"ImZhcGlfcHJvZmlsZSI6ICIke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuZmFwaV9wcm9maWxlfSIs\"/>\n                                    <L7p:VariableToSet stringValue=\"fapi_profile_field\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"The scope 'openid' has to be added when fapi_profile is set as baseline or advanced\"/>\n                        </L7p:AuditDetailAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"425\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"425\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"//reset fapi_profile to none for non openid registrations\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.secret}\"/>\n                            <L7p:Expression2 stringValue=\"\"/>\n                            <L7p:Negate booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"c1a7f28d-0941-4458-8a4b-5198f120fad4\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Validate Redirect URI\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"redirect_uris\"/>\n                                    <L7p:value stringValue=\"${request.http.parameter.callback}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"success\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"103\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"check for required parameters\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:Expression stringValue=\"openid_registration.response\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                            <L7p:VariablePrefix stringValue=\"metadata\"/>\n                        </L7p:EvaluateJsonPathExpressionV2>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHttZXRhZGF0YS5yZXN1bHR9\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"client_metadata\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"e30=\"/>\n                        <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                        <L7p:DataType variableDataType=\"message\"/>\n                        <L7p:VariableToSet stringValue=\"client_metadata\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"Find registered auth method\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"4c6dab79-310f-48bb-9ec1-3f0e511c5093\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Client Validate Metadata\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_metadata\"/>\n                            <L7p:value stringValue=\"client_metadata\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:Encapsulated>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// GET (validate client key valid) before disabling\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"getKey\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"${offsetValue}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${lookupUser}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathKey\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_key/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathClientIdent\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_ident/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathClientSecret\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:secret/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathClientSecretExp\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:secret_expiration/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathHashMetaData\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:hashing_metadata\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aEhhc2hNZXRhRGF0YS5yZXN1bHR9\"/>\n                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"hashing_metadata\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${xpathClientSecret.result}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:RightValue stringValue=\"${request.http.parameter.secret}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// In the case of secret change, convert new secret to hashed when CWP 'otk.hashed_secret.enable' set as true\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"eb33b796-a064-48aa-b6f5-d0ebad2bb0b9\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Create Client Secret Hash\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"client_secret\"/>\n                                    <L7p:value stringValue=\"${client_secret}\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"master_key_flag\"/>\n                                    <L7p:value stringValue=\"${master}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <wsp:OneOrMore wsp:Usage=\"Required\">\n                            <wsp:All wsp:Usage=\"Required\">\n                                <L7p:EvaluateJsonPathExpressionV2>\n                                    <L7p:Expression stringValue=\"token_endpoint_auth_method\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"client_metadata\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:VariablePrefix stringValue=\"auth_method\"/>\n                                </L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:ComparisonAssertion>\n                                    <L7p:Expression1 stringValue=\"${auth_method.result}\"/>\n                                    <L7p:Expression2 stringValue=\"client_secret_basic\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"client_secret_basic\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                </L7p:ComparisonAssertion>\n                                <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                    <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                                </L7p:SetVariable>\n                            </wsp:All>\n                            <L7p:TrueAssertion/>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check to see if client_secret needs to be displayed\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:OneOrMore>\n                    </wsp:All>\n                    <L7p:TrueAssertion/>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// Check if 'client_secret' is changed\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:All wsp:Usage=\"Required\">\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                        <L7p:VariableToSet stringValue=\"status_found\"/>\n                    </L7p:SetVariable>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                        <L7p:VariableToSet stringValue=\"resource_found\"/>\n                    </L7p:SetVariable>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                        <L7p:VariableToSet stringValue=\"scope_found\"/>\n                    </L7p:SetVariable>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                        <L7p:VariableToSet stringValue=\"redirect_uris_found\"/>\n                    </L7p:SetVariable>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                        <L7p:VariableToSet stringValue=\"environment_found\"/>\n                    </L7p:SetVariable>\n                    <L7p:ResponseXpathAssertion>\n                        <L7p:VariablePrefix stringValue=\"xpathScope\"/>\n                        <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                        <L7p:XpathExpression xpathExpressionValue=\"included\">\n                            <L7p:Expression stringValue=\"/ns:values/ns:value/ns:scope/text()\"/>\n                            <L7p:Namespaces mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                </L7p:entry>\n                            </L7p:Namespaces>\n                            <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                        </L7p:XpathExpression>\n                    </L7p:ResponseXpathAssertion>\n                    <L7p:ResponseXpathAssertion>\n                        <L7p:VariablePrefix stringValue=\"xpath_client_key_custom\"/>\n                        <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                        <L7p:XpathExpression xpathExpressionValue=\"included\">\n                            <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_key_custom/text()\"/>\n                            <L7p:Namespaces mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                </L7p:entry>\n                            </L7p:Namespaces>\n                            <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                        </L7p:XpathExpression>\n                    </L7p:ResponseXpathAssertion>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"JHt4cGF0aF9jbGllbnRfa2V5X2N1c3RvbS5yZXN1bHR9\"/>\n                        <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                        <L7p:DataType variableDataType=\"message\"/>\n                        <L7p:VariableToSet stringValue=\"reg_key_custom\"/>\n                    </L7p:SetVariable>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"none\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${client_type}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"public\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:Encapsulated>\n                                <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                                <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                                <L7p:Parameters mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_ident\"/>\n                                    <L7p:value stringValue=\"${xpathClientIdent.result}\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"client_key\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"custom\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"environment\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"filterStatus\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"format\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"master\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"name\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"operation\"/>\n                                    <L7p:value stringValue=\"get\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"org\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"queryOffset\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"registered_by\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                    </L7p:entry>\n                                </L7p:Parameters>\n                            </L7p:Encapsulated>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpathClientType\"/>\n                                <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/ns:values/ns:value/ns:type/text()\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHt4cGF0aENsaWVudFR5cGUucmVzdWx0fQ==\"/>\n                                <L7p:VariableToSet stringValue=\"client_type\"/>\n                            </L7p:SetVariable>\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.openid_registration.response.token_endpoint_auth_method\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"endpoint_auth_in\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtlbmRwb2ludF9hdXRoX2luLnJlc3VsdH0=\"/>\n                                <L7p:VariableToSet stringValue=\"token_endpoint_auth_method\"/>\n                            </L7p:SetVariable>\n                            <wsp:OneOrMore wsp:Usage=\"Required\">\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"baseline\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dGxzX2NsaWVudF9hdXRoLHNlbGZfc2lnbmVkX3Rsc19jbGllbnRfYXV0aCxwcml2YXRlX2tleV9qd3QsY2xpZW50X3NlY3JldF9qd3Q=\"/>\n                                    <L7p:VariableToSet stringValue=\"allowed_methods\"/>\n                                    </L7p:SetVariable>\n                                    <L7p:Split>\n                                    <L7p:InputVariable stringValue=\"allowed_methods\"/>\n                                    <L7p:OutputVariable stringValue=\"allowed_methods\"/>\n                                    </L7p:Split>\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${allowed_methods}\"/>\n                                    <L7p:MultivaluedComparison multivaluedComparison=\"ANY\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${token_endpoint_auth_method}\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                </wsp:All>\n                                <wsp:All wsp:Usage=\"Required\">\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${fapi_profile}\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"advanced\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                    <L7p:SetVariable>\n                                    <L7p:Base64Expression stringValue=\"dGxzX2NsaWVudF9hdXRoLHNlbGZfc2lnbmVkX3Rsc19jbGllbnRfYXV0aCxwcml2YXRlX2tleV9qd3Q=\"/>\n                                    <L7p:VariableToSet stringValue=\"allowed_methods\"/>\n                                    </L7p:SetVariable>\n                                    <L7p:Split>\n                                    <L7p:InputVariable stringValue=\"allowed_methods\"/>\n                                    <L7p:OutputVariable stringValue=\"allowed_methods\"/>\n                                    </L7p:Split>\n                                    <L7p:ComparisonAssertion>\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:Expression1 stringValue=\"${allowed_methods}\"/>\n                                    <L7p:MultivaluedComparison multivaluedComparison=\"ANY\"/>\n                                    <L7p:Operator operatorNull=\"null\"/>\n                                    <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${token_endpoint_auth_method}\"/>\n                                    </L7p:item>\n                                    </L7p:Predicates>\n                                    </L7p:ComparisonAssertion>\n                                </wsp:All>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// validate fapi settings\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:OneOrMore>\n                        </wsp:All>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"//validate fapi_profile\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:OneOrMore>\n                    <L7p:JsonTransformation>\n                        <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                            <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                        </L7p:DestinationMessageTarget>\n                        <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                        <L7p:PrettyPrint booleanValue=\"true\"/>\n                        <L7p:RootTagString stringValue=\"root\"/>\n                        <L7p:Target target=\"OTHER\"/>\n                        <L7p:Transformation transformation=\"JSON_to_XML\"/>\n                    </L7p:JsonTransformation>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.openid_registration.response.scope\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"reg_key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"reg_scope\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"scope_found\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:TrueAssertion/>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.openid_registration.response.redirect_uris\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"reg_key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"reg_callback\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"redirect_uris_found\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:TrueAssertion/>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.openid_registration.response.environment\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"reg_key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"reg_environment\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"environment_found\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:TrueAssertion/>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.openid_registration.response.resource\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"reg_key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"reg_resource\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"resource_found\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:TrueAssertion/>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.openid_registration.response.status\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"reg_key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"reg_status\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                                <L7p:VariableToSet stringValue=\"status_found\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:TrueAssertion/>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${scope_found}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${scope_found}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${reg_scope.result}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${request.http.parameter.scope}\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PHNjb3BlPiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5zY29wZX08L3Njb3BlPg==\"/>\n                                <L7p:VariableToSet stringValue=\"field_scope\"/>\n                            </L7p:SetVariable>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_scope\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response/scope\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_2_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_target\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_scope.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_target.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"field_scope\"/>\n                                <L7p:InsertedElementLocation insertedElementLocation=\"FIRST_CHILD\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:JsonTransformation>\n                                <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                    <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                                </L7p:DestinationMessageTarget>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:PrettyPrint booleanValue=\"true\"/>\n                                <L7p:RootTagString stringValue=\"\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:JsonTransformation>\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.root\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"jsonPath_openid_registration\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtqc29uUGF0aF9vcGVuaWRfcmVnaXN0cmF0aW9uLnJlc3VsdH0=\"/>\n                                <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                <L7p:DataType variableDataType=\"message\"/>\n                                <L7p:VariableToSet stringValue=\"key_custom\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check if scope has changed\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${redirect_uris_found}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${redirect_uris_found}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLmNhbGxiYWNrfQ==\"/>\n                                <L7p:VariableToSet stringValue=\"request_callback\"/>\n                            </L7p:SetVariable>\n                            <wsp:OneOrMore wsp:Usage=\"Required\">\n                                <L7p:Regex>\n                                    <L7p:AutoTarget booleanValue=\"false\"/>\n                                    <L7p:FindAll booleanValue=\"true\"/>\n                                    <L7p:IncludeEntireExpressionCapture booleanValue=\"false\"/>\n                                    <L7p:OtherTargetMessageVariable stringValue=\"request_callback\"/>\n                                    <L7p:Regex stringValue=\"&amp;\"/>\n                                    <L7p:Replace booleanValue=\"true\"/>\n                                    <L7p:Replacement stringValue=\"&amp;amp;\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                </L7p:Regex>\n                                <L7p:TrueAssertion/>\n                                <L7p:assertionComment>\n                                    <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// escape &amp;\"/>\n                                    </L7p:entry>\n                                    </L7p:Properties>\n                                </L7p:assertionComment>\n                            </wsp:OneOrMore>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${reg_callback.result}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${request_callback}\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_redirect_uris\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response/redirect_uris\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_2_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_target\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PHJlZGlyZWN0X3VyaXM+JHtyZXF1ZXN0X2NhbGxiYWNrfTwvcmVkaXJlY3RfdXJpcz4=\"/>\n                                <L7p:VariableToSet stringValue=\"field_redirect_uris\"/>\n                            </L7p:SetVariable>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_redirect_uris.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_target.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"field_redirect_uris\"/>\n                                <L7p:InsertedElementLocation insertedElementLocation=\"FIRST_CHILD\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:JsonTransformation>\n                                <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                    <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                                </L7p:DestinationMessageTarget>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:PrettyPrint booleanValue=\"true\"/>\n                                <L7p:RootTagString stringValue=\"\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:JsonTransformation>\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.root\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"jsonPath_openid_registration\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtqc29uUGF0aF9vcGVuaWRfcmVnaXN0cmF0aW9uLnJlc3VsdH0=\"/>\n                                <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                <L7p:DataType variableDataType=\"message\"/>\n                                <L7p:VariableToSet stringValue=\"key_custom\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check if callback has changed\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${environment_found}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${environment_found}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${reg_environment.result}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${request.http.parameter.environment}\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_environment\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response/environment\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_2_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_target\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PGVudmlyb25tZW50PiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5lbnZpcm9ubWVudH08L2Vudmlyb25tZW50Pg==\"/>\n                                <L7p:VariableToSet stringValue=\"field_environment\"/>\n                            </L7p:SetVariable>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_environment.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_target.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"field_environment\"/>\n                                <L7p:InsertedElementLocation insertedElementLocation=\"FIRST_CHILD\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:JsonTransformation>\n                                <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                    <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                                </L7p:DestinationMessageTarget>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:PrettyPrint booleanValue=\"true\"/>\n                                <L7p:RootTagString stringValue=\"\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:JsonTransformation>\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.root\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"jsonPath_openid_registration\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtqc29uUGF0aF9vcGVuaWRfcmVnaXN0cmF0aW9uLnJlc3VsdH0=\"/>\n                                <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                <L7p:DataType variableDataType=\"message\"/>\n                                <L7p:VariableToSet stringValue=\"key_custom\"/>\n                            </L7p:SetVariable>\n                        </wsp:All>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check if environment has changed\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${resource_found}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${resource_found}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${reg_resource.result}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${request.http.parameter.resource}\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_resource\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response/resource\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_2_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_target\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PHJlc291cmNlPiR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5yZXNvdXJjZX08L3Jlc291cmNlPg==\"/>\n                                <L7p:VariableToSet stringValue=\"field_resource\"/>\n                            </L7p:SetVariable>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_resource.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_target.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"field_resource\"/>\n                                <L7p:InsertedElementLocation insertedElementLocation=\"FIRST_CHILD\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:JsonTransformation>\n                                <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                    <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                                </L7p:DestinationMessageTarget>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:PrettyPrint booleanValue=\"true\"/>\n                                <L7p:RootTagString stringValue=\"\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:JsonTransformation>\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.root\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"jsonPath_openid_registration\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtqc29uUGF0aF9vcGVuaWRfcmVnaXN0cmF0aW9uLnJlc3VsdH0=\"/>\n                                <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                <L7p:DataType variableDataType=\"message\"/>\n                                <L7p:VariableToSet stringValue=\"key_custom\"/>\n                            </L7p:SetVariable>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// old resource updated\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:All>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check if resource has changed\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${status_found}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${status_found}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:ComparisonAssertion>\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Expression1 stringValue=\"${reg_status.result}\"/>\n                                <L7p:Operator operatorNull=\"null\"/>\n                                <L7p:Predicates predicates=\"included\">\n                                    <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                    </L7p:item>\n                                    <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"${request.http.parameter.status}\"/>\n                                    </L7p:item>\n                                </L7p:Predicates>\n                            </L7p:ComparisonAssertion>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// status not changed\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:All>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_status\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response/status\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_2_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_target\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"PHN0YXR1cz4ke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuc3RhdHVzfTwvc3RhdHVzPg==\"/>\n                                <L7p:VariableToSet stringValue=\"field_status\"/>\n                            </L7p:SetVariable>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_status.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_target.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"field_status\"/>\n                                <L7p:InsertedElementLocation insertedElementLocation=\"FIRST_CHILD\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:JsonTransformation>\n                                <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                    <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                                </L7p:DestinationMessageTarget>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:PrettyPrint booleanValue=\"true\"/>\n                                <L7p:RootTagString stringValue=\"\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:JsonTransformation>\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.root\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"jsonPath_openid_registration\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtqc29uUGF0aF9vcGVuaWRfcmVnaXN0cmF0aW9uLnJlc3VsdH0=\"/>\n                                <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                <L7p:DataType variableDataType=\"message\"/>\n                                <L7p:VariableToSet stringValue=\"key_custom\"/>\n                            </L7p:SetVariable>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"status updated\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:All>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// check if status has changed\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:OneOrMore>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${fapi_profile_global}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"false\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <wsp:All wsp:Usage=\"Required\">\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_fapi_profile\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response/fapi_profile\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_2_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:ResponseXpathAssertion>\n                                <L7p:VariablePrefix stringValue=\"xpath_reg_target\"/>\n                                <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                                <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                    <L7p:Expression stringValue=\"/root/openid_registration/response\"/>\n                                    <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                    </L7p:Namespaces>\n                                    <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                                </L7p:XpathExpression>\n                            </L7p:ResponseXpathAssertion>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_fapi_profile.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:RemoveElement>\n                                <L7p:ElementFromVariable stringValue=\"xpath_reg_target.elements[0]\"/>\n                                <L7p:ElementToInsertVariable stringValue=\"field_status\"/>\n                                <L7p:Enabled booleanValue=\"false\"/>\n                                <L7p:InsertedElementLocation insertedElementLocation=\"FIRST_CHILD\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:RemoveElement>\n                            <L7p:JsonTransformation>\n                                <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                    <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                    <L7p:Target target=\"OTHER\"/>\n                                    <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                                </L7p:DestinationMessageTarget>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:PrettyPrint booleanValue=\"true\"/>\n                                <L7p:RootTagString stringValue=\"\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                            </L7p:JsonTransformation>\n                            <L7p:EvaluateJsonPathExpressionV2>\n                                <L7p:Expression stringValue=\"$.root\"/>\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:VariablePrefix stringValue=\"jsonPath_openid_registration\"/>\n                            </L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:SetVariable>\n                                <L7p:Base64Expression stringValue=\"JHtqc29uUGF0aF9vcGVuaWRfcmVnaXN0cmF0aW9uLnJlc3VsdH0=\"/>\n                                <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                                <L7p:DataType variableDataType=\"message\"/>\n                                <L7p:VariableToSet stringValue=\"key_custom\"/>\n                            </L7p:SetVariable>\n                            <L7p:assertionComment>\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"remove fapi_profile\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:assertionComment>\n                        </wsp:All>\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// remove fapi_profile if set as global\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:OneOrMore>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// Update client_key_custom\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:All>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"75fa2a35-17b1-490d-91f9-20cccd53689f\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Key Update\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"account_plan_mapping_ids\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.account_plan_mapping_ids}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"callback\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.callback}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_secret\"/>\n                            <L7p:value stringValue=\"${client_secret}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_status\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.status}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"created_by\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.custom_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.environment}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"hashing_metadata\"/>\n                            <L7p:value stringValue=\"hashing_metadata\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"key_custom\"/>\n                            <L7p:value stringValue=\"${key_custom.mainpart}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"resource\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.resource}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"scope\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.scope}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.secret}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret_expiration\"/>\n                            <L7p:value stringValue=\"${xpathClientSecretExp.result}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"service_ids\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.service_ids}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${show_client_secret}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:HardcodedResponse>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+RWRpdCBDbGllbnQgS2V5PC9oMT4NCjxwPlRoZSBjbGllbnRfa2V5OiAnJHt4cGF0aEtleS5yZXN1bHR9JyBoYXMgc3VjY2Vzc2Z1bGx5IGJlZW4gdXBkYXRlZCB3aXRoIHNlY3JldCAke3JlcXVlc3QuaHR0cC5wYXJhbWV0ZXIuc2VjcmV0fSA8YnI+PHNwYW4gc3R5bGU9ImNvbG9yOiNGRjAwMDA7IiBpZD0id2FybmluZ19tZXNzYWdlIiA+KDxiPldhcm5pbmc8L2I+OiBQbGVhc2UgZW5zdXJlIHRvIG1ha2UgYSBjb3B5IG9mIHRoZSBjbGllbnQgc2VjcmV0KTwvc3Bhbj48L3A+CjwvZGl2Pg0KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                            <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                        </L7p:HardcodedResponse>\n                    </wsp:All>\n                    <L7p:HardcodedResponse>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+RWRpdCBDbGllbnQgS2V5PC9oMT4NCjxwPlRoZSBjbGllbnRfa2V5OiAnJHt4cGF0aEtleS5yZXN1bHR9JyBoYXMgc3VjY2Vzc2Z1bGx5IGJlZW4gdXBkYXRlZDwvcD4NCjwvZGl2Pg0KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                        <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                    </L7p:HardcodedResponse>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Edited client_key\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"updateSecret\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"updateSecret\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                    <L7p:VariableToSet stringValue=\"master\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"ZmFsc2U=\"/>\n                    <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                </L7p:SetVariable>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"6dbc70f9-bb40-4a69-a0ec-88fae4f35300\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Generate OAuth Token\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ac\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"art\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"at\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cid\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"cidm\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"csec\"/>\n                            <L7p:value stringValue=\"true\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"curid\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"dac\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ock\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"ot\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"pru\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"req_expiry\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"rft\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"urt\"/>\n                            <L7p:value stringValue=\"false\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:Expression1 stringValue=\"${request.http.parameter.client_key}\"/>\n                        <L7p:Expression2 stringValue=\"\"/>\n                        <L7p:Negate booleanValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:Negated booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:Encapsulated>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"103\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                        <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                        <L7p:Parameters mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"apiPrefix\"/>\n                                <L7p:value stringValue=\"\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"givenErrorCode\"/>\n                                <L7p:value stringValue=\"103\"/>\n                            </L7p:entry>\n                        </L7p:Parameters>\n                    </L7p:Encapsulated>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"check for required parameters\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:Encapsulated>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// GET (validate client key valid) before disabling\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"8f15cde0-2bcd-434c-996d-5e236e128bc5\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client GET\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_ident\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"filterStatus\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"format\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"name\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"operation\"/>\n                            <L7p:value stringValue=\"getKey\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"org\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"queryOffset\"/>\n                            <L7p:value stringValue=\"${offsetValue}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"registered_by\"/>\n                            <L7p:value stringValue=\"${lookupUser}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathKey\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_key/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathClientSecret\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:secret/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathStatus\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:status/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathScope\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:scope/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCallback\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:callback/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathEnvironment\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:environment/text()\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathResource\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:resource\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathCustomKey\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:client_key_custom\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathServiceIds\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:serviceids\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathAccountPlanMappingIds\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:accountplanmappingids\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:ResponseXpathAssertion>\n                    <L7p:VariablePrefix stringValue=\"xpathHashMetaData\"/>\n                    <L7p:XmlMsgSrc stringValue=\"resp\"/>\n                    <L7p:XpathExpression xpathExpressionValue=\"included\">\n                        <L7p:Expression stringValue=\"/ns:values/ns:value/ns:hashing_metadata\"/>\n                        <L7p:Namespaces mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"ns\"/>\n                                <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                            </L7p:entry>\n                            <L7p:entry>\n                                <L7p:key stringValue=\"s\"/>\n                                <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                            </L7p:entry>\n                        </L7p:Namespaces>\n                        <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                    </L7p:XpathExpression>\n                </L7p:ResponseXpathAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aEhhc2hNZXRhRGF0YS5yZXN1bHR9\"/>\n                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"hashing_metadata\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt4cGF0aEN1c3RvbUtleS5yZXN1bHR9\"/>\n                    <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                    <L7p:DataType variableDataType=\"message\"/>\n                    <L7p:VariableToSet stringValue=\"key_custom\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"MA==\"/>\n                    <L7p:VariableToSet stringValue=\"secret_expiration\"/>\n                </L7p:SetVariable>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${lifetime}\"/>\n                        <L7p:Expression2 stringValue=\"0\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:RightValue stringValue=\"0\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"JHtnZW5FeHBpcmF0aW9ufQ==\"/>\n                        <L7p:VariableToSet stringValue=\"secret_expiration\"/>\n                    </L7p:SetVariable>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:Expression stringValue=\"openid_registration.response\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                            <L7p:VariablePrefix stringValue=\"metadata\"/>\n                        </L7p:EvaluateJsonPathExpressionV2>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHttZXRhZGF0YS5yZXN1bHR9\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"client_metadata\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"e30=\"/>\n                        <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                        <L7p:DataType variableDataType=\"message\"/>\n                        <L7p:VariableToSet stringValue=\"client_metadata\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"Find registered auth method\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:Encapsulated>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// In the case of secret change, convert new secret to hashed when CWP 'otk.hashed_secret.enable' set as true\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"eb33b796-a064-48aa-b6f5-d0ebad2bb0b9\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Create Client Secret Hash\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_secret\"/>\n                            <L7p:value stringValue=\"${genSecret}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"master_key_flag\"/>\n                            <L7p:value stringValue=\"${master}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${client_metadata.mainpart}\"/>\n                            <L7p:Expression2 stringValue=\"{}\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"{}\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                            <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:Expression stringValue=\"token_endpoint_auth_method\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"client_metadata\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                            <L7p:VariablePrefix stringValue=\"auth_method\"/>\n                        </L7p:EvaluateJsonPathExpressionV2>\n                        <L7p:ComparisonAssertion>\n                            <L7p:Expression1 stringValue=\"${auth_method.result}\"/>\n                            <L7p:Expression2 stringValue=\"client_secret_basic\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:RightValue stringValue=\"client_secret_basic\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"dHJ1ZQ==\"/>\n                            <L7p:VariableToSet stringValue=\"show_client_secret\"/>\n                        </L7p:SetVariable>\n                    </wsp:All>\n                    <L7p:TrueAssertion/>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// check to see if client_secret needs to be displayed\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${client_metadata.mainpart}\"/>\n                        <L7p:Expression2 stringValue=\"{}\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:RightValue stringValue=\"{}\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:JsonTransformation>\n                            <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                            </L7p:DestinationMessageTarget>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                            <L7p:PrettyPrint booleanValue=\"true\"/>\n                            <L7p:RootTagString stringValue=\"root\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                            <L7p:Transformation transformation=\"JSON_to_XML\"/>\n                        </L7p:JsonTransformation>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"PGNsaWVudF9zZWNyZXQ+JHtjbGllbnRfc2VjcmV0fTwvY2xpZW50X3NlY3JldD4=\"/>\n                            <L7p:VariableToSet stringValue=\"field_client_secret\"/>\n                        </L7p:SetVariable>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpath_reg_client_secret\"/>\n                            <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/root/openid_registration/response/client_secret\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_2_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:ResponseXpathAssertion>\n                            <L7p:VariablePrefix stringValue=\"xpath_reg_target\"/>\n                            <L7p:XmlMsgSrc stringValue=\"key_custom_xml\"/>\n                            <L7p:XpathExpression xpathExpressionValue=\"included\">\n                                <L7p:Expression stringValue=\"/root/openid_registration/response\"/>\n                                <L7p:Namespaces mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"ns\"/>\n                                    <L7p:value stringValue=\"http://ns.l7tech.com/2012/11/otk-clientstore\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"s\"/>\n                                    <L7p:value stringValue=\"http://schemas.xmlsoap.org/soap/envelope/\"/>\n                                    </L7p:entry>\n                                </L7p:Namespaces>\n                                <L7p:XpathVersion xpathVersion=\"XPATH_1_0\"/>\n                            </L7p:XpathExpression>\n                        </L7p:ResponseXpathAssertion>\n                        <L7p:RemoveElement>\n                            <L7p:ElementFromVariable stringValue=\"xpath_reg_client_secret.elements[0]\"/>\n                            <L7p:ElementToInsertVariable stringValue=\"\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:RemoveElement>\n                        <L7p:RemoveElement>\n                            <L7p:ElementFromVariable stringValue=\"xpath_reg_target.elements[0]\"/>\n                            <L7p:ElementToInsertVariable stringValue=\"field_client_secret\"/>\n                            <L7p:InsertedElementLocation insertedElementLocation=\"FIRST_CHILD\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:RemoveElement>\n                        <L7p:JsonTransformation>\n                            <L7p:DestinationMessageTarget MessageTarget=\"included\">\n                                <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                                <L7p:Target target=\"OTHER\"/>\n                                <L7p:TargetModifiedByGateway booleanValue=\"true\"/>\n                            </L7p:DestinationMessageTarget>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom_xml\"/>\n                            <L7p:PrettyPrint booleanValue=\"true\"/>\n                            <L7p:RootTagString stringValue=\"\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:JsonTransformation>\n                        <L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:Expression stringValue=\"$.root\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"key_custom\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                            <L7p:VariablePrefix stringValue=\"jsonPath_openid_registration\"/>\n                        </L7p:EvaluateJsonPathExpressionV2>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtqc29uUGF0aF9vcGVuaWRfcmVnaXN0cmF0aW9uLnJlc3VsdH0=\"/>\n                            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n                            <L7p:DataType variableDataType=\"message\"/>\n                            <L7p:VariableToSet stringValue=\"key_custom\"/>\n                        </L7p:SetVariable>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// Update client_key_custom\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                </wsp:OneOrMore>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"75fa2a35-17b1-490d-91f9-20cccd53689f\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Client Key Update\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"account_plan_mapping_ids\"/>\n                            <L7p:value stringValue=\"${xpathAccountPlanMappingIds.result}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"callback\"/>\n                            <L7p:value stringValue=\"${xpathCallback.result}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.client_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_secret\"/>\n                            <L7p:value stringValue=\"${client_secret}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_status\"/>\n                            <L7p:value stringValue=\"${xpathStatus.result}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"created_by\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom\"/>\n                            <L7p:value stringValue=\"\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"custom_key\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.custom_key}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"environment\"/>\n                            <L7p:value stringValue=\"${xpathEnvironment.result}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"hashing_metadata\"/>\n                            <L7p:value stringValue=\"hashing_metadata\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"key_custom\"/>\n                            <L7p:value stringValue=\"${key_custom.mainpart}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"resource\"/>\n                            <L7p:value stringValue=\"${xpathResource.result}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"scope\"/>\n                            <L7p:value stringValue=\"${xpathScope.result}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret\"/>\n                            <L7p:value stringValue=\"${request.http.parameter.secret}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"secret_expiration\"/>\n                            <L7p:value stringValue=\"${secret_expiration}\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"service_ids\"/>\n                            <L7p:value stringValue=\"${xpathServiceIds.result}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${show_client_secret}\"/>\n                            <L7p:Expression2 stringValue=\"true\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"true\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:HardcodedResponse>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+VXBkYXRlIENsaWVudCBTZWNyZXQ8L2gxPg0KPHA+VGhlIGNsaWVudF9rZXk6ICcke3hwYXRoS2V5LnJlc3VsdH0nIGhhcyBzdWNjZXNzZnVsbHkgYmVlbiB1cGRhdGVkIHdpdGggc2VjcmV0ICR7Z2VuU2VjcmV0fSA8YnI+PHNwYW4gc3R5bGU9ImNvbG9yOiNGRjAwMDA7IiBpZD0id2FybmluZ19tZXNzYWdlIiA+KDxiPldhcm5pbmc8L2I+OiBQbGVhc2UgZW5zdXJlIHRvIG1ha2UgYSBjb3B5IG9mIHRoZSBjbGllbnQgc2VjcmV0KTwvc3Bhbj48L3A+CjwvZGl2Pg0KJHt3ZWJzaXRlX2JvdHRvbX0=\"/>\n                            <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                        </L7p:HardcodedResponse>\n                    </wsp:All>\n                    <L7p:HardcodedResponse>\n                        <L7p:AssertionComment assertionComment=\"included\">\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"200\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:AssertionComment>\n                        <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+VXBkYXRlIENsaWVudCBTZWNyZXQ8L2gxPg0KPHA+VGhlIGNsaWVudF9rZXk6ICcke3hwYXRoS2V5LnJlc3VsdH0nIGhhcyBzdWNjZXNzZnVsbHkgYmVlbiB1cGRhdGVkPC9wPg0KPC9kaXY+DQoke3dlYnNpdGVfYm90dG9tfQ==\"/>\n                        <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                    </L7p:HardcodedResponse>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Updated client secret\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${state}\"/>\n                    <L7p:Expression2 stringValue=\"disableTokens\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"disableTokens\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:Encapsulated>\n                    <L7p:EncapsulatedAssertionConfigGuid stringValue=\"cd21aefd-99f1-45f5-80ab-4bee011b9b5c\"/>\n                    <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Manager Token Disable\"/>\n                    <L7p:Parameters mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"client_key\"/>\n                            <L7p:value stringValue=\"${client_key}\"/>\n                        </L7p:entry>\n                    </L7p:Parameters>\n                </L7p:Encapsulated>\n                <L7p:HardcodedResponse>\n                    <L7p:AssertionComment assertionComment=\"included\">\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"200\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:AssertionComment>\n                    <L7p:Base64ResponseBody stringValue=\"JHt3ZWJzaXRlX3RvcH0NCjxkaXY+DQo8aDE+RGlzYWJsZSBDbGllbnQgS2V5IFRva2VuczwvaDE+DQo8cD5Ub2tlbnMgZm9yIHRoZSBjbGllbnRfa2V5ICcke2NsaWVudF9rZXl9JyB3ZXJlIHN1Y2Nlc3NmdWxseSBkaXNhYmxlZCE8L3A+DQo8L2Rpdj4NCiR7d2Vic2l0ZV9ib3R0b219\"/>\n                    <L7p:ResponseContentType stringValue=\"text/html;charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"Disable tokens for client_key\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <L7p:CommentAssertion>\n                <L7p:Comment stringValue=\"===Unknown state or authentication error==\"/>\n            </L7p:CommentAssertion>\n            <wsp:All wsp:Usage=\"Required\">\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${error.code}\"/>\n                        <L7p:Expression2 stringValue=\"\"/>\n                        <L7p:Negate booleanValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Negated booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <L7p:SetVariable>\n                        <L7p:Base64Expression stringValue=\"MDAw\"/>\n                        <L7p:VariableToSet stringValue=\"error.code\"/>\n                    </L7p:SetVariable>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"error.code\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <L7p:ComparisonAssertion>\n                        <L7p:CaseSensitive booleanValue=\"false\"/>\n                        <L7p:Expression1 stringValue=\"${error.msg}\"/>\n                        <L7p:Expression2 stringValue=\"\"/>\n                        <L7p:Negate booleanValue=\"true\"/>\n                        <L7p:Operator operator=\"EMPTY\"/>\n                        <L7p:Predicates predicates=\"included\">\n                            <L7p:item binary=\"included\">\n                                <L7p:CaseSensitive booleanValue=\"false\"/>\n                                <L7p:Negated booleanValue=\"true\"/>\n                                <L7p:Operator operator=\"EMPTY\"/>\n                                <L7p:RightValue stringValue=\"\"/>\n                            </L7p:item>\n                        </L7p:Predicates>\n                    </L7p:ComparisonAssertion>\n                    <wsp:OneOrMore wsp:Usage=\"Required\">\n                        <L7p:Encapsulated>\n                            <L7p:AssertionComment assertionComment=\"included\">\n                                <L7p:Properties mapValue=\"included\">\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                    <L7p:value stringValue=\"error.code\"/>\n                                    </L7p:entry>\n                                    <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"get the error code message\"/>\n                                    </L7p:entry>\n                                </L7p:Properties>\n                            </L7p:AssertionComment>\n                            <L7p:EncapsulatedAssertionConfigGuid stringValue=\"56bd8147-3ab4-4d09-9460-8b2de02b7a9e\"/>\n                            <L7p:EncapsulatedAssertionConfigName stringValue=\"OTK Fail with error message\"/>\n                            <L7p:Parameters mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"apiPrefix\"/>\n                                    <L7p:value stringValue=\"\"/>\n                                </L7p:entry>\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"givenErrorCode\"/>\n                                    <L7p:value stringValue=\"${error.code}\"/>\n                                </L7p:entry>\n                            </L7p:Parameters>\n                        </L7p:Encapsulated>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtlcnJvci5tc2d9\"/>\n                            <L7p:VariableToSet stringValue=\"error.msg\"/>\n                        </L7p:SetVariable>\n                    </wsp:OneOrMore>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                                <L7p:value stringValue=\"error.msg\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtlcnJvci5tc2d9\"/>\n                    <L7p:VariableToSet stringValue=\"erro.msg\"/>\n                </L7p:SetVariable>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=\"/>\n                    <L7p:VariableToSet stringValue=\"content-type\"/>\n                </L7p:SetVariable>\n                <L7p:AuditDetailAssertion>\n                    <L7p:Detail stringValue=\"error.code: '${error.code}', error.msg: ${error.msg}\"/>\n                </L7p:AuditDetailAssertion>\n                <L7p:FalseAssertion/>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                            <L7p:value stringValue=\"error\"/>\n                        </L7p:entry>\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"create an error response\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <L7p:assertionComment>\n                <L7p:Properties mapValue=\"included\">\n                    <L7p:entry>\n                        <L7p:key stringValue=\"LEFT.COMMENT\"/>\n                        <L7p:value stringValue=\"tasks\"/>\n                    </L7p:entry>\n                </L7p:Properties>\n            </L7p:assertionComment>\n        </wsp:OneOrMore>\n    </wsp:All>\n</wsp:Policy>"
  }
}