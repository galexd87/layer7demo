{
  "goid": "38774b8d346d15c244d2e1102368e60e",
  "guid": "6ec192a7-67f0-4845-b290-c680a52007c9",
  "name": "WSDL Query Handler",
  "resolutionPath": "/wsdlQueryHandler",
  "serviceType": "WEB_API",
  "checksum": "a98e6c4f9080ab786105189048792831066d89fb",
  "enabled": true,
  "folderPath": "/",
  "methodsAllowed": [
    "GET"
  ],
  "tracingEnabled": false,
  "wssProcessingEnabled": true,
  "laxResolution": false,
  "policy": {
    "xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<wsp:Policy xmlns:L7p=\"http://www.layer7tech.com/ws/policy\" xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2002/12/policy\">\n    <wsp:All wsp:Usage=\"Required\">\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"WSDL Query Handler Service\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"Retrieves a service WSDL or WSDL dependency (Service Document)\"/>\n        </L7p:CommentAssertion>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"This policy should not be modified\"/>\n        </L7p:CommentAssertion>\n        <L7p:AuditAssertion/>\n        <L7p:CustomizeErrorResponse>\n            <L7p:Content stringValue=\"Page not found.\"/>\n            <L7p:ExtraHeaders nameValuePairArray=\"included\"/>\n            <L7p:HttpStatus stringValue=\"404\"/>\n        </L7p:CustomizeErrorResponse>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:CommentAssertion>\n                    <L7p:Comment stringValue=\"Service ID specified in request query parameter\"/>\n                </L7p:CommentAssertion>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${request.http.parameter.serviceoid}\"/>\n                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                    <L7p:Operator operatorNull=\"null\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item dataType=\"included\">\n                            <L7p:Type variableDataType=\"string\"/>\n                        </L7p:item>\n                        <L7p:item binary=\"included\">\n                            <L7p:Negated booleanValue=\"true\"/>\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:RightValue stringValue=\"x\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnNlcnZpY2VvaWR9\"/>\n                    <L7p:VariableToSet stringValue=\"serviceId\"/>\n                </L7p:SetVariable>\n                <L7p:AuditDetailAssertion>\n                    <L7p:Detail stringValue=\"Service ID specified: ${serviceId}\"/>\n                </L7p:AuditDetailAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${request.http.parameter.servdocoid}\"/>\n                            <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:Negated booleanValue=\"true\"/>\n                                    <L7p:Operator operator=\"EMPTY\"/>\n                                    <L7p:RightValue stringValue=\"x\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnNlcnZkb2NvaWR9\"/>\n                            <L7p:VariableToSet stringValue=\"docId\"/>\n                        </L7p:SetVariable>\n                        <L7p:AuditDetailAssertion>\n                            <L7p:Detail stringValue=\"Service Document ID specified: ${docId}\"/>\n                        </L7p:AuditDetailAssertion>\n                    </wsp:All>\n                    <L7p:TrueAssertion/>\n                </wsp:OneOrMore>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:CommentAssertion>\n                    <L7p:Comment stringValue=\"Resolve Service ID by request URI - WSDL request intercepted by Query Redirection fragment\"/>\n                </L7p:CommentAssertion>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${serviceId}\"/>\n                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                    <L7p:Operator operatorNull=\"null\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item dataType=\"included\">\n                            <L7p:Type variableDataType=\"string\"/>\n                        </L7p:item>\n                        <L7p:item binary=\"included\">\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:RightValue stringValue=\"x\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:ResolveService>\n                    <L7p:Uri stringValue=\"${request.http.uri}\"/>\n                </L7p:ResolveService>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHtyZXNvbHZlZFNlcnZpY2Uub2lkfQ==\"/>\n                    <L7p:VariableToSet stringValue=\"serviceId\"/>\n                </L7p:SetVariable>\n                <L7p:AuditDetailAssertion>\n                    <L7p:Detail stringValue=\"Service ID resolved: ${serviceId}\"/>\n                </L7p:AuditDetailAssertion>\n            </wsp:All>\n        </wsp:OneOrMore>\n        <L7p:CommentAssertion>\n            <L7p:Comment stringValue=\"Perform Authentication\"/>\n        </L7p:CommentAssertion>\n        <L7p:Include>\n            <L7p:PolicyGuid stringValue=\"54578ea9-140b-48f5-9fc1-340f2fe81c15\"/>\n        </L7p:Include>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:CommentAssertion>\n                    <L7p:Comment stringValue=\"Retrieve WSDL for service\"/>\n                </L7p:CommentAssertion>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${docId}\"/>\n                    <L7p:ExpressionIsVariable booleanValue=\"false\"/>\n                    <L7p:MultivaluedComparison multivaluedComparison=\"FAIL\"/>\n                    <L7p:Operator operatorNull=\"null\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item dataType=\"included\">\n                            <L7p:Type variableDataType=\"string\"/>\n                        </L7p:item>\n                        <L7p:item binary=\"included\">\n                            <L7p:Operator operator=\"EMPTY\"/>\n                            <L7p:RightValue stringValue=\"x\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:RetrieveServiceWsdl>\n                    <L7p:MessageTarget MessageTarget=\"included\">\n                        <L7p:Target target=\"RESPONSE\"/>\n                    </L7p:MessageTarget>\n                    <L7p:ProxyDependencies booleanValue=\"true\"/>\n                    <L7p:ServiceId stringValue=\"${serviceId}\"/>\n                </L7p:RetrieveServiceWsdl>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:CommentAssertion>\n                    <L7p:Comment stringValue=\"Retrieve WSDL dependency (Service Document)\"/>\n                </L7p:CommentAssertion>\n                <L7p:RetrieveServiceWsdl>\n                    <L7p:MessageTarget MessageTarget=\"included\">\n                        <L7p:Target target=\"RESPONSE\"/>\n                    </L7p:MessageTarget>\n                    <L7p:Port stringValue=\"${request.url.port}\"/>\n                    <L7p:ProxyDependencies booleanValue=\"true\"/>\n                    <L7p:RetrieveDependency booleanValue=\"true\"/>\n                    <L7p:ServiceDocumentId stringValue=\"${docId}\"/>\n                    <L7p:ServiceId stringValue=\"${serviceId}\"/>\n                </L7p:RetrieveServiceWsdl>\n            </wsp:All>\n        </wsp:OneOrMore>\n    </wsp:All>\n</wsp:Policy>\n"
  }
}